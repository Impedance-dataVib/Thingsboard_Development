{
  "entityType" : "WIDGETS_BUNDLE",
  "entity" : {
    "alias" : "nt_widgets",
    "description" : null,
    "externalId" : null,
    "id" : {
      "entityType" : "WIDGETS_BUNDLE",
      "id" : "9aec4040-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "image" : null,
    "name" : "NT-Widgets",
    "title" : "NT-Widgets"
  },
  "widgets" : [ {
    "alias" : "active_device_status",
    "name" : "Active_device_status",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 7.5,
      "sizeY" : 3,
      "resources" : [ ],
      "templateHtml" : "<div id=\"card\"  fxLayout=\"column\">\n    <div fxLayoutAlign=\"flex-start center\">\n        <div fxLayout=\"row\" fxLayoutAlign=\"flex-start center\" fxLayoutGap=\"12px\">\n            <div id=\"gauge2\">\n                <canvas id=\"canvas-circle2\"></canvas>\n            </div>\n            <div class=\"gauge-values\">\n                <div class=\"label\">\n                    <div class=\"status-label\">\n                        Active Device Status\n                    </div>\n                    <div class=\"status-value\">\n                        18<sub style=\"font-weight:normal;\">/20</sub>\n                    </div>\n                    <div class=\"status-info\">\n                        <div class=\"status-info-active\">active</div>\n                        <div class=\"status-info-inactive\">Inactive(2)</div>\n                    </div>\n                </div>\n            </div>        \n        </div>\n    </div>\n</div>    ",
      "templateCss" : "*{\n    padding: 0;\n    margin:0;\n    box-sizing: border-box;\n}\n\n#container{\n    width:100%;\n    height:100%;\n}\n\n#canvas-circle2{\n    max-width: 100%;\n}\n\n#gauge2{\n    width:104px;\n    height:104px;\n}\n\n.gauge-values{\n    /*width:70%;*/\n    display: flex;\n    flex-wrap: wrap;\n}\n.status-info {\n    display: flex;\n    align-items: center;\n}\n\n.status-value {\n    font-family: \"Inter\";\n    font-size: 32px;\n    font-weight: 700;\n    margin-bottom: 4px;\n}\n.status-info-active{\n    padding-right:16px;\n    border-right:1px solid #696969;\n    text-transform: capitalize;\n    font-size:16px;\n    color:#0EC23E;\n}\n.status-info-inactive{\n    padding-left:16px;\n    font-size :16px;\n    text-transform: capitalize;\n    color:#E93800;\n}\n.status-label {\n    font-family: \"Inter\";\n    font-weight: 400;\n    font-style: normal;\n    font-size: 16px;\n    color: #696969;\n    text-transform: capitalize;\n    margin-bottom: 4px;\n\n}",
      "controllerScript" : "\nself.onInit = function() {\n    var canvas = document.getElementById(\"canvas-circle2\");\n    var ctx = canvas.getContext(\"2d\");\n    var gauge2 = document.getElementById(\"gauge2\");\n    canvas.width = gauge2.clientWidth;\n    canvas.height = gauge2.clientHeight;\n    var data = [\n        { \"value\": 80, \"color\": \"#0EC23E\" },\n        { \"value\": 20, \"color\": \"#E93800\" },\n    ]\n    class circular_gauge {\n\n        constructor(min, max, ctx) {\n            this.min = min;\n            this.max = max;\n            this.ctx = ctx;\n        }\n            circle(x, y, r, ...data) {\n            // var PI = Math.PI;\n            var startAngle = -Math.PI / 2;\n            for (var i = 0; i < data.length; i++) {\n                var endAngle = startAngle + (2 * Math.PI * data[i].value / this.max * 100 / 100)\n                ctx.beginPath();\n                ctx.arc(x, y, r, startAngle, endAngle);\n                ctx.strokeStyle = data[i].color;\n                ctx.lineWidth = 7;\n                ctx.stroke();\n                ctx.font = 'normal 28px Inter';\n                ctx.textAlign = 'center';\n                ctx.textBaseline = 'middle';\n                ctx.fillStyle = 'black';\n                ctx.fillText('80%', canvas.width / 2, canvas.height / 2);\n                startAngle = endAngle;\n            }\n        }\n    }\n    circular_obj = new circular_gauge(0, 100, canvas);\n    circular_obj.circle(canvas.width/2, canvas.height/2, 45, ...data);\n}\n\nself.onDataUpdated = function() {\n    \n    \n}\n\nself.onResize = function() {\n        \n}\n\nself.onDestroy = function() {\n}",
      "settingsSchema" : "",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"Active_device_status\"}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214591993,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b2eee90-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "admin_sidebar",
    "name" : "Admin Sidebar",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 7.5,
      "sizeY" : 3,
      "resources" : [ ],
      "templateHtml" : "<div fxLayout=\"column\" fxLayoutAlign=\"space-between\" fxFill>\r\n    <div>\r\n        <div id=\"profile\" fxLayout=\"column\"  fxLayoutAlign=\"start center\">\r\n            <img class=\"profileIcon\" *ngIf=\"ctx.widgetConfig.settings.icon\" [src]=ctx.sanitizer.bypassSecurityTrustResourceUrl(ctx.widgetConfig.settings.icon) />\r\n            <!--show username-->\r\n            <div class=\"userName\">{{ctx.firstName}} {{ctx.lastName}}</div> \r\n            <!--show userrole-->\r\n            <div class=\"userRole\">{{ctx.userRole}}</div>\r\n        </div>\r\n\r\n            <!--list of menus-->\r\n        <div fxLayout=\"column\" fxLayoutAlign=\"start start\"\r\n            style=\"width:100%\">\r\n            <ng-container\r\n                *ngFor=\"let _item of ctx.widgetConfig.settings.menuItems\">\r\n                <ng-container\r\n                    *ngTemplateOutlet=\"menuItem;context:{item: _item}\">\r\n                </ng-container>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n    <!--bottom button to change tbview or NP view-->\r\n    <div class=\"tbViewMenu\" \r\n        (click)=\"viewChangeClicked($event,item)\" *ngIf=\"ctx.isFullScreen!==undefined && ctx.widgetConfig.settings.showViewChange\">\r\n        <span>{{ctx.isFullScreen==true?\"TB View\":\"NP View\"}}</span>\r\n    </div>\r\n\r\n</div>\r\n\r\n<!--template for menu design-->\r\n<ng-template #menuItem let-item=\"item\">\r\n    <span class=\"menuItem\"\r\n        [ngClass]=\"{'activeMenuItem':( (ctx.lastClickedItem==undefined && ctx.widgetConfig.settings.defaultMenu==item.name ) || ctx.lastClickedItem==item.name )}\"\r\n        (click)=\"menuClicked($event,item)\">{{item.name}}</span>\r\n</ng-template>",
      "templateCss" : "\n#profile{\n    width: 100%;\n    padding: 40px 0;\n    margin: 0;\n}\n.profileIcon{\n    margin-bottom: 16px ;\n    height: 56px;\n    width: 56px;\n}\n.userName{\n    font-family: 'Roboto';\n    font-style: normal;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n    text-align: center;\n    color: #FFFFFF;\n}\n.userRole{\n    font-family: 'Roboto';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 14px;\n    line-height: 16px;\n    text-align: center;\n    color: #FFFFFF;\n}\n#container {\n    overflow: auto; \n    background: #1B4383;    \n} \n.menuItem{\n    width: 100%;\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    text-transform: capitalize;\n    padding: 30px 0 31px 69px;\n    color: #FFFFFF;\n    opacity: 0.6;\n    cursor: pointer;\n} \n.menuItem:hover,.activeMenuItem{\n    font-weight: 600;\n    opacity: 1;\n    border-left: 4px solid #ffffff;\n    padding-left: 65px;\n    background: rgba(0, 0, 0, 0.1);\n\n}\n.tbViewMenu{\n    display: inline-block;\n    opacity: 1;\n    color: #FFFFFF;\n    width: calc(100% - 20px);\n    min-height: 56px;\n    background: #1B4383;    \n    background: rgba(0, 0, 0, 0.1);\n    margin:10px;\n    \n    display: table;\n\n}\n.tbViewMenu span{\n    padding-left: 59px;\n\n      vertical-align:middle;\n  display: table-cell;\n    \n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    text-transform: capitalize;\n    color: #FFFFFF;\n    flex: none;\n    order: 1;\n    flex-grow: 0;\n    cursor: pointer;\n    \n}\n.tbViewMenu:hover span{\n     /*border: 1px solid #ffffff;*/\n     font-weight: 600;\n}\n\n\n\n\n*{\n    caret-color: transparent;\n    -ms-overflow-style: none;  \n    scrollbar-width: none;  \n}\n\n::-webkit-scrollbar { \n    display: none;  \n}\n",
      "controllerScript" : "self.onInit = function() {\n\n    const $injector = self.ctx.$scope.$injector;\n    const broadcastService = $injector.get(self.ctx.servicesMap.get('broadcastService'));\n    self.ctx.subHandle=broadcastService.on(self.ctx.settings.menuChangeSubTopic, (evt, msg) => {\n        console.log(evt,msg[0])\n        self.ctx.$scope.menuClicked(undefined,msg[0])\n    });\n\n    self.ctx.isFullScreen=undefined;\n    \n    if(self.ctx.stateController!=undefined && self.ctx.stateController\n        .getStateParams()['currentPage']!=undefined){\n            \n    self.ctx.lastClickedItem=self.ctx.stateController\n        .getStateParams()['currentPage']\n        }\n        else{\n    self.ctx.lastClickedItem=self.ctx.widgetConfig.settings.defaultMenu\n            \n        }\n    \n    // set menu as active page and call menuClicked action\n    self.ctx.$scope.menuClicked=function(evt,menu){\n        if(evt){\n            evt.stopPropagation()\n            \n        }\n        console.log(menu)\n            \n            self.ctx.lastClickedItem=menu.name\n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'menuClicked');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[0], {\n                        \"id\": menu.name,\n                        \"entityType\": \"Menu\"\n                    },\n                    menu.name,\n                    menu);\n            }\n\n    }\n    \n    // humburgClicked action for mobile view\n    self.ctx.$scope.humburgClicked=function(evt){\n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'humBurgClicked');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[0],undefined,\n                    undefined,\n                    undefined);\n            }\n\n    }\n    \n    // view changed action from NP to TB or TB to NP\n    self.ctx.$scope.viewChangeClicked=function(evt,menu){\n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'viewChangeClicked');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[0],undefined,\n                    undefined,\n                    undefined);\n            }\n\n    }\n    \n    //fetch user info and set user role\n    self.ctx.http.get(\"/api/entityGroups/USER/\"+self.ctx.currentUser.userId).subscribe(function(groupIds){   \n        var test=groupIds.map(e=>e.id)\n        self.ctx.entityGroupService.getEntityGroupsByIds(test).subscribe(function(userGroups){\n            var groupName=userGroups.find(e=>e.name!='ALL')\n            self.ctx.userRole=groupName.name\n            self.ctx.detectChanges();\n        })\n    }) \n    // get first name\n    var firstName=self.ctx.data.find(e=>e.dataKey.name==\"firstName\")\n    // show last name\n    var lastName=self.ctx.data.find(e=>e.dataKey.name==\"lastName\")\n\n    if(firstName){\n        self.ctx.firstName=firstName.data[0][1]\n    }\n    if(lastName){\n        self.ctx.lastName=lastName.data[0][1]\n    }\n\n     var additionalInfo=self.ctx.data.find(e=>e.dataKey.name==\"additionalInfo\")\n     // check if its TB view or NP view by checking its full screen or not\n     if(additionalInfo!==undefined){\n        self.ctx.isFullScreen=JSON.parse(additionalInfo.data[0][1]).defaultDashboardFullscreen;\n        //  self.ctx.detectChanges();\n     }\n\n    // self.ctx.isFullScreen=JSON.parse(additionalInfo).defaultDashboardFullscreen\n}\n\nself.onDataUpdated = function() {\n\n}\n\nself.onResize = function() {}\n\nself.onDestroy = function() {\n                self.ctx.subHandle.unsubscribe();\n\n}\n\nself.actionSources = function() {\n    return {\n        'menuClicked': {\n            name: 'Menu Clicked',\n            multiple: false\n        },\n        'humBurgClicked': {\n            name: 'Humburg Clicked',\n            multiple: false\n        },\n        'viewChangeClicked': {\n            name: 'View Change Clicked',\n            multiple: false\n        }\n\n    };\n}\n",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"Setting\",\r\n        \"properties\": {\r\n            \"icon\": {\r\n                \"title\": \"Logo\",\r\n                \"type\": \"string\"\r\n\r\n            },\r\n            \"menuChangeSubTopic\":{\r\n                \"title\": \"Topic for menu Change Subscription\",\r\n                \"type\": \"string\"\r\n                \r\n            },\r\n            \"defaultMenu\": {\r\n                \"title\": \"Default Menu Name\",\r\n                \"type\": \"string\"\r\n\r\n            },\r\n            \"menuItems\": {\r\n                \"type\": \"array\",\r\n                \"title\": \"Menu Items\",\r\n                \"items\": {\r\n                    \"type\": \"object\",\r\n                    \"properties\": {\r\n                        \"name\": {\r\n                            \"title\": \"Name\",\r\n                            \"type\": \"string\"\r\n\r\n                        }\r\n                }\r\n                }\r\n\r\n            },\r\n            \"showViewChange\":{\r\n                \"type\": \"boolean\"\r\n                \r\n            }\r\n\r\n        }\r\n    },\r\n    \"form\": [\r\n        {\r\n            \"key\": \"icon\",\r\n            \"type\": \"image\"\r\n        },\r\n        \"menuChangeSubTopic\",\r\n        \"defaultMenu\",\r\n        {\r\n            \"key\": \"menuItems\",\r\n            \"add\": \"New\",\r\n            \"style\": {\r\n                \"add\": \"btn-success\"\r\n            },\r\n            \"items\": [\r\n\r\n                {\r\n                    \"key\": \"menuItems[].name\",\r\n                    \"type\": \"text\"\r\n\r\n                }\r\n\r\n            ]\r\n        },\r\n        {\r\n            \"key\":\"showViewChange\",\r\n            \"default\": true            \r\n        }\r\n    ]\r\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{\"icon\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABBKSURBVHgBzVoJjF3XWf7OvW+dffMSL+OZeI0TJ26dljjUZEahODSAXRACKqSmEAEFpDgItaiKageCqEDCNkKqoKnigAoICcUNUt20MXbS4oSaNJO6duJ4PPNm39+8mXnrfXfh+8+9bxY8jue9mS6/decuvu/e851/+/7/XIU1Fq/37QaE0vthqv1Q5gPwZO81wEPbkhsVEvybgFIpuPZrcLwutfXQRayxKKyBaFCRXAcM9RQ8bz8f24CKxEvBMC7Cdr6utvzsGayBrAqgBhbLC6hjlYO6rSSo9Yuw8KxqP5hAhVIRwB8xsFtF4QTyeLESoGUD9PovHUUIL/xYgC2VBFz32XJNd8UAtdaiheM8OoafqHinUIjTbD+UWsndKwLojbzRBle9xGi4Hz8dkkABnSsx2TsC1OA8XOBhG9ZKlBc8fEVDuJ2sCOQHPn2twVlWEanZGeTSeUSiUTS1NCISDq0mlN8R5G2fXTE4asV2PFy5chU3u/swPDSK8ZFxZOcymEunYReLKBQdZPMWCraDDZtasPe+XTh65DHsuLuVqbRsuB8Ictmn+QEl/zbKBCcWd+XKDbz+3f9BOp1FKjWLqckkcpk8HGrPdiwUuc9bBFd0UXQc/SPX80hoPBw9ehh/+NlPozoeRlniqS5Y0c7lAo+x7A90tCxfc4m+IZx/7U3E6+pQu64ZjqGQJaCMVUCuaPGYm12EZbuwPReevN3kIGSj5l4++y2cPvUVOHAROOjKRIJfNHd8uf+6BaA3+N9PVJIKPNrC+f+6xGEpFIs2ppMzmEllkKcpWgVuNE3HdZnKXL33CFARlL8ZZGgGuMM3v3URl7/3Aw66XFNVx3SO/iCA2u8M4zgqkMGRUQyPTqBo28hkc5iZSSObzWqT1MBohq7DPf3TD55Ka02AGdQ0AqAyU6+8cpETgPIlpE5q97odQJ5+GhVGzOvXe2DT9KxigcDy3HKMmhYcx4bneiwWCEzUTA17gXJUCSCBqeBcttdff1M/owJpQyS7xPrmAfpR0z2BsoUD56Cuv9fLaEHTo5aKBGbT19zbqGGx8QkgBBr0gnMaAa5efQ++H5apSmU+tViLizVYgWnKoDxMTiQxPDyuj8W3HNem5hzOl+uPTzCIjwUaEn2pwMdK1wSktwj51WvdqMRK+cKGxVpcAOihA2WLp/1meGgC0KHeH6ynzTE4N5T2MeLz94Hvyb95VepDH7ieEe6uXbtRQaApPW9BixqgHzkrZCsE0pfoQ5ixPsTNNLlxhGFuIQIyzWCvSiANH6SfAP2JCMCFqELFzeB/db/fSwtgnpQ8Uv6gqMW5DjkK6XPDPIKKDELpaDcyMqaplxkJczPpQx5CoTC3EKlYGLa+j+aq04ENMx5HxAgjHDK0+4mmLLKaPANUviB500EymcK1d7tx3949qEhU+Cn+PesDhNtRCellbCRjKSAejaCluY7PNBGOxlBdY6GaHNNprIGiP1ZFIthYX4fmmmrECTqfSTNHzmJ6No25fB4Z5k2JwMJsHE/2LsZI7c6/egkO82ckEkVtbS2amllnx6LacpU/gIC4L8dX1H4xU+UNvNFBK7iACkQbV7iJvCPO5zG4KAkzDDD2LIpTY3CZC+2ZDNKpOSSnUxgYHsHg0DhGppMYJ+lO50uUTabK00FJtC1jNnTIMql5x/dMYT40l+rqarS3bcbee3eis/MhtN19N83fw7KJ07E7lTd8SdoOJxcGzeuO6zMPx0/QpQASCUcQpglqQqyDiY2ix/N4g57FqclpDPfcxEBvNwZ7+tFzk2R7dBzTkvSZOopCtOlWDn1LMxpJ/vJ8HWzl3IHh+tDcwGX81OFHW9OgydPHIyETUY4lxP329s34xOOd+NVPPs5xcTIM4bEOfK16TxPgmy/x4GjpYe9dvYGp8WmYMfqO6/mMQ6IDByIspcj8FqaZ1XImc0zmvYl+vNvdg0RiCBPjSZosqwZeFzPz5oEIRfO0OUnSRxBYQgYCH9TxhpflPY4+JlQ/1QQTLxlHj0fg87aI4YOsjoZRW1WN3bu24Lm/+Dy2bt4YpCB5IM4oJvgLpRQhP5+aSuLVb38H3T3DGOexkGUBKTTLJivJ5QtIzcwRzBRmZuc0YJ9HehySqU2U1qq15DGoxHk9xkATNTn7EQ6MqCIhia4hnUXzjsJUKqvfEedgWxpiHLiJ4ck0rg2mNHgJRhJdpQwTki5U3AxihskZqopwwuNR3LtnO776/N+gvibuzxrYayXA3qVNWUFucBYVB1nEDZpab/8IgU9hLpPTgOyip0345s1eTsQA3u/uRVXIQ0M8wtmMIM5oGjENjM7msa4+jqqwCtLbQq6U90u1NDFTwLqmKhATcjnez0By5Jc/jnPfeBUvf38QI8kMwtS8pJoFXrMQELXpcovyfbVVMTz/5efwyMceLN2TCN3ScdZZ1/XZE83gnl3t2Ltr26L/48D4lq+/fB7Xr72PHdt34IdkHeurY9jSHEd1LMYX+rfW1zCyio9plsKQIbYV+JOefe7ra2LkyKJtE3WsA2vjiu9rw1vfCePeDdXYXBvGdMHFwPicpoTGvGf65ECbr1QwvNTYUo9d/K2OUj4tagthWVH/b56Mee26DAJf/srX8Pw/vsCOu4ehZI4j9RiAaH78E6O5GKXfio9pnhYwFRUMKdgv0NDIfD6UIKJ9vKoK+1obOZkGYlEDP+ifxYVrI5x7d35gnrYIMVMXHQcfxN/97RexYV0jFnO+2wBcXiQ0JCfHkEy8i/b1tUilLUzO5SDeFxbHp5mEeZBjS+Ktm1M4uHMDWZO7MNv0u6jpLWZoWiuXe1NoXV+DrQ1hcg5/MqsY5O5qrqefZ7C5bRPa2Nq40p9EcjY7T8pronH8fOdH8Qe/+yk89JG9AdVbKmUBlCFlZ6aQHR3Q5mQzh4mDhyVoaKomQBVGs0WM5hWmMwUOxKEf5TCeSmPftmbc37aO6YnR2PHB2XTEayOziMdMbGuMQty1kM0EdaKQLIWZ6Vns270THzuQRu3GVuzduQ379u7Eg/v3oCoe+0DKGtKrPN5KeaiH2sYW0jHSMtPS0U4CSOvGBpo9/VbMi760sa4Gu5oKNNcwhiZncX1ojtpltCML2bblLoyMTcDJFrQpKVK6A6312NJYHVQZJlLJJAqWrRtTkhkKjNzXbnTj5F9/AS0bN/omKJu6I71MMKt6K+oQA75JNTS14P6HDzGi5nWeqo+H0FIXRUNNlTZTmfG6GPDQ9ibU03caaquxkaG/hiYnzOVmYoCpxtJApBIRav4z7U3YWBPSwULUMcLSy6KKx5NzbFAVdapqf+DDaN4QgMOKwGmAEkXf4f0r7liL7f/ap34Tsdp6vH35LXLEOhTT02QviVLppwcuuc7gILY112BDXRzJjIU4E/NQktyVZl1fHdFcVsTRGqFvMneGQjEMDgzCo2brtm5HHXPa3gf24fAnfnG+tlx5YeDN3ELVVvQzFbQfOChpN3z3wnmcffGfGVxsREMSBU2d84am0iTNNnqnZjGScZkCwqwWClIzoa02ih0MVG3cDEOzDoQYYKqYsDk3aN1zH379s79P6qYq6ZWWRvo0KT97imWWXMIqSuFeRnbPvn34BpNsjoHEYpI0TT/8bxLtNSlsW1/FvqiDKAOC9GkkjorJRsWmpSHlBA8mQJuTZPHwngMPavNVaqXaWkYcp4tPzHfpldVVSHPLOhw4eJBjtXVdJ51rx/W1LNS5nuymuSaCRubNDWYYzdWsFU2f/rklwg2/AWwxwjZtacX9H/0IKmutlUSlZEncUO2dQvi6sEp59FeOoKqxGdmchQyjXo4as13H74E6UkqRisU8ZKOe1rJUKkKehV+KD8omhXKO1clvPfmkH1GxGnFfk78B8/FOY5VS31CPPz3+DEunaiSZ/FPMgTPMh9mCzUqdNR87ZZL7igRh68og2AhM6sGCbMylf/RnX8D6dRtWqT3Bp87Kzo9JvRe4FhHtXfWqLZ82yg7bc8f/HBMsbg1qSHipsBO/F+MFNM0IbvfTgsV0s2PPLjzxe0+itXXL6sExPahNB9uDIfniDb1xgmfHsVpRYn4ezp+/iG+f+yYG+/rhFV39KhXwTaX8ZlOU2r7/wH480nEIBw58GKu0yQWROnDzwc/o4cxfWyst+oWmrgUFzCv/eQ5f+tJJEuYoi1SpAw2+hpX43dvwC48/jkOPdug1CeWtFTpKAe2l5bT5bo0ONp5atS8G9ZDOgyzfUUswOzY1obk2hrraKvZUYqRwbCJVxZFh80lXGGsJznOXfHaytB1l5U8BSGDNhG2OQhp1BCX9UiEIrifRVXo+XKThgqgu/9dOErCMM4svLAHoa9F7GmsgLsH0DQ0i0dOrfU6Zhm4zmNIblcYG/TLRP4werimuPqaUXnrrR0PLr/AOXjqlP8uqUKQMunr1HQxNTGKkL4HB/iFMTs4gk8uhQKomRNohXFnCls73c1/8HPspFTZ4S+J6p9WWh29Z11y+HiwWTjASPCLNU5QlMl/SQXPwvcv/i+GxSeSYB2fnsphjxzovfQUjArOKNSTTRpTmKtTtctcPsXv3bnLQVXxxUYyfuN2IlpWyP0JQ8vFBAUkWxMPDw3jv3ffxfQ48MTCm+6IWmY2USCF22MKmv9Iklll02H+lua7nkveRX3oMhx89hOaGsgJ5+R8hlAdS+p6ipSQmxtjkTU0jlUrxnO35mVm9EJpm7Zhiq2E2nWNgyVGT0plzdDXvL2t7uosnIkX07/z2b+Cxwx/X/R21CnB3BHgnkNJ/zmRSmEqOayDZTJbL12z8ElyGx+lMxr+eK+jq3C7kuV7P6EmA8s1MwSIfpR8WNVhPtzKEpNuMOtu2bMIznzuGrXdtmO/ClQtOxMAdRN3FByh0YnH64PuKxRxNsQejY1Kh53TXW7fkdSvB0G1ASBtdhWS9jlRN0gSrdt27CbGaYO9UFmukEcx9hKVTJBLSHwbFeG2YVO9PPv8Mzr36WrD6uwikfDaywk+57ghwHmQh/yGJVPKeXGYWfX03dKJ2WZDKyphe9Fz6Kx3+dZNeLbxGqYUvuHTLgvmxxFWF5ch6gyy7yV5y5d//w1fxtX9/acHWZAz6m5iVfVq54q6aX1bhmN3/eldP4vpxKcoVNaE/MBDzkr3+RET20H5VAu3d0mLwV3h9y1O6K6Cr+iUNRdMHze3f/uOsdM9Sn3zs8GdU68NnUYasSIOLJdT6c2foM52s354VDcl6vKxZWLoVKGWR65dEjr/cJUtipQWXBbBB4wjBGn3wKYkxv1e6eeWfmymeP/tP//Jie7ng9POxCnn73Mk2Np5PkJU8wu5XW55BJJ8rco0hp4OL7PNc4MznC7oXY1n+6pQlwUUiqGMvaN/xPw7SEVW07yLF8vG0beHU2YtdFXcc1ozlnv/Xv3wiX7SO5DLZDq5ANeQ0sLxeUBH2UtSR09ZfQUlbw3H8zQ3M2tVm7aSo6C5eP825ubgaYCVZQxq/IC/81R935IrZ/YV8npotNFgFq61gWW06Hdi2/laNYBLUWorm28U8+o7rhtg2iXWdOXtx1aAWy/8BvJxkm/yW8roAAAAASUVORK5CYII=\"},\"title\":\"Admin Sidebar\",\"showTitleIcon\":false,\"titleTooltip\":\"\",\"dropShadow\":false,\"enableFullscreen\":false,\"enableDataExport\":false,\"widgetStyle\":{},\"widgetCss\":\"\",\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"noDataDisplayMessage\":\"\",\"showLegend\":false,\"actions\":{\"humBurgClicked\":[{\"name\":\"humburg clicked\",\"icon\":\"more_horiz\",\"useShowWidgetActionFunction\":null,\"showWidgetActionFunction\":\"return true;\",\"type\":\"custom\",\"customFunction\":\"var test=widgetContext.$container.find(\\\"#menu_bar_widget\\\")\\nconsole.log(test)\\ntest.css(\\\"display\\\",\\\"none\\\");\\nvar test=widgetContext.$container.find(\\\"#menuCloseButton\\\")\\ntest.css(\\\"display\\\",\\\"none\\\");\\nconsole.log(test)\\n\\n\",\"openInSeparateDialog\":false,\"openInPopover\":false,\"id\":\"f9d5fae6-e5ee-cec8-1a85-d6d3ef4fd7d4\"}]}}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214591795,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b10b830-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "alert_device_status",
    "name" : "alert_device_status",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 7.5,
      "sizeY" : 3,
      "resources" : [ ],
      "templateHtml" : "<div id=\"card\"  fxLayout=\"column\">\n    <div fxLayoutAlign=\"flex-start center\">\n        <div fxLayout=\"row\" fxLayoutAlign=\"center center\" >\n            <div id=\"gauge3\">\n                <canvas id=\"canvas-circle3\"></canvas>\n            </div>\n            <div class=\"gauge-values\">\n                <div class=\"label\">\n                    <div class=\"status-label\">\n                        Alerts\n                    </div>\n                    <div class=\"status-value\">\n                        10000\n                    </div>\n                    <div class=\"status-info\">\n                        <div class=\"status-info-active\">active</div>\n                        <div class=\"status-info-inactive\" style=\"color:#FFC164;border-right:1px solid grey;padding-right:16px;\">warning</div>\n                        <div class=\"status-info-inactive\">critical</div>\n                    </div>\n                </div>\n            </div>        \n        </div>\n    </div>\n</div>    ",
      "templateCss" : "*{\n    padding: 0;\n    margin:0;\n    box-sizing: border-box;\n}\n\n#container{\n    width:100%;\n    height:100%;\n}\n\n#canvas-circle3{\n    max-width: 100%;\n}\n\n#gauge3{\n    width:104px;\n    height:104px;\n}\n\n.gauge-values{\n    display: flex;\n    flex-wrap: wrap;\n}\n.label{\n    padding-left:16px;\n}\n\n\n.status-info {\n    display: flex;\n    align-items: center;\n    align-content: center;\n}\n\n.status-value {\n    font-family: \"Inter\";\n    font-size: 32px;\n    font-weight: 700;\n    margin-bottom: 4px;\n}\n.status-info-active{\n    padding-right:16px;\n    border-right:1px solid #696969;\n    text-transform: capitalize;\n    font-size:16px;\n    color:#0EC23E;\n}\n.status-info-inactive{\n    padding-left:16px;\n    font-size :16px;\n    text-transform: capitalize;\n    color:#E93800;\n}\n.status-label {\n    font-family: \"Inter\";\n    font-weight: 400;\n    font-style: normal;\n    font-size: 16px;\n    color: #696969;\n    text-transform: capitalize;\n    margin-bottom: 4px;\n\n}",
      "controllerScript" : "\nself.onInit = function() {\n    var canvas = document.getElementById(\"canvas-circle3\");\n    var ctx = canvas.getContext(\"2d\");\n    var gauge3 = document.getElementById(\"gauge3\");\n    canvas.width = gauge3.clientWidth;\n    canvas.height = gauge3.clientHeight;\n    const material_font = new FontFace('material-icons',\n        'url(https://cdnjs.cloudflare.com/ajax/libs/material-design-icons/4.0.0/font/MaterialIcons-Regular.ttf)');\ndocument.fonts.add(material_font);\n\n    \n    var data = [\n        { \"value\": 5000, \"color\": \"#FFC164\" },\n        { \"value\": 5000, \"color\": \"#E93800\" },\n    ]\n    class circular_gauge {\n        constructor(min, max, ctx) {\n            this.min = min;\n            this.max = max;\n            this.ctx = ctx;\n        }\n            circle(x, y, r, ...data) {\n            // var PI = Math.PI;\n               \n\n            var startAngle = -Math.PI / 2;\n            for (var i = 0; i < data.length; i++) {\n                var endAngle = startAngle + (2 * Math.PI * data[i].value / this.max * 100 / 100)\n                ctx.beginPath();\n                ctx.arc(x, y, r, startAngle, endAngle);\n                console.log(\"start  :\" + [i] + startAngle, \" end  : \" + [i] + \"  \" + endAngle);\n                ctx.strokeStyle = data[i].color;\n                ctx.lineWidth = 7;\n                ctx.stroke();\n                material_font.load().then(() => {\n                ctx.fillStyle = '#E93800';\n                ctx.font = '40px material-icons';\n                ctx.fillText('notifications', canvas.width/2-20, canvas.height/2+20);\n    }).catch(console.error);\n    \n                startAngle = endAngle;\n            }\n        }\n    }\n    circular_obj = new circular_gauge(0, 10000, canvas);\n    circular_obj.circle(canvas.width/2, canvas.height/2, 45, ...data);\n}\n\nself.onDataUpdated = function() {\n    \n    \n}\n\nself.onResize = function() {\n        \n}\n\nself.onDestroy = function() {\n}",
      "settingsSchema" : "{}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"alert_device_status\"}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214592008,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b313880-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "componentwidget",
    "name" : "ShipComponentWidget",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 7.5,
      "sizeY" : 3,
      "resources" : [ {
        "url" : "static/thingsboard-extension-widgets.js",
        "isModule" : true
      } ],
      "templateHtml" : "<div class=\"ntContainer\">\n\n    <ng-container *ngIf=\"ctx.datasources.length<=0\">\n        <div style=\"height:40px;width:100%; padding:  0 0 0 16px;  display: flex;align-items: center;\" class=\"noComponent\">\n            No Equipments\n        </div>\n    </ng-container>    \n\n\n<ng-container *ngFor=\"let item of ctx.datasources; let j=index \">\n    <div fxLayout=\"row\" fxLayoutAlign=\"space-between center\" class=\"shipContainer\">\n        <span class=\"nameTitle\" *ngIf=\"ctx.npNameToNormal!==undefined\">\n            <!--C{{(j+1)+\". \"+ctx.getEntitySubType(item.entityId)+\": \"+ctx.npNameToNormal(item.name)+((item.entityLabel==undefined || item.entityLabel=='')?'':\" (\"+item.entityLabel+\")\") }}-->\n            E{{(j+1)+\". \"+ctx.getEntitySubType(item.entityId)+\": \"+ctx.npNameToNormal(item.name) }}\n\n        </span>\n        <span *ngIf=\"ctx.widget.config.actions!==undefined\" fxLayout=\"row\" fxLayoutGap=\"20px\" class=\"actions\">\n            <ng-container *ngFor=\"let action of ctx.widget.config.actions.actionButton ; let i = index\"  >\n              <!--<mat-icon (click)=\"actionClicked($event,i,item)\">{{action.icon}}</mat-icon>-->\n            <button mat-button mat-icon-button matTooltip=\"{{action.name}}\" matTooltipPosition=\"above\">\n              <img *ngIf=\"ctx.customActionIcons!==undefined && ctx.customActionIcons[action.name]!=undefined\"\n                      [src]=\"ctx.customActionIcons[action.name]\" alt=\"\" (click)=\"actionClicked($event,i,item)\" >\n                <mat-icon (click)=\"actionClicked($event,i,item)\" *ngIf=\"ctx.customActionIcons==undefined ||  ctx.customActionIcons[action.name]==undefined\"\n                >{{action.icon}}\n                </mat-icon >\n\n            </button>\n            </ng-container>\n\n        </span>\n\n    </div>\n    <div style=\"padding:0 0 0 20px \"   *ngIf=\"ctx.settings.stateName!==undefined && ctx.settings.stateName!==''\" >\n        <nt-dashboard-state style=\"width:100%;height:10px;background-color:red\"  [defaultAutofillLayout]=\"true\" [entityId]=\"item.entity.id\"  [ctx]=\"ctx\" [syncParentStateParams]=\"false\" stateId=\"{{ctx.settings.stateName}}\"></nt-dashboard-state>\n    </div>\n\n\n  <!--<mat-expansion-panel [expanded]=\"componentOpenState!==undefined && componentOpenState[item.entityId]\" hideToggle>-->\n  <!--  <mat-expansion-panel-header>-->\n  <!--  <div fxLayout=\"row\" fxLayoutAlign=\"space-between center\">-->\n  <!--      <span>-->\n  <!--          {{item.name}} -->\n  <!--      </span>-->\n  <!--      <span *ngIf=\"ctx.widget.config.actions!==undefined\">-->\n  <!--          <ng-container *ngFor=\"let action of ctx.widget.config.actions.actionButton; let i = index\">-->\n  <!--            <mat-icon (click)=\"actionClicked($event,i,item)\">{{action.icon}}</mat-icon>-->\n  <!--          </ng-container>-->\n  <!--      </span>-->\n\n  <!--  </div>-->\n  <!--  </mat-expansion-panel-header>-->\n  <!--  <div style=\"padding:0 0 0 20px \"   *ngIf=\"ctx.settings.stateName!==undefined && ctx.settings.stateName!==''\" >-->\n  <!--      <nt-dashboard-state style=\"width:100%;height:10px;background-color:red\"  [defaultAutofillLayout]=\"true\" [entityId]=\"item.entity.id\"  [ctx]=\"ctx\" [syncParentStateParams]=\"false\" stateId=\"{{ctx.settings.stateName}}\"></nt-dashboard-state>-->\n  <!--  </div>-->\n  <!--</mat-expansion-panel>-->\n\n</ng-container> \n</div>",
      "templateCss" : "\n#container {\n    overflow: auto;\n    width: 100%;\n    background: #F2F6FC;\n    padding: 0;\n}\n.noComponent{\n        \nfont-family: 'Inter';\nfont-style: normal;\nfont-weight: 400;\nfont-size: 16px;\nline-height: 19px;\ntext-transform: capitalize;\n\n/* Grey 1 */\n\ncolor: #696969;\n}\n.shipContainer{\n    padding: 10px  0 5px 16px ;\n}\n.nameTitle{\n    font-family: 'Inter';\nfont-style: normal;\nfont-weight: 500;\nfont-size: 16px;\nline-height: 19px;\ntext-transform: capitalize;\n\n/* Black */\n\ncolor: #000000;\n}\n.actions{\n    padding-right: 20px ;\n}\n\n.mat-button.mat-icon-button{\n    margin-right: 0 !important;\n}",
      "controllerScript" : "self.onInit = function() {\n    \n    self.ctx.getEntitySubType=function(id){\n        var type=self.ctx.data.find(function(e){\n            return e.datasource.entityId==id && e.dataKey.name==\"type\"\n        }) \n        if(type){\n            return type.data[0][1]\n        }\n        return \"\"\n    }\n    self.ctx.npNameToNormal=function(value){ \n        const regexExp = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/gi;\n        var underScoreSperated=value.split(\"_\")\n\n        if(underScoreSperated.length>1){\n            if(regexExp.test(underScoreSperated[0])==true){\n                return value.replace(underScoreSperated[0]+\"_\",\"\")\n            }\n        }\n        return value\n\n    }\n\n    self.ctx.customActionIcons={};\n    if (self.ctx.widgetConfig.settings[\"actionIcons\"] != undefined && this.ctx.widgetConfig.settings[\"actionIcons\"].length >= 1) {\n      self.ctx.widgetConfig.settings[\"actionIcons\"].forEach(e => self.ctx.customActionIcons[e.name] = e.icon);\n    }\n\n    // if(self.ctx.$scope.componentOpenState==undefined){\n    //     self.ctx.$scope.componentOpenState=true;\n    // }\n    // self.ctx.detectChanges();\n    // console.log(self.ctx.widget.config.actions.actionButton)\n    self.ctx.$scope.actionClicked=function($event,i,item){\n            $event.stopPropagation();\n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'actionButton');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[i], item.entity.id,\n                    item.entity.name,\n                    item);\n            }\n\n        \n    }\n    // self.ctx.reloadWidget=function(){\n    //     self.onResize();\n    // }\n    // self.ctx.detectChanges();\n     \n\n}\n\nself.onDataUpdated = function() {\n\n\n}\n\nself.onResize = function() { \n    // var container=$(self.ctx.$container).find(\".ntContainer\")\n    // var stateContainer=$(self.ctx.$container).closest('tb-dashboard-state')\n    // stateContainer.height(container.height())\n    // // console.log(container.height())\n    if(self.ctx.datasources.length<=0){\n    var stateContainer=$(self.ctx.$container).closest('nt-dashboard-state')\n    var container=$(self.ctx.$container).find(\".ntContainer\")\n    container.height(40)\n    stateContainer.height(40)\n    }\n    else{\n    var container=$(self.ctx.$container).find(\".ntContainer\")\n    var stateContainer=$(self.ctx.$container).closest('nt-dashboard-state')\n    stateContainer.height(container.height())\n        \n    }\n    // self.ctx.detectChanges();\n    // var container=$(self.ctx.$container).find(\".ntContainer\")\n    // var stateContainer=$(self.ctx.$container).closest('nt-dashboard-state')\n    // stateContainer.height(container.height())\n\n    // if(self.ctx.parentDashboard && self.ctx.parentDashboard.dashboardWidgets){\n    //     // console.log(self.ctx.parentDashboard.dashboardWidgets)\n    //     var widgetId=self.ctx.parentDashboard.dashboardWidgets.dashboardWidgets[0].widgetId\n    //     var widget=self.ctx.parentDashboard.dashboardWidgets.findWidgetById(widgetId)\n    //     // console.log(widgetId,widget)\n    //     widget.widgetContext.detectChanges()\n    // }\n    \n    // console.log(\"ship resize\")\n\n}\nself.typeParameters=function(){\n    return {\n        maxDatasources: -1, // Maximum allowed datasources for this widget, -1 - unlimited\n        maxDataKeys: -1, //Maximum allowed data keys for this widget, -1 - unlimited\n        dataKeysOptional: true, //Whether this widget can be configured with datasources without data keys\n        datasourcesOptional: true\n    }\n}\nself.actionSources = function() {\n    return {\n        'actionButton': {\n            name: 'Action Button',\n            multiple: true\n        }\n    };\n}\nself.onDestroy = function() {\n}\n\n\n",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"EntitiesTableSettings\",\r\n        \"properties\": {\r\n            \"stateName\": {\r\n                \"title\": \"Device State name\",\r\n                \"type\": \"string\"\r\n\r\n            },\r\n            \"actionIcons\": {\r\n                \"type\": \"array\",\r\n                \"title\": \"Action Icons\",\r\n                \"items\": {\r\n                    \"type\": \"object\",\r\n                    \"properties\": {\r\n                        \"name\": {\r\n                            \"title\": \"Name\",\r\n                            \"type\": \"string\"\r\n\r\n                        },\r\n                        \"icon\": {\r\n                            \"title\": \"Name\",\r\n                            \"type\": \"string\"\r\n\r\n                        }\r\n                }\r\n                }\r\n\r\n            }\r\n        },\r\n        \"required\": []\r\n    },\r\n    \"form\": [\r\n        {\r\n            \"key\": \"actionIcons\",\r\n            \"add\": \"New\",\r\n            \"style\": {\r\n                \"add\": \"btn-success\"\r\n            },\r\n            \"items\": [\r\n                {\r\n                    \"key\": \"actionIcons[].name\",\r\n                    \"type\": \"text\"\r\n                },\r\n                {\r\n                    \"key\": \"actionIcons[].icon\",\r\n                    \"type\": \"image\"\r\n                }\r\n\r\n            ]\r\n        },\r\n        \"stateName\"\r\n    ]\r\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"enableSearch\":true,\"enableSelectColumnDisplay\":true,\"enableStickyHeader\":true,\"enableStickyAction\":true,\"reserveSpaceForHiddenAction\":\"true\",\"displayEntityName\":true,\"displayEntityLabel\":false,\"displayEntityType\":true,\"displayPagination\":true,\"defaultPageSize\":10,\"defaultSortOrder\":\"entityName\",\"useRowStyleFunction\":false},\"title\":\"ShipComponentWidget\",\"actions\":{\"actionButton\":[{\"name\":\"Test\",\"icon\":\"more_horiz\",\"useShowWidgetActionFunction\":null,\"showWidgetActionFunction\":\"return true;\",\"type\":\"custom\",\"customFunction\":\"console.log(\\\"Test button clicked\\\")\",\"openInSeparateDialog\":false,\"openInPopover\":false,\"id\":\"cdecb790-75ec-f8d0-53fa-e8ae42cfb423\"}]}}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214592072,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b3afc80-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "customer_side_bar",
    "name" : "Customer Side Bar",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 7.5,
      "sizeY" : 3,
      "resources" : [ ],
      "templateHtml" : "<div fxLayout=\"column\" fxLayoutAlign=\"space-between\" fxFill>\r\n    <div>\r\n        <!--<div id=\"profile\" fxLayout=\"column\"  fxLayoutAlign=\"start center\">-->\r\n        <!--    <img class=\"profileIcon\" *ngIf=\"ctx.widgetConfig.settings.icon\" [src]=ctx.sanitizer.bypassSecurityTrustResourceUrl(ctx.widgetConfig.settings.icon) />-->\r\n\r\n        <!--    <div class=\"userName\">{{ctx.firstName}} {{ctx.lastName}}</div>-->\r\n        <!--    <div class=\"userRole\">{{ctx.userRole}}</div>-->\r\n        <!--</div>-->\r\n        \r\n                    <!--list of menus-->\r\n\r\n        <div fxLayout=\"column\" fxLayoutAlign=\"start start\"\r\n            style=\"width:100%\">\r\n            <ng-container\r\n                *ngFor=\"let _item of ctx.widgetConfig.settings.menuItems\">\r\n                <ng-container\r\n                    *ngTemplateOutlet=\"menuItem;context:{item: _item}\">\r\n                </ng-container>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n    <div class=\"tbViewMenu\" \r\n        (click)=\"viewChangeClicked($event,item)\" *ngIf=\"ctx.isFullScreen!==undefined && ctx.widgetConfig.settings.showViewChange\">\r\n        <span>{{ctx.isFullScreen==true?\"TB View\":\"NP View\"}}</span>\r\n    </div>\r\n\r\n</div>\r\n<!--template for menu design-->\r\n\r\n<ng-template #menuItem let-item=\"item\">\r\n    <span class=\"menuItem\"\r\n        [ngClass]=\"{'activeMenuItem':( (ctx.lastClickedItem==undefined && ctx.widgetConfig.settings.defaultMenu==item.name ) || ctx.lastClickedItem==item.name )}\"\r\n        (click)=\"menuClicked($event,item)\">{{item.name}}</span>\r\n</ng-template>",
      "templateCss" : "\n#profile{\n    width: 100%;\n    padding: 40px 0;\n    margin: 0;\n}\n.profileIcon{\n    margin-bottom: 16px ;\n    height: 56px;\n    width: 56px;\n}\n.userName{\n    font-family: 'Roboto';\n    font-style: normal;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 16px;\n    text-align: center;\n    color: #FFFFFF;\n}\n.userRole{\n    font-family: 'Roboto';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 14px;\n    line-height: 16px;\n    text-align: center;\n    color: #FFFFFF;\n}\n#container {\n    overflow: auto; \n    background: #1B4383;    \n} \n.menuItem{\n    width: 100%;\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    text-transform: capitalize;\n    padding: 30px 0 31px 69px;\n    color: #FFFFFF;\n    opacity: 0.6;\n    cursor: pointer;\n} \n.menuItem:hover,.activeMenuItem{\n    font-weight: 600;\n    opacity: 1;\n    border-left: 4px solid #ffffff;\n    padding-left: 65px;\n    background: rgba(0, 0, 0, 0.1);\n\n}\n.tbViewMenu{\n    display: inline-block;\n    opacity: 1;\n    color: #FFFFFF;\n    width: calc(100% - 20px);\n    min-height: 56px;\n    background: #1B4383;    \n    background: rgba(0, 0, 0, 0.1);\n    margin:10px;\n    \n    display: table;\n\n}\n.tbViewMenu span{\n    padding-left: 59px;\n\n      vertical-align:middle;\n  display: table-cell;\n    \n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    text-transform: capitalize;\n    color: #FFFFFF;\n    flex: none;\n    order: 1;\n    flex-grow: 0;\n    cursor: pointer;\n    \n}\n.tbViewMenu:hover span{\n     /*border: 1px solid #ffffff;*/\n     font-weight: 600;\n}\n\n\n\n\n*{\n    caret-color: transparent;\n    -ms-overflow-style: none;  \n    scrollbar-width: none;  \n}\n\n::-webkit-scrollbar { \n    display: none;  \n}\n",
      "controllerScript" : "self.onInit = function() {\n    \n\n    self.ctx.isFullScreen=undefined;\n    if(self.ctx.stateController!=undefined && self.ctx.stateController\n        .getStateParams()['currentPage']!=undefined){\n            \n    self.ctx.lastClickedItem=self.ctx.stateController\n        .getStateParams()['currentPage']\n        }\n        else{\n    self.ctx.lastClickedItem=self.ctx.widgetConfig.settings.defaultMenu\n            \n        }\n\n    // set menu as active page and call menuClicked action\n    self.ctx.$scope.menuClicked=function(evt,menu){\n            evt.stopPropagation()\n            \n            self.ctx.lastClickedItem=menu.name\n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'menuClicked');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[0], {\n                        \"id\": menu.name,\n                        \"entityType\": \"Menu\"\n                    },\n                    menu.name,\n                    menu);\n            }\n\n    }\n        // humburgClicked action for mobile view\n\n    self.ctx.$scope.humburgClicked=function(evt){\n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'humBurgClicked');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[0],undefined,\n                    undefined,\n                    undefined);\n            }\n\n    }\n\n    // view changed action from NP to TB or TB to NP\n    self.ctx.$scope.viewChangeClicked=function(evt,menu){\n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'viewChangeClicked');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[0],undefined,\n                    undefined,\n                    undefined);\n            }\n\n    }\n    self.ctx.http.get(\"/api/entityGroups/USER/\"+self.ctx.currentUser.userId).subscribe(function(groupIds){   \n        var test=groupIds.map(e=>e.id)\n        self.ctx.entityGroupService.getEntityGroupsByIds(test).subscribe(function(userGroups){\n            var groupName=userGroups.find(e=>e.name!='ALL')\n            self.ctx.userRole=groupName.name\n            self.ctx.detectChanges();\n        })\n    }) \n    var firstName=self.ctx.data.find(e=>e.dataKey.name==\"firstName\")\n    var lastName=self.ctx.data.find(e=>e.dataKey.name==\"lastName\")\n    \n    if(firstName){\n        self.ctx.firstName=firstName.data[0][1]\n    }\n    if(lastName){\n        self.ctx.lastName=lastName.data[0][1]\n    }\n\n     var additionalInfo=self.ctx.data.find(e=>e.dataKey.name==\"additionalInfo\")\n     if(additionalInfo!==undefined){\n        self.ctx.isFullScreen=JSON.parse(additionalInfo.data[0][1]).defaultDashboardFullscreen;\n        //  self.ctx.detectChanges();\n     }\n\n    // self.ctx.isFullScreen=JSON.parse(additionalInfo).defaultDashboardFullscreen\n}\n\nself.onDataUpdated = function() {\n\n}\n\nself.onResize = function() {}\n\nself.onDestroy = function() {\n}\n\nself.actionSources = function() {\n    return {\n        'menuClicked': {\n            name: 'Menu Clicked',\n            multiple: false\n        },\n        'humBurgClicked': {\n            name: 'Humburg Clicked',\n            multiple: false\n        },\n        'viewChangeClicked': {\n            name: 'View Change Clicked',\n            multiple: false\n        }\n\n    };\n}\n",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"Setting\",\r\n        \"properties\": {\r\n            \"icon\": {\r\n                \"title\": \"Logo\",\r\n                \"type\": \"string\"\r\n\r\n            },\r\n            \"defaultMenu\": {\r\n                \"title\": \"Default Menu Name\",\r\n                \"type\": \"string\"\r\n\r\n            },\r\n            \"menuItems\": {\r\n                \"type\": \"array\",\r\n                \"title\": \"Menu Items\",\r\n                \"items\": {\r\n                    \"type\": \"object\",\r\n                    \"properties\": {\r\n                        \"name\": {\r\n                            \"title\": \"Name\",\r\n                            \"type\": \"string\"\r\n\r\n                        }\r\n                }\r\n                }\r\n\r\n            },\r\n            \"showViewChange\":{\r\n                \"type\": \"boolean\"\r\n                \r\n            }\r\n\r\n        }\r\n    },\r\n    \"form\": [\r\n        {\r\n            \"key\": \"icon\",\r\n            \"type\": \"image\"\r\n        },\r\n        \"defaultMenu\",\r\n        {\r\n            \"key\": \"menuItems\",\r\n            \"add\": \"New\",\r\n            \"style\": {\r\n                \"add\": \"btn-success\"\r\n            },\r\n            \"items\": [\r\n\r\n                {\r\n                    \"key\": \"menuItems[].name\",\r\n                    \"type\": \"text\"\r\n\r\n                }\r\n\r\n            ]\r\n        },\r\n        {\r\n            \"key\":\"showViewChange\",\r\n            \"default\": true            \r\n        }\r\n    ]\r\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{\"showViewChange\":true},\"title\":\"Customer Side Bar\",\"showTitleIcon\":false,\"dropShadow\":false,\"enableFullscreen\":false,\"enableDataExport\":false,\"widgetStyle\":{},\"widgetCss\":\"\",\"noDataDisplayMessage\":\"\",\"showLegend\":false}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214591969,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b2b4510-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "device_component_widget",
    "name" : "Device Component Widget",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 7.5,
      "sizeY" : 3,
      "resources" : [ {
        "url" : "static/thingsboard-extension-widgets.js",
        "isModule" : true
      } ],
      "templateHtml" : "<div class=\"ntContainer\">\n    <ng-container *ngIf=\"ctx.datasources.length<=0\">\n        <div style=\"height:100%;width:100%; padding:  0 0 0 16px;  display: flex;align-items: center;\" class=\"nameTitle\">\n            No Devices\n        </div>\n    </ng-container>    \n    <ng-container *ngFor=\"let item of ctx.datasources ; let j=index\">\n    <div fxLayout=\"row\" fxLayoutAlign=\"space-between center\" class=\"deviceContainer\">\n        <!--<span class=\"nameTitle\">-->\n            <!--{{item.name}} -->\n        <!--    D{{(j+1)+\". \"+item.name}} -->\n        <!--</span>-->\n        <span class=\"nameTitle\" *ngIf=\"ctx.npNameToNormal!==undefined\">\n            <!--D{{(j+1)+\". \"+ctx.getEntitySubType(item.entityId)+\": \"+ctx.npNameToNormal(item.name)+((item.entityLabel==undefined || item.entityLabel=='')?'':\" (\"+item.entityLabel+\")\") }}-->\n            D{{(j+1)+\". \"+ctx.getEntitySubType(item.entityId)+\": \"+ctx.npNameToNormal(item.name) }}\n\n        </span>\n\n        <span *ngIf=\"ctx.widget.config.actions!==undefined\" fxLayout=\"row\" fxLayoutGap=\"20px\" class=\"actions\">\n            <ng-container *ngFor=\"let action of ctx.widget.config.actions.actionButton ; let i = index\"  >\n              <!--<mat-icon (click)=\"actionClicked($event,i,item)\">{{action.icon}}</mat-icon>-->\n                          <button mat-button mat-icon-button matTooltip=\"{{action.name}}\" matTooltipPosition=\"above\">\n\n              <img *ngIf=\"ctx.customActionIcons!==undefined && ctx.customActionIcons[action.name]!=undefined\"\n                      [src]=\"ctx.customActionIcons[action.name]\" alt=\"\" (click)=\"actionClicked($event,i,item)\">\n                <mat-icon (click)=\"actionClicked($event,i,item)\" *ngIf=\"ctx.customActionIcons==undefined ||  ctx.customActionIcons[action.name]==undefined\">{{action.icon}}\n                </mat-icon>\n</button>\n            </ng-container>\n        </span>\n        </div>\n    </ng-container>\n</div>",
      "templateCss" : "#container {\n    overflow: auto;\n    width:100%;\n    height:100%;\n    background: #F2F6FC;\n    padding: 0;\n}\n\n.deviceContainer{\n    padding: 10px 0 10px 16px  ;\n}\n.nameTitle{\n    \nfont-family: 'Inter';\nfont-style: normal;\nfont-weight: 400;\nfont-size: 16px;\nline-height: 19px;\ntext-transform: capitalize;\n\n/* Grey 1 */\n\ncolor: #696969;\n}\n.actions{\n    padding-right: 20px ;\n}",
      "controllerScript" : "self.onInit = function() {\r\n        self.ctx.getEntitySubType=function(id){\r\n        var type=self.ctx.data.find(function(e){\r\n            return e.datasource.entityId==id && e.dataKey.name==\"type\"\r\n        }) \r\n        if(type){\r\n            return type.data[0][1]\r\n        }\r\n        return \"\"\r\n    }\r\n\r\n        self.ctx.npNameToNormal=function(value){ \r\n        const regexExp = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/gi;\r\n        var underScoreSperated=value.split(\"_\")\r\n\r\n        if(underScoreSperated.length>1){\r\n            if(regexExp.test(underScoreSperated[0])==true){\r\n                return value.replace(underScoreSperated[0]+\"_\",\"\")\r\n            }\r\n        }\r\n        return value\r\n\r\n    }\r\n\r\n    self.ctx.customActionIcons={};\r\n    if (self.ctx.widgetConfig.settings[\"actionIcons\"] != undefined && this.ctx.widgetConfig.settings[\"actionIcons\"].length >= 1) {\r\n      self.ctx.widgetConfig.settings[\"actionIcons\"].forEach(e => self.ctx.customActionIcons[e.name] = e.icon);\r\n    }\r\n\r\n    self.ctx.$scope.actionClicked=function($event,i,item){\r\n            $event.stopPropagation();\r\n            var menuAction = ctx.actionsApi\r\n                .getActionDescriptors(\r\n                    'actionButton');\r\n            if (menuAction != undefined) {\r\n                self.ctx.actionsApi.handleWidgetAction(\r\n                    null, menuAction[i], item.entity.id,\r\n                    item.entity.name,\r\n                    item);\r\n            }\r\n\r\n        \r\n    }\r\n\r\n    // console.log(self.ctx.parentDashboard)\r\n}\r\n\r\nself.onDataUpdated = function() {\r\n    // if(self.ctx.parentDashboard && self.ctx.parentDashboard.dashboardWidgets){\r\n    //     var widgetId=self.ctx.parentDashboard.dashboardWidgets.dashboardWidgets[0].widgetId\r\n    //     var widget=self.ctx.parentDashboard.dashboardWidgets.findWidgetById(widgetId)\r\n    //     console.log(widget)\r\n    //     widget.widgetContext.reloadWidget()\r\n    //     // widget.widgetContext.detectChanges()\r\n    // }\r\n    self.onResize();\r\n\r\n    \r\n}\r\n\r\nself.onResize = function() {\r\n    var container=$(self.ctx.$container).find(\".ntContainer\")\r\n    var stateContainer=$(self.ctx.$container).closest('nt-dashboard-state')\r\n\r\n    if(self.ctx.datasources.length<=0){\r\n    container.height(40)\r\n    stateContainer.height(40)\r\n    }\r\n    else{\r\n    stateContainer.height(container.height())\r\n    }\r\n    \r\n    var parentContainer=$(stateContainer).closest(\".ntContainer\")\r\n    var parentStateContainer=$(parentContainer).closest('nt-dashboard-state')\r\n    parentStateContainer.height(parentContainer.height())\r\n    \r\n\r\n    // if(self.ctx.reloadParentFunction){\r\n    //     console.log(\"Reload parent\")\r\n    //     self.ctx.reloadParentFunction();\r\n    // }\r\n\r\n}\r\nself.actionSources = function() {\r\n    return {\r\n        'actionButton': {\r\n            name: 'Action Button',\r\n            multiple: true\r\n        }\r\n    };\r\n}\r\nself.typeParameters=function(){\r\n    return {\r\n        maxDatasources: -1, // Maximum allowed datasources for this widget, -1 - unlimited\r\n        maxDataKeys: -1, //Maximum allowed data keys for this widget, -1 - unlimited\r\n        dataKeysOptional: true, //Whether this widget can be configured with datasources without data keys\r\n        datasourcesOptional: true\r\n    }\r\n}\r\nself.onDestroy = function() {\r\n}\r\n",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"EntitiesTableSettings\",\r\n        \"properties\": {\r\n\r\n            \"actionIcons\": {\r\n                \"type\": \"array\",\r\n                \"title\": \"Action Icons\",\r\n                \"items\": {\r\n                    \"type\": \"object\",\r\n                    \"properties\": {\r\n                        \"name\": {\r\n                            \"title\": \"Name\",\r\n                            \"type\": \"string\"\r\n\r\n                        },\r\n                        \"icon\": {\r\n                            \"title\": \"Name\",\r\n                            \"type\": \"string\"\r\n\r\n                        }\r\n                }\r\n                }\r\n\r\n            }\r\n        },\r\n        \"required\": []\r\n    },\r\n    \"form\": [\r\n        {\r\n            \"key\": \"actionIcons\",\r\n            \"add\": \"New\",\r\n            \"style\": {\r\n                \"add\": \"btn-success\"\r\n            },\r\n            \"items\": [\r\n                {\r\n                    \"key\": \"actionIcons[].name\",\r\n                    \"type\": \"text\"\r\n                },\r\n                {\r\n                    \"key\": \"actionIcons[].icon\",\r\n                    \"type\": \"image\"\r\n                }\r\n\r\n            ]\r\n        }\r\n    ]\r\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"Device Component Widget\"}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214592064,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b39c400-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "device_status",
    "name" : "Device Status",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 7.5,
      "sizeY" : 3,
      "resources" : [ ],
      "templateHtml" : "<div fxLayout=\"row\" fxLayoutAlign=\"start stretch\" fxFill>\n    <!--device status circle-->\n    <div class=\"donut\" >\n        <div class=\"hole\">\n            <div class=\"inPerc\" *ngIf=\"getActive\">\n                <!--total device counts-->\n                <div class=\"count\" *ngIf=\"getActive\">{{getActive(ctx)}}<span>/{{totalCount}}</span></div>\n            </div>\n        </div>\n    </div>    \n    <div class=\"content\" fxLayout=\"column\" fxLayoutAlign=\"center\">\n        <!--Card title-->\n        <div class=\"title\">{{ctx.widgetConfig.title}}</div>\n        <!--<div class=\"count\" *ngIf=\"getActive\">{{getActive(ctx)}}<span>/{{totalCount}}</span></div>-->\n        <div class=\"status\" >\n            <!--Active device label-->\n            <span class=\"activeStatus\" (click)=\"activeClicked()\">Active</span>\n            <!--Inactive device label-->\n            <span class=\"deactiveStatus\" (click)=\"inActiveClicked()\">Inactive</span></div>\n    </div>\n</div>\n ",
      "templateCss" : "#container{\r\n    padding: 16px 0 16px 32px;\r\n}\r\n.content{\r\n    padding: 0 0 0 32px;\r\n}\r\n.status{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 16px;\r\n    line-height: 19px;\r\n    color: #0EC23E;\r\n}\r\n.status span{\r\n    border-right: 1px solid #EDEFF4;\r\n    padding:0 10px;\r\n    cursor: pointer;\r\n}\r\n\r\n.status span:first-child{\r\n    padding-left: 0;\r\n}\r\n.status span:last-child{\r\n    padding-right: 0;\r\n    border: none\r\n}\r\n\r\n.status .deactiveStatus{\r\n    color: #E93800;\r\n}\r\n.inPerc{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    font-size: 26px;\r\n    line-height: 31px;\r\n    text-align: center;\r\n    color: #3D3D3D; \r\n}\r\n.count{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    font-size: 32px;\r\n    line-height: 39px;\r\n    color: #000000;\r\n}\r\n.count span{\r\n    font-weight: 600;\r\n    font-size: 20px;\r\n    /*line-height: 39px;*/\r\n    \r\n}\r\n.title{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 16px;\r\n    line-height: 19px;\r\n    \r\n    /* Grey 1 */\r\n    \r\n    color: #696969;\r\n\r\n}\r\n.donut {\r\n  padding: 0;\r\n  margin: 0;\r\n  aspect-ratio: 1 / 1; \r\n  height: 100%;\r\n  border-radius: 50%;\r\n  background-color: #0EC23E;\r\n} \r\n.hole {\r\n  aspect-ratio: 1 / 1;\r\n   height: 90%;\r\n  border-radius: 50%;\r\n  background: #fff;\r\n  align-items: center;\r\n  justify-content: center;\r\n  display: flex;\r\n}\r\n \r\n.donut {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}",
      "controllerScript" : "self.onInit = function() {\n    self.ctx.$scope.getActive =\n        new Function([\"widgetContext\"], self.ctx.settings.getActive)\n    //call active action if have added\n    self.ctx.$scope.activeClicked=function(evt,menu){\n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'activeClicked');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[0], undefined,\n                    undefined,\n                    undefined);\n            }\n    }\n    \n    //call inactive action if have added\n    self.ctx.$scope.inActiveClicked=function(evt,menu){\n        \n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'inActiveClicked');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[0], undefined,\n                    undefined,\n                    undefined);\n            }\n    }\n\n}\n \nself.onDataUpdated = function() {\n    self.ctx.$scope.totalCount=self.ctx.datasources.length //set total devices count\n    var active=self.ctx.$scope.getActive(self.ctx) // get active counts\n    var statusDegree=(active*360)/self.ctx.$scope.totalCount // get active counts in degree for showing visual on circle\n    $(self.ctx.$container).find(\".donut\").css( 'background-image', 'conic-gradient(#0EC23E 0deg '+statusDegree+'deg, #E93800 '+statusDegree+'deg 360deg)' ); // update circle for actie and inactive devices\n\n}\nself.typeParameters=function(){\n    return {\n        maxDatasources: -1, // Maximum allowed datasources for this widget, -1 - unlimited\n        maxDataKeys: -1, //Maximum allowed data keys for this widget, -1 - unlimited\n        dataKeysOptional: true //Whether this widget can be configured with datasources without data keys\n    }\n}\nself.actionSources = function() {\n    return {\n        'activeClicked': {\n            name: 'Active Clicked',\n            multiple: false\n        }, // to exzecute action when active label is clicked\n        'inActiveClicked': {\n            name: 'Inactive Clicked',\n            multiple: false\n        }// to exzecute action when inActive label is clicked\n    };\n}\n\nself.onResize = function() {\n\n}\n\nself.onDestroy = function() {\n}\n",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"Setting\",\r\n        \"properties\": {\r\n            \"getActive\": {\r\n                \"title\": \"Get Active Counts(widgetContext)\",\r\n                \"type\": \"string\"\r\n\r\n            }\r\n        }\r\n    },\r\n    \"form\": [\r\n        {\r\n            \"key\": \"getActive\",\r\n            \"type\": \"javascript\"\r\n        }\r\n        ]\r\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{\"getActive\":\"return widgetContext.datasources.length\"},\"title\":\"Device Status\",\"showTitleIcon\":false,\"titleTooltip\":\"\",\"dropShadow\":false,\"enableFullscreen\":false,\"enableDataExport\":false,\"widgetStyle\":{},\"widgetCss\":\"\",\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"noDataDisplayMessage\":\"\",\"showLegend\":false}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214592142,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b45aae0-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "key_array_list",
    "name" : "Key Array List",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 7.5,
      "sizeY" : 4,
      "resources" : [ ],
      "templateHtml" : "<div fxLayout=\"column\" fxLayoutGap=\"10px\" >\n    <ng-container *ngFor = \"let item of elementData\">\n        <div class=\"listItem\" fxLayout=\"row\" fxLayoutAlign=\"space-between\" >\n            <span>{{item}}</span>\n            <span class=\"removeButton\" (click)=\"onRemoveClicked($event,item)\">Remove</span>\n        \n        </div>\n    </ng-container>    \n</div>\n",
      "templateCss" : "#container{\n    overflow: auto;\n}\n.listItem{\n    padding: 16px;\n    background: #FFFFFF;\n    border: 1px solid #EDEFF4;\n    border-radius: 10px;\n    \n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    color: #000000;\n}\n.removeButton{\n    font-size: 14px;\n    line-height: 17px;\n    text-align: right;\n    color: #E93800;\n}",
      "controllerScript" : "self.onInit = function() {\n        self.ctx.$scope.onRemoveClicked=function(evt,menu){\n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'onRemoveClicked');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[0], undefined,\n                    undefined,\n                    menu);\n            }\n\n    }\n    \n}\n\nself.onDataUpdated = function() {\n    if (self.ctx.data.length > 0 && self.ctx.data[0]\n        .data.length > 0 && self.ctx.data[0].data[0][1]!=\"\") {\n            console.log(self.ctx.data[0].data[0][1]) \n        var array_data = JSON.parse(self.ctx.data[0].data[0][1]);\n        self.ctx.$scope.elementData=[]\n        self.ctx.$scope.elementData=array_data\n        self.ctx.detectChanges();\n    }\n\n}\nself.actionSources = function(){\n return{\n     'onRemoveClicked' :{\n         name: 'On Remove Clicked',\n         multiple:true \n     }\n }; \n}\nself.onResize = function() {\n\n}\n\nself.onDestroy = function() {\n}\nself.typeParameters =function(){\n    return{\n     maxDatasources:1,\n     maxDataKeys:1,\n     dataKeyOptional:false\n    }\n}\n",
      "settingsSchema" : "{}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"entityAliasId\":null,\"filterId\":null,\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn '[\\\"dhaval@gmail.com\\\",\\\"test@gmail.com\\\"]';\",\"units\":null,\"decimals\":null,\"usePostProcessing\":null,\"postFuncBody\":null}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{},\"title\":\"Key Array List\",\"showTitleIcon\":false,\"titleTooltip\":\"\",\"dropShadow\":false,\"enableFullscreen\":false,\"enableDataExport\":false,\"widgetStyle\":{},\"widgetCss\":\"\",\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"noDataDisplayMessage\":\"\",\"showLegend\":false}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214592026,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b33f7a0-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "load_resource",
    "name" : "Load Resource",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "static",
      "sizeX" : 7.5,
      "sizeY" : 3,
      "resources" : [ {
        "url" : "static/thingsboard-extension-widgets.js",
        "isModule" : true
      } ],
      "templateHtml" : "",
      "templateCss" : "",
      "controllerScript" : "self.onInit = function() {\n}\n\nself.actionSources = function() {\n    return {\n        'elementClick': { \n            name: 'widget-action.element-click', \n            multiple: true\n        }   \n    };\n}\n\nself.onDestroy = function() {\n}\n",
      "settingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"required\": [\"cardHtml\"],\n        \"properties\": {\n            \"cardCss\": {\n                \"title\": \"CSS\",\n                \"type\": \"string\",\n                \"default\": \".card {\\n font-weight: bold; \\n}\"\n            },\n            \"cardHtml\": {\n                \"title\": \"HTML\",\n                \"type\": \"string\",\n                \"default\": \"<div class='card'>HTML code here</div>\"\n            }\n        }\n    },\n    \"form\": [\n        {\n            \"key\": \"cardCss\",\n            \"type\": \"css\"\n        },           \n        {\n            \"key\": \"cardHtml\",\n            \"type\": \"html\"\n        }    \n    ]\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"static\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"rgb(255, 255, 255)\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"cardHtml\":\"<div class='card'>HTML code here</div>\",\"cardCss\":\".card {\\n    font-weight: bold;\\n    font-size: 32px;\\n    color: #999;\\n    width: 100%;\\n    height: 100%;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n}\"},\"title\":\"Load Resource\",\"dropShadow\":true,\"enableFullscreen\":true,\"enableDataExport\":true,\"widgetStyle\":{},\"widgetCss\":\"\",\"noDataDisplayMessage\":\"\",\"showLegend\":false,\"showTitleIcon\":false,\"titleTooltip\":\"\",\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400}}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214591800,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b117b80-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "npexpandabletable",
    "name" : "NPExpandableTable",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 9,
      "sizeY" : 5.5,
      "resources" : [ {
        "url" : "static/thingsboard-extension-widgets.js",
        "isModule" : true
      } ],
      "templateHtml" : "\n<nt-entities-expandable-table-widget  [ctx]=\"ctx\">\n</nt-entities-expandable-table-widget>",
      "templateCss" : "#container {\n    overflow: auto;\n}\n\n.tbDatasource-container {\n    margin: 5px;\n    padding: 8px;\n}\n\n.tbDatasource-title {\n    font-size: 1.200rem;\n    font-weight: 500;\n    padding-bottom: 10px;\n}\n\n.tbDatasource-table {\n    width: 100%;\n    box-shadow: 0 0 10px #ccc;\n    border-collapse: collapse;\n    white-space: nowrap;\n    font-size: 1.000rem;\n    color: #757575;\n}\n\n.tbDatasource-table td {\n    position: relative;\n    border-top: 1px solid rgba(0, 0, 0, 0.12);\n    border-bottom: 1px solid rgba(0, 0, 0, 0.12);\n    padding: 0px 18px;\n    box-sizing: border-box;\n}",
      "controllerScript" : "self.onInit = function() {\n\n}    \nself.onDataUpdated = function() { \n    self.ctx.$scope.entitiesTableWidget.onDataUpdated();\n} \nself.typeParameters = function() {  \n    return {     \n        maxDatasources: 1,  \n        hasDataPageLink: true,  \n        warnOnPageDataOverflow: false,\n        dataKeysOptional: true\n    };\n} \n  \nself.actionSources = function() {\n    return {\n        'actionCellButton': {\n            name: 'widget-action.action-cell-button',\n            multiple: true,\n            hasShowCondition: true\n        },\n        'rowClick': {\n            name: 'widget-action.row-click',\n            multiple: false\n        },\n        'rowDoubleClick': {\n            name: 'widget-action.row-double-click',\n            multiple: false\n        }\n    };\n}\n\nself.onResize = function() {\n\n}\n\nself.onDestroy = function() {}\n\n// self.onInit = function() {\n//     console.log(window,self.ctx)  \n//     // self.importFiles=[ \n//     //     \"https://unpkg.com/rxjs@^7/dist/bundles/rxjs.umd.min.js\",\n//     //     \"https://unpkg.com/@angular/core@12.0.0/bundles/core.umd.js\",\n\n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk.umd.js\", \n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk-collections.umd.js\",\n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk-bidi.umd.js\",\n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk-scrolling.umd.js\", \n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk-table.umd.js\",\n\n//     //     \"https://unpkg.com/@angular/material@12.0.0/bundles/material-table.umd.js\"\n//     // ]\n//     // self.loadFiles(0); \n//     // console.log(self.ctx.$scope.$injector.get(self.ctx.servicesMap.set('userPermissionsService')).userPermissions); \n//     // self.ctx.$scope.displayedColumns=self.ctx.datasources[0].dataKeys.map(e=>e._hash.toString());    \n\n//     //      const tableData = [ ] // Your data     \n//     // const tablePagination = { \n//     //     pageIndex: 0, \n//     //     pageSize: 10,\n//     //     pageSizeOptions: [10, 25,50, 100], \n//     //     handler: (pagination) => {  \n//     //         const { pageIndex, pageSize } = pagination;\n//     //         if (pageSize !== undefined) {  \n//     //             tablePagination.pageSize = pageSize; \n//     //         }\n//     //         if (pageIndex !== undefined) {\n//     //             tablePagination.pageIndex = pageIndex;\n//     //         }\n//     //     },\n//     //     getFrom: () => {\n//     //         const { pageIndex, pageSize } = tablePagination;\n//     //         return pageIndex * pageSize;\n//     //     }, \n//     //     getTo: () => {\n//     //         const { pageIndex, pageSize } = tablePagination;\n//     //         return pageIndex * pageSize + pageSize;\n//     //     }\n//     // }\n\n//     // const { $scope } = self.ctx\n//     // $scope.tableData = new window.rxjs.BehaviorSubject([]);\n//     // $scope.tablePagination = tablePagination \n//     // var  matTable=$(\"#reportTable\");\n//     // console.log(matTable)\n// }\n// self.loadFiles=function(n){\n//     if(self.importFiles[n]!==undefined){\n//         $.getScript(self.importFiles[n], function() {\n//             self.loadFiles(n+1);\n//         });        \n//     }\n\n// }\n\n// self.onDataUpdated = function() {\n//         // console.log(self.ctx,window,window.ng)   \n\n//     // var tableData=[];\n//     // for (var i = 0; i < self.ctx.data.length/self.ctx.datasources[0].dataKeys.length; i++ ) {\n//     //     var rowData={}\n//     //     self.ctx.datasources[0].dataKeys.forEach(function(key,index){\n//     //         if(self.ctx.data[i+index].data.length>=1){\n//     //             rowData[key._hash.toString()]=self.ctx.data[i+index].data[0][1]\n//     //         }\n//     //     })\n//     //     tableData.push(rowData)\n//     // }  \n//     // // self.ctx.$scope.tableData = tableData\n//     // self.ctx.$scope.tableData.next([...tableData]);\n//     // // self.ctx.detectChanges();\n\n// }",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"EntitiesTableSettings\",\r\n        \"properties\": {\r\n            \"entitiesTitle\": {\r\n                \"title\": \"Entities table title\",\r\n                \"type\": \"string\",\r\n                \"default\": \"\"\r\n            },\r\n            \"enableSearch\": {\r\n                \"title\": \"Enable entities search\",\r\n                \"type\": \"boolean\",\r\n                \"default\": true\r\n            },\r\n            \"enableSelectColumnDisplay\": {\r\n                \"title\": \"Enable select columns to display\",\r\n                \"type\": \"boolean\",\r\n                \"default\": true\r\n            },\r\n            \"enableStickyHeader\": {\r\n                \"title\": \"Always display header\",\r\n                \"type\": \"boolean\",\r\n                \"default\": true\r\n            },\r\n            \"enableStickyAction\": {\r\n                \"title\": \"Always display actions column\",\r\n                \"type\": \"boolean\",\r\n                \"default\": true\r\n            },\r\n            \"reserveSpaceForHiddenAction\": {\r\n                \"title\": \"Hidden cell button actions display mode\",\r\n                \"type\": \"string\",\r\n                \"default\": \"true\"\r\n            },\r\n            \"displayEntityName\": {\r\n                \"title\": \"Display entity name column\",\r\n                \"type\": \"boolean\",\r\n                \"default\": true\r\n            },\r\n            \"entityNameColumnTitle\": {\r\n                \"title\": \"Entity name column title\",\r\n                \"type\": \"string\",\r\n                \"default\": \"\"\r\n            },\r\n            \"displayEntityLabel\": {\r\n                \"title\": \"Display entity label column\",\r\n                \"type\": \"boolean\",\r\n                \"default\": false\r\n            },\r\n            \"entityLabelColumnTitle\": {\r\n                \"title\": \"Entity label column title\",\r\n                \"type\": \"string\",\r\n                \"default\": \"\"\r\n            },\r\n            \"displayEntityType\": {\r\n                \"title\": \"Display entity type column\",\r\n                \"type\": \"boolean\",\r\n                \"default\": true\r\n            },\r\n            \"displayPagination\": {\r\n                \"title\": \"Display pagination\",\r\n                \"type\": \"boolean\",\r\n                \"default\": true\r\n            },\r\n            \"defaultPageSize\": {\r\n                \"title\": \"Default page size\",\r\n                \"type\": \"number\",\r\n                \"default\": 10\r\n            },\r\n            \"defaultSortOrder\": {\r\n                \"title\": \"Default sort order\",\r\n                \"type\": \"string\",\r\n                \"default\": \"entityName\"\r\n            },\r\n            \"useRowStyleFunction\": {\r\n                \"title\": \"Use row style function\",\r\n                \"type\": \"boolean\",\r\n                \"default\": false\r\n            },\r\n            \"rowStyleFunction\": {\r\n                \"title\": \"Row style function: f(entity, ctx)\",\r\n                \"type\": \"string\",\r\n                \"default\": \"\"\r\n            },\r\n            \"engineActions\": {\r\n                \"title\": \"Engine Actions Comma seperated\",\r\n                \"type\": \"string\",\r\n                \"default\": \"\"\r\n            }\r\n            ,\r\n            \"deviceActions\": {\r\n                \"title\": \"Device Actions Comma seperated\",\r\n                \"type\": \"string\",\r\n                \"default\": \"\"\r\n            },\r\n            \"actionIcons\": {\r\n                \"type\": \"array\",\r\n                \"title\": \"Action Icons\",\r\n                \"items\": {\r\n                    \"type\": \"object\",\r\n                    \"properties\": {\r\n                        \"name\": {\r\n                            \"title\": \"Name\",\r\n                            \"type\": \"string\"\r\n\r\n                        },\r\n                        \"icon\": {\r\n                            \"title\": \"Name\",\r\n                            \"type\": \"string\"\r\n\r\n                        }\r\n                }\r\n                }\r\n\r\n            },\r\n            \"expandedComponentStateName\": {\r\n                \"title\": \"Component State name\",\r\n                \"type\": \"string\"\r\n            },\r\n            \"expandedDeviceStateName\": {\r\n                \"title\": \"Device State name\",\r\n                \"type\": \"string\"\r\n            },\r\n            \"refreshChildPrefix\": {\r\n                \"title\": \"Refresh Child Prefix\",\r\n                \"type\": \"string\"\r\n            }\r\n\r\n        },\r\n        \"required\": []\r\n    },\r\n    \"form\": [\r\n        \"entitiesTitle\",\r\n        \"enableSearch\",\r\n        \"enableSelectColumnDisplay\",\r\n        \"enableStickyHeader\",\r\n        \"enableStickyAction\",\r\n        {\r\n          \"key\": \"reserveSpaceForHiddenAction\",\r\n          \"type\": \"rc-select\",\r\n          \"multiple\": false,\r\n          \"items\": [\r\n            {\r\n              \"value\": \"true\",\r\n              \"label\": \"Show empty space instead of hidden cell button action\"\r\n            },\r\n            {\r\n              \"value\": \"false\",\r\n              \"label\": \"Don't reserve space for hidden action buttons\"\r\n            }\r\n          ]\r\n        },\r\n        \"displayEntityName\",\r\n        \"entityNameColumnTitle\",\r\n        \"displayEntityLabel\",\r\n        \"entityLabelColumnTitle\",\r\n        \"displayEntityType\",\r\n        \"displayPagination\",\r\n        \"defaultPageSize\",\r\n        \"defaultSortOrder\",\r\n        \"useRowStyleFunction\",\r\n        {\r\n            \"key\": \"rowStyleFunction\",\r\n            \"type\": \"javascript\",\r\n            \"helpId\": \"widget/lib/entity/row_style_fn\",\r\n            \"condition\": \"model.useRowStyleFunction === true\"\r\n        },\r\n        \"engineActions\",\r\n        \"deviceActions\",\r\n        {\r\n            \"key\": \"actionIcons\",\r\n            \"add\": \"New\",\r\n            \"style\": {\r\n                \"add\": \"btn-success\"\r\n            },\r\n            \"items\": [\r\n                {\r\n                    \"key\": \"actionIcons[].name\",\r\n                    \"type\": \"text\"\r\n                },\r\n                {\r\n                    \"key\": \"actionIcons[].icon\",\r\n                    \"type\": \"image\"\r\n                }\r\n\r\n            ]\r\n        },\r\n\r\n\"expandedComponentStateName\",\r\n\"expandedDeviceStateName\",\"refreshChildPrefix\"\r\n    ]\r\n}",
      "dataKeySettingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"DataKeySettings\",\n        \"properties\": {\n            \"columnWidth\": {\n                \"title\": \"Column width (px or %)\",\n                \"type\": \"string\",\n                \"default\": \"0px\"\n            },\n            \"useCellStyleFunction\": {\n                \"title\": \"Use cell style function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"cellStyleFunction\": {\n                \"title\": \"Cell style function: f(value, entity, ctx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"useCellContentFunction\": {\n                \"title\": \"Use cell content function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"cellContentFunction\": {\n                \"title\": \"Cell content function: f(value, entity, ctx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"defaultColumnVisibility\": {\n                \"title\": \"Default column visibility\",\n                \"type\": \"string\",\n                \"default\": \"visible\"\n            },\n            \"columnSelectionToDisplay\": {\n                \"title\": \"Column selection in 'Columns to Display'\",\n                \"type\": \"string\",\n                \"default\": \"enabled\"\n            },\n            \"columnExportOption\": {\n                \"title\": \"Include column in export\",\n                \"type\": \"string\",\n                \"default\": \"onlyVisible\"\n            }\n        },\n        \"required\": []\n    },\n    \"form\": [\n        \"columnWidth\",\n        \"useCellStyleFunction\",\n        {\n            \"key\": \"cellStyleFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entity/cell_style_fn\",\n            \"condition\": \"model.useCellStyleFunction === true\"\n        },\n        \"useCellContentFunction\",\n        {\n            \"key\": \"cellContentFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entity/cell_content_fn\",\n            \"condition\": \"model.useCellContentFunction === true\"\n        },\n        {\n            \"key\": \"defaultColumnVisibility\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [\n                {\n                    \"value\": \"visible\",\n                    \"label\": \"Visible\"\n                },\n                {\n                    \"value\": \"hidden\",\n                    \"label\": \"Hidden\"\n                }    \n            ]\n        },\n        {\n            \"key\": \"columnSelectionToDisplay\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [\n                {\n                    \"value\": \"enabled\",\n                    \"label\": \"Enabled\"\n                },\n                {\n                    \"value\": \"disabled\",\n                    \"label\": \"Disabled\"\n                }    \n            ]\n        },\n        {\n            \"key\": \"columnExportOption\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [\n                {\n                    \"value\": \"always\",\n                    \"label\": \"Always\"\n                },\n                {\n                    \"value\": \"onlyVisible\",\n                    \"label\": \"Only if column visible\"\n                },\n                {\n                    \"value\": \"never\",\n                    \"label\": \"Never\"\n                }     \n            ]\n        }\n    ]\n}",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"enableSearch\":true,\"enableSelectColumnDisplay\":false,\"enableStickyHeader\":false,\"enableStickyAction\":false,\"reserveSpaceForHiddenAction\":\"true\",\"displayEntityName\":false,\"displayEntityLabel\":false,\"displayEntityType\":false,\"displayPagination\":true,\"defaultPageSize\":10,\"defaultSortOrder\":\"entityName\",\"useRowStyleFunction\":false,\"entitiesTitle\":\"NPExpandableTable\"},\"title\":\"NPExpandableTable\"}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214592073,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b3b2390-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "nptable",
    "name" : "NPTable",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 8.5,
      "sizeY" : 5.5,
      "resources" : [ {
        "url" : "static/thingsboard-extension-widgets.js",
        "isModule" : true
      } ],
      "templateHtml" : "<nt-entities-table-widget  [ctx]=\"ctx\">\n</nt-entities-table-widget> \n<!--<tb-example></tb-example>-->\n      <!--<div class=\"content\">-->     \n    <!--.slice(tablePagination.getFrom(),   tablePagination.getTo())-->     \n<!--    <table  mat-table-->    \n<!--        [dataSource]=\"tableData\"-->  \n<!--        id=\"reportTable\" *ngIf='tablePagination!==undefined'>-->\n<!--        <ng-container *ngFor=\"let item of ctx.datasources[0].dataKeys\">-->\n<!--            <ng-container [matColumnDef]=\"item._hash.toString()\">-->\n<!--                <th mat-header-cell *matHeaderCellDef> {{item.label}}</th>--> \n                <!--<td mat-cell *matCellDef=\"let element\">{{element}} </td>-->\n<!--            <td mat-cell *matCellDef=\"let element\">{{element[item._hash]}}</td>-->\n\n<!--            </ng-container>-->\n<!--       </ng-container>-->\n\n        <!--<ng-container matColumnDef=\"name\">-->\n        <!--    <th mat-header-cell *matHeaderCellDef> Name</th>-->\n        <!--    <td mat-cell *matCellDef=\"let element\">{{element.name}}</td>-->\n        <!--</ng-container>-->\n<!--        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>-->\n<!--        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>-->\n<!--    </table>-->\n\n<!--</div>-->\n<!--<mat-paginator *ngIf='tablePagination!==undefined'-->\n<!--    [length]=\"tableData.length\"-->\n<!--    [pageSize]=\"tablePagination.pageSize\"-->\n<!--    [pageSizeOptions]=\"tablePagination.pageSizeOptions\"-->\n<!--    (page)=\"tablePagination.handler($event)\"-->\n<!--    aria-label=\"Select page\" showFirstLastButtons=\"true\">-->\n<!--</mat-paginator>-->",
      "templateCss" : "/*#container {*/\n/*    height: 100%;*/\n/*    display: flex !important;*/\n/*    flex-direction: column;*/\n/*}*/\n.content {\n  flex: 1;\n  overflow: auto;\n}",
      "controllerScript" : "self.onInit = function() {\n}\nself.onDataUpdated = function() { \n    self.ctx.$scope.entitiesTableWidget.onDataUpdated();\n}  \n\nself.typeParameters = function() { \n    return {    \n        maxDatasources: 1, \n        hasDataPageLink: true,  \n        warnOnPageDataOverflow: false,\n        dataKeysOptional: true\n    };\n} \n \nself.actionSources = function() {\n    return {\n        'actionCellButton': {\n            name: 'widget-action.action-cell-button',\n            multiple: true,\n            hasShowCondition: true\n        },\n        'rowClick': {\n            name: 'widget-action.row-click',\n            multiple: false\n        },\n        'rowDoubleClick': {\n            name: 'widget-action.row-double-click',\n            multiple: false\n        }\n    };\n}\n\nself.onResize = function() {\n\n}\n\nself.onDestroy = function() {}\n\n// self.onInit = function() {\n//     console.log(window,self.ctx)  \n//     // self.importFiles=[ \n//     //     \"https://unpkg.com/rxjs@^7/dist/bundles/rxjs.umd.min.js\",\n//     //     \"https://unpkg.com/@angular/core@12.0.0/bundles/core.umd.js\",\n\n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk.umd.js\", \n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk-collections.umd.js\",\n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk-bidi.umd.js\",\n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk-scrolling.umd.js\", \n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk-table.umd.js\",\n\n//     //     \"https://unpkg.com/@angular/material@12.0.0/bundles/material-table.umd.js\"\n//     // ]\n//     // self.loadFiles(0); \n//     // console.log(self.ctx.$scope.$injector.get(self.ctx.servicesMap.set('userPermissionsService')).userPermissions); \n//     // self.ctx.$scope.displayedColumns=self.ctx.datasources[0].dataKeys.map(e=>e._hash.toString());    \n\n//     //      const tableData = [ ] // Your data     \n//     // const tablePagination = { \n//     //     pageIndex: 0, \n//     //     pageSize: 10,\n//     //     pageSizeOptions: [10, 25,50, 100], \n//     //     handler: (pagination) => {  \n//     //         const { pageIndex, pageSize } = pagination;\n//     //         if (pageSize !== undefined) {  \n//     //             tablePagination.pageSize = pageSize; \n//     //         }\n//     //         if (pageIndex !== undefined) {\n//     //             tablePagination.pageIndex = pageIndex;\n//     //         }\n//     //     },\n//     //     getFrom: () => {\n//     //         const { pageIndex, pageSize } = tablePagination;\n//     //         return pageIndex * pageSize;\n//     //     }, \n//     //     getTo: () => {\n//     //         const { pageIndex, pageSize } = tablePagination;\n//     //         return pageIndex * pageSize + pageSize;\n//     //     }\n//     // }\n\n//     // const { $scope } = self.ctx\n//     // $scope.tableData = new window.rxjs.BehaviorSubject([]);\n//     // $scope.tablePagination = tablePagination \n//     // var  matTable=$(\"#reportTable\");\n//     // console.log(matTable)\n// }\n// self.loadFiles=function(n){\n//     if(self.importFiles[n]!==undefined){\n//         $.getScript(self.importFiles[n], function() {\n//             self.loadFiles(n+1);\n//         });        \n//     }\n\n// }\n\n// self.onDataUpdated = function() {\n//         // console.log(self.ctx,window,window.ng)   \n\n//     // var tableData=[];\n//     // for (var i = 0; i < self.ctx.data.length/self.ctx.datasources[0].dataKeys.length; i++ ) {\n//     //     var rowData={}\n//     //     self.ctx.datasources[0].dataKeys.forEach(function(key,index){\n//     //         if(self.ctx.data[i+index].data.length>=1){\n//     //             rowData[key._hash.toString()]=self.ctx.data[i+index].data[0][1]\n//     //         }\n//     //     })\n//     //     tableData.push(rowData)\n//     // }  \n//     // // self.ctx.$scope.tableData = tableData\n//     // self.ctx.$scope.tableData.next([...tableData]);\n//     // // self.ctx.detectChanges();\n\n// }",
      "settingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"EntitiesTableSettings\",\n        \"properties\": {\n            \"entitiesTitle\": {\n                \"title\": \"Entities table title\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"enableSearch\": {\n                \"title\": \"Enable entities search\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"enableSelectColumnDisplay\": {\n                \"title\": \"Enable select columns to display\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"enableStickyHeader\": {\n                \"title\": \"Always display header\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"enableStickyAction\": {\n                \"title\": \"Always display actions column\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"reserveSpaceForHiddenAction\": {\n                \"title\": \"Hidden cell button actions display mode\",\n                \"type\": \"string\",\n                \"default\": \"true\"\n            },\n            \"displayEntityName\": {\n                \"title\": \"Display entity name column\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"entityNameColumnTitle\": {\n                \"title\": \"Entity name column title\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"displayEntityLabel\": {\n                \"title\": \"Display entity label column\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"entityLabelColumnTitle\": {\n                \"title\": \"Entity label column title\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"displayEntityType\": {\n                \"title\": \"Display entity type column\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"displayPagination\": {\n                \"title\": \"Display pagination\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"defaultPageSize\": {\n                \"title\": \"Default page size\",\n                \"type\": \"number\",\n                \"default\": 10\n            },\n            \"defaultSortOrder\": {\n                \"title\": \"Default sort order\",\n                \"type\": \"string\",\n                \"default\": \"entityName\"\n            },\n            \"useRowStyleFunction\": {\n                \"title\": \"Use row style function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"rowStyleFunction\": {\n                \"title\": \"Row style function: f(entity, ctx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"actionIcons\": {\n                \"type\": \"array\",\n                \"title\": \"Action Icons\",\n                \"items\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"name\": {\n                            \"title\": \"Name\",\n                            \"type\": \"string\"\n\n                        },\n                        \"icon\": {\n                            \"title\": \"Name\",\n                            \"type\": \"string\"\n\n                        }\n                }\n                }\n\n            }\n        },\n        \"required\": []\n    },\n    \"form\": [\n        \"entitiesTitle\",\n        \"enableSearch\",\n        \"enableSelectColumnDisplay\",\n        \"enableStickyHeader\",\n        \"enableStickyAction\",\n        {\n          \"key\": \"reserveSpaceForHiddenAction\",\n          \"type\": \"rc-select\",\n          \"multiple\": false,\n          \"items\": [\n            {\n              \"value\": \"true\",\n              \"label\": \"Show empty space instead of hidden cell button action\"\n            },\n            {\n              \"value\": \"false\",\n              \"label\": \"Don't reserve space for hidden action buttons\"\n            }\n          ]\n        },\n        \"displayEntityName\",\n        \"entityNameColumnTitle\",\n        \"displayEntityLabel\",\n        \"entityLabelColumnTitle\",\n        \"displayEntityType\",\n        \"displayPagination\",\n        \"defaultPageSize\",\n        \"defaultSortOrder\",\n        \"useRowStyleFunction\",\n        {\n            \"key\": \"rowStyleFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entity/row_style_fn\",\n            \"condition\": \"model.useRowStyleFunction === true\"\n        },\n        {\n            \"key\": \"actionIcons\",\n            \"add\": \"New\",\n            \"style\": {\n                \"add\": \"btn-success\"\n            },\n            \"items\": [\n                {\n                    \"key\": \"actionIcons[].name\",\n                    \"type\": \"text\"\n                },\n                {\n                    \"key\": \"actionIcons[].icon\",\n                    \"type\": \"image\"\n                }\n\n            ]\n        }\n    ]\n}",
      "dataKeySettingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"DataKeySettings\",\n        \"properties\": {\n            \"columnWidth\": {\n                \"title\": \"Column width (px or %)\",\n                \"type\": \"string\",\n                \"default\": \"0px\"\n            },\n            \"useCellStyleFunction\": {\n                \"title\": \"Use cell style function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"cellStyleFunction\": {\n                \"title\": \"Cell style function: f(value, entity, ctx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"useCellContentFunction\": {\n                \"title\": \"Use cell content function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"cellContentFunction\": {\n                \"title\": \"Cell content function: f(value, entity, ctx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"defaultColumnVisibility\": {\n                \"title\": \"Default column visibility\",\n                \"type\": \"string\",\n                \"default\": \"visible\"\n            },\n            \"columnSelectionToDisplay\": {\n                \"title\": \"Column selection in 'Columns to Display'\",\n                \"type\": \"string\",\n                \"default\": \"enabled\"\n            },\n            \"columnExportOption\": {\n                \"title\": \"Include column in export\",\n                \"type\": \"string\",\n                \"default\": \"onlyVisible\"\n            }\n        },\n        \"required\": []\n    },\n    \"form\": [\n        \"columnWidth\",\n        \"useCellStyleFunction\",\n        {\n            \"key\": \"cellStyleFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entity/cell_style_fn\",\n            \"condition\": \"model.useCellStyleFunction === true\"\n        },\n        \"useCellContentFunction\",\n        {\n            \"key\": \"cellContentFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entity/cell_content_fn\",\n            \"condition\": \"model.useCellContentFunction === true\"\n        },\n        {\n            \"key\": \"defaultColumnVisibility\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [\n                {\n                    \"value\": \"visible\",\n                    \"label\": \"Visible\"\n                },\n                {\n                    \"value\": \"hidden\",\n                    \"label\": \"Hidden\"\n                }    \n            ]\n        },\n        {\n            \"key\": \"columnSelectionToDisplay\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [\n                {\n                    \"value\": \"enabled\",\n                    \"label\": \"Enabled\"\n                },\n                {\n                    \"value\": \"disabled\",\n                    \"label\": \"Disabled\"\n                }    \n            ]\n        },\n        {\n            \"key\": \"columnExportOption\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [\n                {\n                    \"value\": \"always\",\n                    \"label\": \"Always\"\n                },\n                {\n                    \"value\": \"onlyVisible\",\n                    \"label\": \"Only if column visible\"\n                },\n                {\n                    \"value\": \"never\",\n                    \"label\": \"Never\"\n                }     \n            ]\n        }\n    ]\n}",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"entityAliasId\":null,\"filterId\":null,\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{\"columnWidth\":\"0px\",\"useCellStyleFunction\":false,\"useCellContentFunction\":false,\"defaultColumnVisibility\":\"visible\",\"columnSelectionToDisplay\":\"enabled\",\"columnExportOption\":\"onlyVisible\",\"cellStyleFunction\":\"console.log(value,entity,ctx)\"},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\",\"units\":null,\"decimals\":null,\"usePostProcessing\":null,\"postFuncBody\":null},{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Cos\",\"color\":\"#4caf50\",\"settings\":{},\"_hash\":0.32819776211432106,\"funcBody\":\"return Math.round(1000*Math.cos(time/5000));\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{\"enableSearch\":false,\"enableSelectColumnDisplay\":false,\"enableStickyHeader\":true,\"enableStickyAction\":true,\"reserveSpaceForHiddenAction\":\"true\",\"displayEntityName\":true,\"displayEntityLabel\":false,\"displayEntityType\":true,\"displayPagination\":true,\"defaultPageSize\":10,\"defaultSortOrder\":\"entityName\",\"useRowStyleFunction\":false,\"entityNameColumnTitle\":\"Name\",\"actionIcons\":[{\"icon\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFNSURBVHgB1VVNToNQEB6wCSxZuqwnUBMOADfwBtYdsJEb2N6ADQk74w28QVm6YKE3wBu8JZAQ/Ma0hlT7Oo+YtP0S8n6YmW/mzfeA6NxhSYyiKFpYlnWPaaAxK4dheCiKojYiSJLkCY5LEsK27UWe5y8iAmQeIPM1mUE5jnOVZZn6JjxgfEfm8Jqm+fHTEiD7a5qGuYjgP2BKoFgpGGupw5QKSjTxFuO7xNiUwGNVoYkeSEIJyWw7ieOYO/84fonjYD2v/nJkGaZpGrZtyzK+oT2wR8EUCdH3vTdaejpb7UVDVZxdsLNdI5nQdV3Vdd0a81/ZY2+FT8aS56Y9OBh8F8ZNxhNIgzNmZAZW0TOCix2Oe5OR6QdNQy0iAF7JHCz3cru40FlWVVX7vo9jtwISAlXHkGgpItiQlCD5BMkcy8s9Zpz12+aXOaXqE8YX0lSElJoKhgoAAAAASUVORK5CYII=\",\"name\":\"Login As Customer\"}]},\"title\":\"NPTable\",\"showTitleIcon\":false,\"titleTooltip\":\"\",\"dropShadow\":false,\"enableFullscreen\":false,\"enableDataExport\":false,\"widgetStyle\":{},\"widgetCss\":\".mat-sort-header-content{\\nfont-family: 'Inter';\\nfont-style: normal;\\nfont-weight: 500;\\nfont-size: 16px;\\nline-height: 19px;\\ntext-transform: capitalize;\\ncolor: #000000;\\n}\\n\\n.mat-cell, .mat-header-cell {\\n  border: none !important;\\n}\",\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"noDataDisplayMessage\":\"\",\"showLegend\":false,\"actions\":{\"actionCellButton\":[{\"name\":\"Login As Customer\",\"icon\":\"more_horiz\",\"useShowWidgetActionFunction\":null,\"showWidgetActionFunction\":\"return true;\",\"type\":\"custom\",\"customFunction\":\"console.log(\\\"Test\\\")\",\"openInSeparateDialog\":false,\"openInPopover\":false,\"id\":\"705d68f0-297c-08d9-b073-cff5a560c956\"}]}}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214591793,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b106a10-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "nptable2",
    "name" : "NPTable2",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 9,
      "sizeY" : 5.5,
      "resources" : [ {
        "url" : "static/thingsboard-extension-widgets.js",
        "isModule" : true
      } ],
      "templateHtml" : "<nt2-entities-table-widget  [ctx]=\"ctx\">\n</nt2-entities-table-widget>\n<!--<tb-example></tb-example>--> \n      <!--<div class=\"content\">-->     \n    <!--.slice(tablePagination.getFrom(),   tablePagination.getTo())-->     \n<!--    <table  mat-table-->    \n<!--        [dataSource]=\"tableData\"-->  \n<!--        id=\"reportTable\" *ngIf='tablePagination!==undefined'>-->\n<!--        <ng-container *ngFor=\"let item of ctx.datasources[0].dataKeys\">-->\n<!--            <ng-container [matColumnDef]=\"item._hash.toString()\">-->\n<!--                <th mat-header-cell *matHeaderCellDef> {{item.label}}</th>--> \n                <!--<td mat-cell *matCellDef=\"let element\">{{element}} </td>-->\n<!--            <td mat-cell *matCellDef=\"let element\">{{element[item._hash]}}</td>-->\n\n<!--            </ng-container>-->\n<!--       </ng-container>-->\n\n        <!--<ng-container matColumnDef=\"name\">-->\n        <!--    <th mat-header-cell *matHeaderCellDef> Name</th>-->\n        <!--    <td mat-cell *matCellDef=\"let element\">{{element.name}}</td>-->\n        <!--</ng-container>-->\n<!--        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>-->\n<!--        <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>-->\n<!--    </table>-->\n\n<!--</div>-->\n<!--<mat-paginator *ngIf='tablePagination!==undefined'-->\n<!--    [length]=\"tableData.length\"-->\n<!--    [pageSize]=\"tablePagination.pageSize\"-->\n<!--    [pageSizeOptions]=\"tablePagination.pageSizeOptions\"-->\n<!--    (page)=\"tablePagination.handler($event)\"-->\n<!--    aria-label=\"Select page\" showFirstLastButtons=\"true\">-->\n<!--</mat-paginator>-->",
      "templateCss" : "/*#container {*/\n/*    height: 100%;*/\n/*    display: flex !important;*/\n/*    flex-direction: column;*/\n/*}*/\n.content {\n  flex: 1;\n  overflow: auto;\n}",
      "controllerScript" : "self.onInit = function() {\n    console.log(self.ctx)  \n}  \nself.onDataUpdated = function() { \n    self.ctx.$scope.entitiesTableWidget.onDataUpdated();\n}\nself.typeParameters = function() { \n    return {    \n        maxDatasources: 1, \n        hasDataPageLink: true,  \n        warnOnPageDataOverflow: false,\n        dataKeysOptional: true\n    };\n} \n  \nself.actionSources = function() {\n    return {\n        'actionCellButton': {\n            name: 'widget-action.action-cell-button',\n            multiple: true,\n            hasShowCondition: true\n        },\n        'rowClick': {\n            name: 'widget-action.row-click',\n            multiple: false\n        },\n        'rowDoubleClick': {\n            name: 'widget-action.row-double-click',\n            multiple: false\n        }\n    };\n}\n\nself.onResize = function() {\n\n}\n\nself.onDestroy = function() {}\n\n// self.onInit = function() {\n//     console.log(window,self.ctx)  \n//     // self.importFiles=[ \n//     //     \"https://unpkg.com/rxjs@^7/dist/bundles/rxjs.umd.min.js\",\n//     //     \"https://unpkg.com/@angular/core@12.0.0/bundles/core.umd.js\",\n\n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk.umd.js\", \n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk-collections.umd.js\",\n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk-bidi.umd.js\",\n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk-scrolling.umd.js\", \n//     //     \"https://unpkg.com/@angular/cdk@12.0.0/bundles/cdk-table.umd.js\",\n\n//     //     \"https://unpkg.com/@angular/material@12.0.0/bundles/material-table.umd.js\"\n//     // ]\n//     // self.loadFiles(0); \n//     // console.log(self.ctx.$scope.$injector.get(self.ctx.servicesMap.set('userPermissionsService')).userPermissions); \n//     // self.ctx.$scope.displayedColumns=self.ctx.datasources[0].dataKeys.map(e=>e._hash.toString());    \n\n//     //      const tableData = [ ] // Your data     \n//     // const tablePagination = { \n//     //     pageIndex: 0, \n//     //     pageSize: 10,\n//     //     pageSizeOptions: [10, 25,50, 100], \n//     //     handler: (pagination) => {  \n//     //         const { pageIndex, pageSize } = pagination;\n//     //         if (pageSize !== undefined) {  \n//     //             tablePagination.pageSize = pageSize; \n//     //         }\n//     //         if (pageIndex !== undefined) {\n//     //             tablePagination.pageIndex = pageIndex;\n//     //         }\n//     //     },\n//     //     getFrom: () => {\n//     //         const { pageIndex, pageSize } = tablePagination;\n//     //         return pageIndex * pageSize;\n//     //     }, \n//     //     getTo: () => {\n//     //         const { pageIndex, pageSize } = tablePagination;\n//     //         return pageIndex * pageSize + pageSize;\n//     //     }\n//     // }\n\n//     // const { $scope } = self.ctx\n//     // $scope.tableData = new window.rxjs.BehaviorSubject([]);\n//     // $scope.tablePagination = tablePagination \n//     // var  matTable=$(\"#reportTable\");\n//     // console.log(matTable)\n// }\n// self.loadFiles=function(n){\n//     if(self.importFiles[n]!==undefined){\n//         $.getScript(self.importFiles[n], function() {\n//             self.loadFiles(n+1);\n//         });        \n//     }\n\n// }\n\n// self.onDataUpdated = function() {\n//         // console.log(self.ctx,window,window.ng)   \n\n//     // var tableData=[];\n//     // for (var i = 0; i < self.ctx.data.length/self.ctx.datasources[0].dataKeys.length; i++ ) {\n//     //     var rowData={}\n//     //     self.ctx.datasources[0].dataKeys.forEach(function(key,index){\n//     //         if(self.ctx.data[i+index].data.length>=1){\n//     //             rowData[key._hash.toString()]=self.ctx.data[i+index].data[0][1]\n//     //         }\n//     //     })\n//     //     tableData.push(rowData)\n//     // }  \n//     // // self.ctx.$scope.tableData = tableData\n//     // self.ctx.$scope.tableData.next([...tableData]);\n//     // // self.ctx.detectChanges();\n\n// }",
      "settingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"EntitiesTableSettings\",\n        \"properties\": {\n            \"entitiesTitle\": {\n                \"title\": \"Entities table title\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"enableSearch\": {\n                \"title\": \"Enable entities search\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"enableSelectColumnDisplay\": {\n                \"title\": \"Enable select columns to display\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"enableStickyHeader\": {\n                \"title\": \"Always display header\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"enableStickyAction\": {\n                \"title\": \"Always display actions column\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"reserveSpaceForHiddenAction\": {\n                \"title\": \"Hidden cell button actions display mode\",\n                \"type\": \"string\",\n                \"default\": \"true\"\n            },\n            \"displayEntityName\": {\n                \"title\": \"Display entity name column\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"entityNameColumnTitle\": {\n                \"title\": \"Entity name column title\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"displayEntityLabel\": {\n                \"title\": \"Display entity label column\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"entityLabelColumnTitle\": {\n                \"title\": \"Entity label column title\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"displayEntityType\": {\n                \"title\": \"Display entity type column\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"displayPagination\": {\n                \"title\": \"Display pagination\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"defaultPageSize\": {\n                \"title\": \"Default page size\",\n                \"type\": \"number\",\n                \"default\": 10\n            },\n            \"defaultSortOrder\": {\n                \"title\": \"Default sort order\",\n                \"type\": \"string\",\n                \"default\": \"entityName\"\n            },\n            \"useRowStyleFunction\": {\n                \"title\": \"Use row style function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"rowStyleFunction\": {\n                \"title\": \"Row style function: f(entity, ctx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"engineActions\": {\n                \"title\": \"Engine Actions Comma seperated\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            }\n            ,\n            \"deviceActions\": {\n                \"title\": \"Device Actions Comma seperated\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"actionIcons\": {\n                \"type\": \"array\",\n                \"title\": \"Action Icons\",\n                \"items\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"name\": {\n                            \"title\": \"Name\",\n                            \"type\": \"string\"\n\n                        },\n                        \"icon\": {\n                            \"title\": \"Name\",\n                            \"type\": \"string\"\n\n                        }\n                }\n                }\n\n            }\n        },\n        \"required\": []\n    },\n    \"form\": [\n        \"entitiesTitle\",\n        \"enableSearch\",\n        \"enableSelectColumnDisplay\",\n        \"enableStickyHeader\",\n        \"enableStickyAction\",\n        {\n          \"key\": \"reserveSpaceForHiddenAction\",\n          \"type\": \"rc-select\",\n          \"multiple\": false,\n          \"items\": [\n            {\n              \"value\": \"true\",\n              \"label\": \"Show empty space instead of hidden cell button action\"\n            },\n            {\n              \"value\": \"false\",\n              \"label\": \"Don't reserve space for hidden action buttons\"\n            }\n          ]\n        },\n        \"displayEntityName\",\n        \"entityNameColumnTitle\",\n        \"displayEntityLabel\",\n        \"entityLabelColumnTitle\",\n        \"displayEntityType\",\n        \"displayPagination\",\n        \"defaultPageSize\",\n        \"defaultSortOrder\",\n        \"useRowStyleFunction\",\n        {\n            \"key\": \"rowStyleFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entity/row_style_fn\",\n            \"condition\": \"model.useRowStyleFunction === true\"\n        },\n        \"engineActions\",\n        \"deviceActions\",\n        {\n            \"key\": \"actionIcons\",\n            \"add\": \"New\",\n            \"style\": {\n                \"add\": \"btn-success\"\n            },\n            \"items\": [\n                {\n                    \"key\": \"actionIcons[].name\",\n                    \"type\": \"text\"\n                },\n                {\n                    \"key\": \"actionIcons[].icon\",\n                    \"type\": \"image\"\n                }\n\n            ]\n        }\n    ]\n}",
      "dataKeySettingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"DataKeySettings\",\n        \"properties\": {\n            \"columnWidth\": {\n                \"title\": \"Column width (px or %)\",\n                \"type\": \"string\",\n                \"default\": \"0px\"\n            },\n            \"useCellStyleFunction\": {\n                \"title\": \"Use cell style function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"cellStyleFunction\": {\n                \"title\": \"Cell style function: f(value, entity, ctx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"useCellContentFunction\": {\n                \"title\": \"Use cell content function\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"cellContentFunction\": {\n                \"title\": \"Cell content function: f(value, entity, ctx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"defaultColumnVisibility\": {\n                \"title\": \"Default column visibility\",\n                \"type\": \"string\",\n                \"default\": \"visible\"\n            },\n            \"columnSelectionToDisplay\": {\n                \"title\": \"Column selection in 'Columns to Display'\",\n                \"type\": \"string\",\n                \"default\": \"enabled\"\n            },\n            \"columnExportOption\": {\n                \"title\": \"Include column in export\",\n                \"type\": \"string\",\n                \"default\": \"onlyVisible\"\n            }\n        },\n        \"required\": []\n    },\n    \"form\": [\n        \"columnWidth\",\n        \"useCellStyleFunction\",\n        {\n            \"key\": \"cellStyleFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entity/cell_style_fn\",\n            \"condition\": \"model.useCellStyleFunction === true\"\n        },\n        \"useCellContentFunction\",\n        {\n            \"key\": \"cellContentFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entity/cell_content_fn\",\n            \"condition\": \"model.useCellContentFunction === true\"\n        },\n        {\n            \"key\": \"defaultColumnVisibility\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [\n                {\n                    \"value\": \"visible\",\n                    \"label\": \"Visible\"\n                },\n                {\n                    \"value\": \"hidden\",\n                    \"label\": \"Hidden\"\n                }    \n            ]\n        },\n        {\n            \"key\": \"columnSelectionToDisplay\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [\n                {\n                    \"value\": \"enabled\",\n                    \"label\": \"Enabled\"\n                },\n                {\n                    \"value\": \"disabled\",\n                    \"label\": \"Disabled\"\n                }    \n            ]\n        },\n        {\n            \"key\": \"columnExportOption\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [\n                {\n                    \"value\": \"always\",\n                    \"label\": \"Always\"\n                },\n                {\n                    \"value\": \"onlyVisible\",\n                    \"label\": \"Only if column visible\"\n                },\n                {\n                    \"value\": \"never\",\n                    \"label\": \"Never\"\n                }     \n            ]\n        }\n    ]\n}",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"entityAliasId\":null,\"filterId\":null,\"dataKeys\":null}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{\"enableSearch\":false,\"enableSelectColumnDisplay\":false,\"enableStickyHeader\":true,\"enableStickyAction\":true,\"reserveSpaceForHiddenAction\":\"true\",\"displayEntityName\":true,\"displayEntityLabel\":false,\"displayEntityType\":false,\"displayPagination\":true,\"defaultPageSize\":10,\"defaultSortOrder\":\"entityName\",\"useRowStyleFunction\":false,\"entityNameColumnTitle\":\"Name\",\"actionIcons\":[{\"icon\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFNSURBVHgB1VVNToNQEB6wCSxZuqwnUBMOADfwBtYdsJEb2N6ADQk74w28QVm6YKE3wBu8JZAQ/Ma0hlT7Oo+YtP0S8n6YmW/mzfeA6NxhSYyiKFpYlnWPaaAxK4dheCiKojYiSJLkCY5LEsK27UWe5y8iAmQeIPM1mUE5jnOVZZn6JjxgfEfm8Jqm+fHTEiD7a5qGuYjgP2BKoFgpGGupw5QKSjTxFuO7xNiUwGNVoYkeSEIJyWw7ieOYO/84fonjYD2v/nJkGaZpGrZtyzK+oT2wR8EUCdH3vTdaejpb7UVDVZxdsLNdI5nQdV3Vdd0a81/ZY2+FT8aS56Y9OBh8F8ZNxhNIgzNmZAZW0TOCix2Oe5OR6QdNQy0iAF7JHCz3cru40FlWVVX7vo9jtwISAlXHkGgpItiQlCD5BMkcy8s9Zpz12+aXOaXqE8YX0lSElJoKhgoAAAAASUVORK5CYII=\",\"name\":\"Login As Customer\"}],\"entitiesTitle\":\"NPTable2\"},\"title\":\"NPTable2\",\"showTitleIcon\":false,\"titleTooltip\":\"\",\"dropShadow\":false,\"enableFullscreen\":false,\"enableDataExport\":false,\"widgetStyle\":{},\"widgetCss\":\".mat-sort-header-content{\\nfont-family: 'Inter';\\nfont-style: normal;\\nfont-weight: 500;\\nfont-size: 16px;\\nline-height: 19px;\\ntext-transform: capitalize;\\ncolor: #000000;\\n}\\n\\n.mat-cell, .mat-header-cell {\\n  border: none !important;\\n}\",\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"noDataDisplayMessage\":\"\",\"showLegend\":false,\"actions\":{\"actionCellButton\":[{\"name\":\"Login As Customer\",\"icon\":\"more_horiz\",\"useShowWidgetActionFunction\":null,\"showWidgetActionFunction\":\"return true;\",\"type\":\"custom\",\"customFunction\":\"console.log(\\\"Test\\\")\",\"openInSeparateDialog\":false,\"openInPopover\":false,\"id\":\"705d68f0-297c-08d9-b073-cff5a560c956\"}]}}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214591952,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b28ad00-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "nt_dropdown",
    "name" : "NT-EntityDropDown",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 5.5,
      "sizeY" : 3,
      "resources" : [ {
        "url" : "https://cdnjs.cloudflare.com/ajax/libs/rxjs/6.1.0/rxjs.umd.js"
      } ],
      "templateHtml" : "<form class=\"example-form ntForm\" *ngIf=\"myControl!==undefined\" >\r\n    <div class=\"ntInputControl\" >\r\n    <div class=\"ntInputFieldLabel\" style=\"text-align:left\">{{ctx.widgetConfig.title}}</div>\r\n\r\n  <mat-form-field class=\"ntntFormFieldAutoCompleteDropdown\" fxFill>\r\n    <input type=\"text\"\r\n           aria-label=\"Number\"\r\n           matInput\r\n           [formControl]=\"myControl\"\r\n           [matAutocomplete]=\"auto\" \r\n           >\r\n      <button *ngIf=\"myControl\" matSuffix mat-icon-button aria-label=\"Clear\" (click)=\"ctx.onClear()\">\r\n        <mat-icon>close</mat-icon> \r\n      </button>\r\n    <mat-autocomplete autoActiveFirstOption #auto=\"matAutocomplete\" [displayWith]=\"ctx.getDisplay\"\r\n    (optionSelected)='ctx.onItemselected($event.option.value)'\r\n    >\r\n      <mat-option [value]=\"'All'\" *ngIf=\"ctx.settings.displayAll!=false\">\r\n        All\r\n      </mat-option>\r\n      <mat-option *ngFor=\"let option of filteredOptions | async\" [value]=\"option\" >\r\n            {{option.entityLabel}}      \r\n      </mat-option>\r\n    </mat-autocomplete>\r\n  </mat-form-field>\r\n  </div>\r\n</form>",
      "templateCss" : "#container{\n      overflow: hidden; /* Hide scrollbars */\n\n}",
      "controllerScript" : "self.onInit = function() { \n    \n    \n  self.ctx.$scope.myControl = self.ctx.$scope.fb.control(ctx.settings.displayAll!=false?'All':'');\n  self.ctx.$scope.filteredOption=[];  \n    // filter ption in auto complete\n   self.ctx.$scope.filteredOptions = self.ctx.$scope.myControl.valueChanges.pipe(\n       window.rxjs.operators.startWith(''),\n       window.rxjs.operators\n            .map( \n                value => self._filter(value)) \n        );\n        self.ctx.onClear=function(){\n            self.ctx.$scope.myControl.patchValue(\"\");\n        }\n        \n    //execute on item selected action\n    self.ctx.onItemselected=function(value){\n        ButtonActionDescriptor=ctx.actionsApi.getActionDescriptors('OnOptionSelected')[0]\n          if(ButtonActionDescriptor!=undefined){\n            self.ctx.actionsApi.handleWidgetAction(\n            null, ButtonActionDescriptor, null,\n            null,value);                          \n          }\n    }\n    //function to display label or static string\n    self.ctx.getDisplay=function(option) { \n        if(typeof(option)!==\"string\" && option.entityName){\n            return option.entityLabel;\n        }\n        else {\n            return option\n        }\n    }\n\n}\n \n// filter values on type\nself._filter=function(value){ \n    var filterValue=\"\";\n    if(value.entityName!==undefined){\n        filterValue=value.entityName.toLowerCase()\n    }  \n    else{\n        filterValue=value.toLowerCase()\n    }\n    return self.ctx.datasources.filter(option => option.entityName.toLowerCase().includes(filterValue)\n    );\n}\n\nself.onDataUpdated = function() {\n    // console.log(self.ctx)\n}\n\nself.typeParameters=function(){\n       return {\n        // maxDatasources: -1, // Maximum allowed datasources for this widget, -1 - unlimited\n        maxDataKeys: -1, //Maximum allowed data keys for this widget, -1 - unlimited\n        dataKeysOptional: true, //Whether this widget can be configured with datasources without data keys\n        useCustomDatasources:true\n    } \n}\nself.actionSources = function() {\n    // action of on option selected\n    return {\n        'OnOptionSelected': {\n            name: 'OnOptionSelected',\n            multiple: false\n        }\n    };\n}\nself.onResize = function() {\n}\n\nself.onDestroy = function() {\n}\n",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"Setting\",\r\n        \"properties\": {\r\n            \"displayAll\": {\r\n                \"title\": \"Display All Option\",\r\n                \"type\": \"boolean\",\r\n                \"default\":\"true\"\r\n\r\n            }\r\n        }\r\n    },\r\n    \"form\": [\r\n        {\r\n            \"key\": \"displayAll\"\r\n        }\r\n        ]\r\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"NT-EntityDropDown\",\"showTitleIcon\":false,\"dropShadow\":false,\"enableFullscreen\":false,\"enableDataExport\":false,\"widgetStyle\":{},\"widgetCss\":\"\",\"noDataDisplayMessage\":\"\",\"showLegend\":false,\"actions\":{\"OnOptionSelected\":[{\"name\":\"onItemSelected\",\"icon\":\"more_horiz\",\"useShowWidgetActionFunction\":null,\"showWidgetActionFunction\":\"return true;\",\"type\":\"custom\",\"customFunction\":\"console.log(additionalParams)\",\"openInSeparateDialog\":false,\"openInPopover\":false,\"id\":\"eb936634-06ed-19b2-86c0-9bf50a924a82\"}]}}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214591949,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b2837d0-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "static_drop_down",
    "name" : "Static Drop Down",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "static",
      "sizeX" : 7.5,
      "sizeY" : 3,
      "resources" : [ ],
      "templateHtml" : "<form class=\"example-form ntForm\" >\r\n    <div class=\"ntInputControl\" >\r\n    <div class=\"ntInputFieldLabel\" style=\"text-align:left\">{{ctx.widgetConfig.title}}</div>\r\n\r\n  <mat-form-field class=\"ntntFormFieldAutoCompleteDropdown\" fxFill>\r\n      <mat-select [(ngModel)]=\"ctx.defaultSelected\" (selectionChange)=\"onItemSelected($event)\"> \r\n        <mat-option *ngFor=\"let option of ctx.settings.options\" [value]=\"option.name\">{{option.name}}</mat-option>\r\n      </mat-select>\r\n  </mat-form-field>\r\n  </div>\r\n</form>",
      "templateCss" : "",
      "controllerScript" : "self.onInit = function() {\n    self.ctx.$scope.onInitValue = new Function([\"widgetContext\"], self.ctx.settings.onInitValue)\n    self.ctx.defaultSelected=self.ctx.$scope.onInitValue(self.ctx)\n\n    self.ctx.$scope.onItemSelected=function(evt){\n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'onItemSelected');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[0], undefined,\n                    undefined,\n                    evt.value);\n            }\n\n    }\n} \n\nself.actionSources = function() {\n    return {\n        'onItemSelected': {\n            name: 'onItemSelected',\n            multiple: false\n        }\n    };\n}\n\nself.onDestroy = function() {\n}\n",
      "settingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \"onInitValue\":{\n                \"title\": \"Default Selected Function(widgetContext)\",\n                \"type\": \"string\"\n            },\n            \"options\": {\n                \"type\": \"array\",\n                \"title\": \"Options\",\n                \"items\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"name\": {\n                            \"title\": \"Name\",\n                            \"type\": \"string\"\n                        }\n                    }\n                }\n\n            }\n        }\n    },\n    \"form\": [\n        {\n                \"key\": \"onInitValue\",\n                \"type\": \"javascript\"\n            },\n        {\n        \"key\": \"options\",\n        \"add\": \"New\",\n        \"style\": {\n            \"add\": \"btn-success\"\n        },\n        \"items\": [\n\n            {\n                \"key\": \"options[].name\",\n                \"type\": \"text\"\n\n            }\n\n        ]\n    }]\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"static\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"rgb(255, 255, 255)\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"options\":[{\"name\":\"All\"},{\"name\":\"Active\"},{\"name\":\"Inactive\"}],\"onInitValue\":\"return \\\"All\\\"\"},\"title\":\"Static Drop Down\",\"dropShadow\":false,\"enableFullscreen\":false,\"enableDataExport\":true,\"widgetStyle\":{},\"widgetCss\":\"\",\"noDataDisplayMessage\":\"\",\"showLegend\":false,\"actions\":{\"onItemSelected\":[{\"name\":\"Item selected\",\"icon\":\"more_horiz\",\"useShowWidgetActionFunction\":null,\"showWidgetActionFunction\":\"return true;\",\"type\":\"custom\",\"customFunction\":\"console.log(\\\"Item selected: \\\",additionalParams)\",\"openInSeparateDialog\":false,\"openInPopover\":false,\"id\":\"b967aac7-874a-d6ab-45c9-989bbffcf6cb\"}]},\"showTitleIcon\":false,\"titleTooltip\":\"\",\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400}}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214592027,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b341eb0-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "test3d",
    "name" : "AddThreejs3DItem",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 9.5,
      "sizeY" : 7,
      "resources" : [ ],
      "templateHtml" : "\r\n<mat-progress-bar mode=\"indeterminate\" *ngIf=\"modelLoaded==false\"></mat-progress-bar>\r\n    <canvas id=\"c\" ></canvas>\r\n",
      "templateCss" : "#tooltip {\r\n  position: fixed;\r\n  left: 0;\r\n  top: 0;\r\n  min-width: 100px;\r\n  text-align: center;\r\n  padding: 5px 12px;\r\n  font-family: monospace;\r\n  background: #a0c020;\r\n  display: none;\r\n  opacity: 0;\r\n  border: 1px solid black;\r\n  box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.5);\r\n  transition: opacity 0.25s linear;\r\n  border-radius: 3px;\r\n}\r\n\r\n.label {\r\n  color: #FFF;\r\n  background-color: #333;\r\n  border: 1px solid green;\r\n  padding: 10px;\r\n\r\n}\r\n",
      "controllerScript" : "self.onInit = function() {\r\n    console.log(self.ctx) \r\n    self.ctx.$scope.modelLoaded=false;\r\n    {\r\n    self.ctx.$scope.onResourceLoad =\r\n        new Function([\"resource\",\"response\",\"modelObject\",\"widgetContext\"], self.ctx.settings.onresourceLoad);\r\n        \r\n    self.ctx.$scope.onObjectHover =\r\n        new Function([\"event\",\"intersect\",\"object\",\"modelObject\",\"widgetContext\"], self.ctx.settings.onObjectHover);\r\n    self.ctx.$scope.onObjectClick =\r\n        new Function([\"event\",\"intersect\",\"object\",\"modelObject\",\"widgetContext\"], self.ctx.settings.onObjectClick);\r\n    self.ctx.$scope.onDataUpdated =\r\n        new Function([\"modelObject\",\"widgetContext\"], self.ctx.settings.onDataUpdated);\r\n    self.ctx.$scope.toScreenPosition = self.toScreenPosition\r\n    }\r\n    \r\n    self.ctx.exclode=function(distance){\r\n          var centers = [];\r\n          self.ctx.modelObject.scene.traverse(function(i) {\r\n              if(i.isMesh){\r\n                  \r\n                i.geometry.computeBoundingSphere();\r\n                centers.push(i.geometry.boundingSphere.center);\r\n              }\r\n          });\r\n          // Average the centers of the various parts to find the center of them all together\r\n          var center = new THREE.Vector3();\r\n          centers.forEach(function(vec){\r\n            center = center.add(vec);\r\n          });\r\n          center.x /= centers.length;\r\n          center.y /= centers.length;\r\n          center.z /= centers.length;\r\n\r\n        self.ctx.modelObject.scene.traverse(\r\n            function(object) {\r\n                if (object.isMesh) {\r\n                    var childCenter = object.geometry.boundingSphere.center.clone();\r\n                    var direction = childCenter.sub(center);\r\n                    direction = direction.normalize();\r\n                    object.translateOnAxis(direction, distance);\r\n                    \r\n\r\n                }\r\n        });\r\n\r\n    }\r\n    self.ctx.modelObject = {};\r\n    self.ctx.modelObject.exclodedValue=0;\r\n    self.ctx.modelObject.canvas = document.querySelector('#c');\r\n\r\n    loadResources()\r\n    \r\n}\r\n\r\nself.ntInit = function() {\r\n    self.ctx.modelObject.raycaster = new THREE.Raycaster();\r\n    self.ctx.modelObject.pointer = new THREE.Vector2();\r\n\r\n    self.ctx.modelObject.renderer = new THREE.WebGLRenderer({\r\n        canvas:self.ctx.modelObject.canvas\r\n    });\r\n    $(self.ctx.$container).append( self.ctx.modelObject.renderer.domElement );\r\n\r\n    self.ctx.modelObject.labelRenderer = new THREE.CSS2DRenderer();\r\n    self.ctx.modelObject.labelRenderer.setSize( self.ctx.width, self.ctx.height );\r\n    self.ctx.modelObject.labelRenderer.domElement.style.position = 'absolute';\r\n    self.ctx.modelObject.labelRenderer.domElement.style.top = '0px';\r\n    $(self.ctx.$container).append( self.ctx.modelObject.labelRenderer.domElement );\r\n\r\n\r\n    \r\n    self.ctx.modelObject.renderer.shadowMap.enabled = true;\r\n    self.ctx.modelObject.renderer.shadowMap.type = THREE\r\n        .PCFSoftShadowMap; // default THREE.PCFShadowMap\r\n    self.ctx.modelObject.renderer.setPixelRatio(window.devicePixelRatio);\r\n    self.ctx.modelObject.renderer.setSize(self.ctx.width, self.ctx.height);\r\n    self.ctx.modelObject.renderer.outputEncoding = THREE.sRGBEncoding;\r\n    const fov = 100;\r\n    const aspect = 2;\r\n    const near = 0.1;\r\n    const far = 1000;\r\n    self.ctx.modelObject.camera = new THREE.OrthographicCamera(self.ctx.width / -2, self.ctx.width / 2,\r\n        self.ctx.height / 2, self.ctx.height /\r\n        -2, near, far);\r\n    self.ctx.modelObject.camera.position.set(90, 90, 200);\r\n    self.ctx.modelObject.camera.layers.enableAll();\r\n\r\n    self.ctx.modelObject.controls = new THREE.OrbitControls(self.ctx.modelObject.camera,\r\n        self.ctx.modelObject.labelRenderer.domElement);\r\n    self.ctx.modelObject.controls.target.set(0, 0, 0);\r\n    self.ctx.modelObject.controls.update(); \r\n    self.ctx.modelObject.scene = new THREE.Scene();\r\n    self.ctx.modelObject.scene.background = new THREE\r\n        .Color('white'); \r\n    self.ctx.modelObject.scene.add(self.ctx.modelObject.camera);    \r\n\r\n    {\r\n        const color = 0xFFFFFF;\r\n        const intensity = 1.0;\r\n        light = new THREE.DirectionalLight(color,\r\n            intensity);\r\n        light.position.set(-200, -100, -100);\r\n        light.castShadow = true;\r\n\r\n        light.target.position.set(0,  0, 0);\r\n        self.ctx.modelObject.scene.add(light);\r\n        self.ctx.modelObject.scene.add(light.target);\r\n        self.ctx.modelObject.camera.add(light)\r\n        // const helper = new THREE.DirectionalLightHelper( light, 50 );\r\n        // self.ctx.modelObject.scene.add( helper );\r\n\r\n    }\r\n\r\n    {\r\n        const color = 0xFFFFFF;\r\n        const intensity = 1.0;\r\n        light = new THREE.DirectionalLight(color,\r\n            intensity);\r\n        light.position.set(100, 200, -100);\r\n        light.castShadow = true;\r\n\r\n        light.target.position.set(0,  0, 0);\r\n        self.ctx.modelObject.scene.add(light);\r\n        self.ctx.modelObject.scene.add(light.target);\r\n        self.ctx.modelObject.camera.add(light)\r\n        // const helper = new THREE.DirectionalLightHelper( light, 50 );\r\n        // self.ctx.modelObject.scene.add( helper );\r\n\r\n    }\r\n\r\n\r\n    var threejsLoader;\r\n    if (self.ctx.settings.modelType == \"FBX\") {\r\n         threejsLoader = new THREE.FBXLoader();\r\n    } else if (self.ctx.settings.modelType == \"GLTF\") {\r\n         threejsLoader = new THREE.GLTFLoader();\r\n                  const dracoLoader = new THREE.DRACOLoader();\r\n         dracoLoader.setDecoderConfig({ type: 'js' });\r\n        dracoLoader.setDecoderPath('https://unpkg.com/three@0.128.0/examples/js/libs/draco/');\r\n        threejsLoader.setDRACOLoader( dracoLoader );\r\n    }\r\n    threejsLoader.requestHeader = { \"X-Authorization\": 'Bearer '+localStorage.getItem(\"jwt_token\") };\r\n\r\n        threejsLoader.load(\r\n            self.ctx.settings.modelurl,\r\n            (root) => {\r\n                if (self.ctx.settings.modelType == \"FBX\") {\r\n                    self.ctx.modelObject.scene.add(\r\n                    root);\r\n                } else if (self.ctx.settings.modelType == \"GLTF\") {\r\n                    self.ctx.modelObject.scene.add(root.scene);\r\n                    \r\n                    \r\n                }\r\n                \r\n                \r\n                    var bbox = new THREE.Box3().setFromObject(self.ctx.modelObject.scene);\r\n                    var width=bbox.max.z - bbox.min.z\r\n                    var height=bbox.max.x - bbox.min.x\r\n                    self.ctx.modelObject.scaller=self.ctx.width>=width?self.ctx.height/height: self.ctx.width/width\r\n                    //self.ctx.modelObject.camera.zoom=scaller*0.8\r\n                    //self.ctx.modelObject.scene.children[0].multiplyScalar(scaller);  \r\n                    self.ctx.modelObject.camera.zoom=self.ctx.modelObject.scaller*0.8\r\n\r\n                var materials = [];\r\n                self.ctx.modelObject.scene.traverse(\r\n                    function(object) {\r\n                        if (object.isMesh) {\r\n                            object.castShadow = true;\r\n                            // var earthMassDiv = document.createElement( 'div' );\r\n                            // earthMassDiv.className = 'label';\r\n                            // earthMassDiv.textContent =object.name;\r\n                            // const earthMassLabel = new THREE.CSS2DObject( earthMassDiv );\r\n                            // earthMassLabel.layers.set( 1 );\r\n                            // object.add(earthMassLabel)\r\n                            // object.layers.enableAll();\r\n                      }\r\n                        if (object.material)\r\n                            if (materials.find(\r\n                                    e => e\r\n                                    .name ==\r\n                                    object\r\n                                    .material\r\n                                    .name) ==\r\n                                undefined) {\r\n                                    \r\n                            //         var prevMaterial = object.material;\r\n                            // object.material = new THREE.MeshStandardMaterial();\r\n                            // THREE.MeshStandardMaterial.prototype.copy.call( object.material, prevMaterial );\r\n                                materials.push(\r\n                                    object\r\n                                    .material\r\n                                );\r\n\r\n                            }\r\n                    });                \r\n                self.ctx.modelObject.material =materials\r\n                self.loadTextures();          \r\n                // //self.ctx.modelObject.camera.zoom=scaller*0.8\r\n                // root.scene.scale.multiplyScalar(scaller);  \r\n                self.ctx.$scope.modelLoaded=true;\r\n                \r\n                self.ctx.detectChanges();\r\n                self.onDataUpdated();\r\n\r\n            },function(xhr){\r\n                    console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );\r\n                }\r\n            ,function(error){\r\n                    self.ctx.$scope.modelLoaded=true;\r\n                    self.ctx.detectChanges();\r\n                    self.ctx.showToast('error','Failed to load model',1000,'top','left',self.ctx.toastTargetId);\r\n\r\n\r\n            });\r\n\r\n    self.ctx.modelObject.resizeRendererToDisplaySize=function(renderer) {\r\n        const canvas = self.ctx.modelObject.renderer.domElement;\r\n\t\tconst width = canvas.width;\r\n\t\tconst height = canvas.height;\r\n\t\tconst needResize = self.ctx.width !== width || self.ctx.height !== height;\r\n\t\tif (needResize) {\r\n\t\t    renderer.setSize(self.ctx.width, self.ctx.height, false);\r\n\t\t}\r\n\t\treturn needResize;\r\n\t}\r\n    self.ctx.modelObject.render=function() {\r\n\t\tif (self.ctx.modelObject.resizeRendererToDisplaySize(self.ctx.modelObject.renderer))\r\n\t    {\r\n            self.ctx.modelObject.camera.aspect = self.ctx.width / self.ctx.height;\r\n\t\t\tself.ctx.modelObject.camera.updateProjectionMatrix();\r\n\t\t}\r\n        self.ctx.modelObject.raycaster.setFromCamera( self.ctx.modelObject.pointer, self.ctx.modelObject.camera );\r\n        requestAnimationFrame(self.ctx.modelObject.render);\r\n\r\n        // self.ctx.modelObject.camera.zoom=1\r\n        self.ctx.modelObject.labelRenderer.render(self.ctx.modelObject.scene,self.ctx.modelObject.camera)\r\n        self.ctx.modelObject.renderer.render(self.ctx.modelObject.scene,\r\n            self.ctx.modelObject.camera);\r\n        \r\n        self.ctx.modelObject.scene.traverse(function(e){\r\n            if (e.type==\"Object3D\" && (e.isCSS2DObject!=undefined && e.isCSS2DObject==true)){\r\n                var element = e.element;\r\n                element.style.transform=element.style.transform.replace(\" -50\", \" -100\");\r\n                // var style = 'translate(10px,10px) ';\r\n                // element.style.backgroundColor=\"#ff0000\";\r\n                // element.style.WebkitTransform = style;\r\n                // element.style.MozTransform = style;\r\n                // element.style.oTransform = style;\r\n                // element.style.transform = style;\r\n            }\r\n            \r\n        })\r\n        \r\n\r\n        \r\n\r\n    }\r\n    requestAnimationFrame(self.ctx.modelObject.render);\r\n    \r\n    \r\n    {\r\n    self.ctx.modelObject.labelRenderer.domElement.addEventListener('click', self.onObjectClick, false);\r\n\r\n\r\n    self.ctx.modelObject.labelRenderer.domElement.addEventListener('mousemove', self.onObjectMove, false);\r\n\r\n    // self.ctx.modelObject.renderer.domElement.addEventListener('mousemove', self.onObjectMove, false);\r\n\r\n    }\r\n\r\n\r\n    console.log(\"Init completed\")\r\n\r\n\r\n}\r\nself.onDataUpdated = function() {\r\n    self.ctx.$scope.onDataUpdated(self.ctx.modelObject,self.ctx)\r\n}\r\n\r\nself.onResize = function() {\r\n    // self.ctx.modelObject.camera.aspect = self.ctx.width/ self.ctx.height;\r\n    // self.ctx.modelObject.camera.updateProjectionMatrix();\r\n    if(self.ctx.modelObject.camera){\r\n    // if(self.ctx.modelObject.camera.inPerspectiveMode){\r\n    //     self.ctx.modelObject.camera.cameraP.aspect = self.ctx.width/ self.ctx.height;\r\n    //     self.ctx.modelObject.camera.cameraP.updateProjectionMatrix();\r\n    // }\r\n    // else{\r\n    //     self.ctx.modelObject.camera.left = self.ctx.width / - 2;\r\n    //     self.ctx.modelObject.camera.right = self.ctx.width / 2;\r\n    //     self.ctx.modelObject.camera.top = self.ctx.height / 2;\r\n    //     self.ctx.modelObject.camera.bottom = self.ctx.height / - 2;\r\n    //     self.ctx.modelObject.camera.updateProjectionMatrix();\r\n    // }\r\n        self.ctx.modelObject.camera.left = self.ctx.width / - 2;\r\n        self.ctx.modelObject.camera.right = self.ctx.width / 2;\r\n        self.ctx.modelObject.camera.top = self.ctx.height / 2;\r\n        self.ctx.modelObject.camera.bottom = self.ctx.height / - 2;\r\n        self.ctx.modelObject.camera.updateProjectionMatrix();\r\n\r\n    self.ctx.modelObject.renderer.setSize( self.ctx.width, self.ctx.height);\r\n\tself.ctx.modelObject.render();        \r\n    }\r\n\r\n\r\n}\r\nself.onEditModeChanged=function(){\r\n    self.onResize();\r\n}\r\nself.onDestroy = function() {}\r\n\r\n\r\n\r\nself.onObjectClick=function() {\r\n    event.preventDefault();\r\n    var intersects=self.getObjectFromEvent(event)\r\n    if (intersects.length > 0) {\r\n        self.ctx.$scope.onObjectClick(event,intersects,intersects[ 0 ].object,self.ctx.modelObject,self.ctx)\r\n    }\r\n    else if(self.ctx.modelObject.clickedObject!=undefined){\r\n        self.ctx.modelObject.clickedObject.traverse(function(e){\r\n            if (!e) return;\r\n            if(e.material){\r\n                // e.material.emissive=\"0xFF0000\"\r\n                e.material.emissive = new THREE.Color(163, 169, 133);\r\n                e.material.emissiveIntensity=0\r\n                e.material.needsUpdate=true;\r\n            }\r\n        })\r\n        var labelObject = self.ctx.modelObject.clickedObject.children.find(\r\n                            e => e.type == \"Object3D\" &&\r\n                            e.isCSS2DObject == true)\r\n        if (labelObject) {\r\n            labelObject.visible = false;\r\n        }\r\n        self.ctx.modelObject.clickedObject =undefined\r\n\r\n    }\r\n}\r\nself.onObjectMove=function() {\r\n    event.preventDefault();\r\n      event.stopPropagation(); // prevent event from bubbling up to .container\r\n\r\n    var intersects=self.getObjectFromEvent(event)\r\n    if (intersects.length > 0) {\r\n        self.ctx.$scope.onObjectHover(event,intersects,intersects[ 0 ].object,self.ctx.modelObject,self.ctx)\r\n    }\r\n    else if(self.ctx.modelObject.hoveredObject!=undefined){\r\n                        self.ctx.modelObject.hoveredObject.traverse(function(e){\r\n                    if (!e) return;\r\n                    if(e.material){\r\n                        // e.material.emissive=\"0xFF0000\"\r\n                        e.material.emissive = new THREE.Color(163, 169, 133);\r\n                        e.material.emissiveIntensity=0\r\n                        e.material.needsUpdate=true;\r\n                    }\r\n                })\r\n\r\n        var labelObject=self.ctx.modelObject.hoveredObject.children.find(e=>e.type==\"Object3D\" && e.isCSS2DObject==true)\r\n        if(labelObject){\r\n            labelObject.visible=false;\r\n        }\r\n        self.ctx.modelObject.hoveredObject=undefined\r\n    }\r\n}\r\n\r\nself.toScreenPosition=function(obj)\r\n{\r\n    var vector = new THREE.Vector3();\r\n    \r\n    // TODO: need to update this when resize window\r\n    var widthHalf = 0.5*self.ctx.modelObject.renderer.context.canvas.width;\r\n    var heightHalf = 0.5*self.ctx.modelObject.renderer.context.canvas.height;\r\n    \r\n    obj.updateMatrixWorld();\r\n    vector.setFromMatrixPosition(obj.matrixWorld);\r\n    vector.project(self.ctx.modelObject.camera);\r\n    \r\n    vector.x = ( vector.x * widthHalf ) + widthHalf;\r\n    vector.y = - ( vector.y * heightHalf ) + heightHalf;\r\n    \r\n    return { \r\n        x: vector.x,\r\n        y: vector.y\r\n    };\r\n\r\n}\r\nself.getObjectFromEvent=function(event){\r\n\r\n    self.ctx.modelObject.pointer = new THREE.Vector2();\r\n    self.ctx.modelObject.pointer.x = (event.offsetX / self.ctx.width) *2 - 1;\r\n    self.ctx.modelObject.pointer.y = -(event.offsetY / self.ctx.height) *2 + 1;\r\n\r\n    self.ctx.modelObject.raycaster.setFromCamera(self.ctx.modelObject.pointer, self.ctx.modelObject.camera);\r\n\r\n    var intersects = self.ctx.modelObject.raycaster.intersectObjects(self.ctx.modelObject.scene.children, true);    \r\n\r\n    return intersects;\r\n}\r\nself.loadTextures = function() {\r\n    const loader = new THREE.TextureLoader();\r\n    self.ctx.settings.resources.forEach(function(e) {\r\n        if (e.resourceType == \"Texture\") {\r\n            loader.load(e.url,\r\n                function(texture) {\r\n                    self.ctx.$scope.onResourceLoad(e,texture,self.ctx.modelObject,self.ctx)\r\n\r\n                },\r\n                undefined,\r\n                function(err) {\r\n                    console.error('An error happened.');\r\n                }\r\n            );\r\n        }\r\n    })\r\n}\r\n\r\n\r\n\r\n\r\nasync function loadResources() {\r\nawait loadScript('https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js')\r\n// await loadScript('https://threejs.org/examples/js/renderers/CSS3DRenderer.js')\r\nawait loadScript('https://unpkg.com/three@0.128.0/examples/js/loaders/FBXLoader.js')\r\nawait loadScript('https://unpkg.com/three@0.128.0/examples/js/loaders/GLTFLoader.js')\r\n\r\nawait loadScript('https://unpkg.com/three@0.142.0/examples/js/renderers/CSS2DRenderer.js')\r\nawait loadScript('https://cdn.jsdelivr.net/npm/fflate@0.7.3/umd/index.min.js')\r\nawait loadScript('https://cdn.jsdelivr.net/npm/three@0.121.1/examples/js/controls/OrbitControls.js')\r\nawait loadScript('https://unpkg.com/three@0.128.0/examples/js/loaders/DRACOLoader.js')\r\n\r\n    self.ntInit();\r\n}\r\n\r\nfunction loadScript(url) {\r\nreturn new Promise((resolve, reject) => {\r\ntry {\r\nvar script = document.createElement('script')\r\nscript.type = 'text/javascript'\r\nscript.src = url\r\ndocument.getElementsByTagName(\"head\")[0].appendChild(script)\r\n\r\n        script.onload = function () {\r\n            resolve(true)\r\n        }\r\n    } catch (e) {\r\n        console.log('loadScript: exception', e)\r\n        resolve(true)\r\n    }\r\n})\r\n}",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"Settings\",\r\n        \"properties\": {\r\n            \"modelurl\": {\r\n                \"title\": \"3D Model URL\",\r\n                \"type\": \"string\"\r\n            },\r\n            \"modelType\": {\r\n                \"title\": \"Model Type\",\r\n                \"type\": \"string\",\r\n                \"enum\": [\r\n                    \"GLTF\",\r\n                    \"FBX\"\r\n                ]\r\n            },\r\n            \"resources\": {\r\n                \"type\": \"array\",\r\n                \"title\": \"Resources\",\r\n                \"items\": {\r\n                    \"type\": \"object\",\r\n                    \"properties\": {\r\n                        \"resourceType\": {\r\n                            \"title\": \"Resource Type\",\r\n                            \"type\": \"string\",\r\n                            \"enum\": [\r\n                                \"Texture\"\r\n                            ]\r\n                        },\r\n                        \"url\": {\r\n                            \"title\": \"URL\",\r\n                            \"type\": \"string\"\r\n\r\n                        }\r\n                    }\r\n                }\r\n\r\n            },\r\n            \"onresourceLoad\":{\r\n                \"title\": \"On Resource Load(resource,response,modelObject,widgetContext)\",\r\n                \"type\": \"string\"\r\n            }\r\n            ,\r\n            \"onObjectHover\":{\r\n                \"title\": \"On Object Hover function(event,intersect,object,modelObject,widgetContext)\",\r\n                \"type\": \"string\"\r\n            },\r\n            \"onObjectClick\":{\r\n                \"title\": \"On Object Click function(event,intersect,object,modelObject,widgetContext)\",\r\n                \"type\": \"string\"\r\n            },\r\n            \"onDataUpdated\":{\r\n                \"title\": \"On Data Updated function(modelObject,widgetContext)\",\r\n                \"type\": \"string\"\r\n            },\r\n            \"ntColorObject\":{\r\n                \"type\": \"string\"\r\n            }\r\n                            \r\n\r\n        }\r\n    },\r\n    \"form\": [{\r\n            \"key\": \"modelType\",\r\n            \"type\": \"select\",\r\n            \"titleMap\": [{\r\n                    \"value\": \"GLTF\",\r\n                    \"name\": \"GLTF\"\r\n                },\r\n                {\r\n                    \"value\": \"FBX\",\r\n                    \"name\": \"FBX\"\r\n                }\r\n            ]\r\n        },\r\n        \"modelurl\",\r\n        {\r\n            \"key\": \"resources\",\r\n            \"add\": \"New\",\r\n            \"style\": {\r\n                \"add\": \"btn-success\"\r\n            },\r\n            \"items\": [\r\n\r\n\r\n                {\r\n                    \"key\": \"resources[].resourceType\",\r\n                    \"type\": \"select\",\r\n                    \"titleMap\": [{\r\n                            \"value\": \"Texture\",\r\n                            \"name\": \"Texture\"\r\n                        }\r\n\r\n                    ]\r\n                },\r\n                {\r\n                    \"key\": \"resources[].url\",\r\n                    \"type\": \"text\"\r\n\r\n                }\r\n\r\n\r\n            ]\r\n        },\r\n        {\r\n            \"key\":\"onresourceLoad\",\r\n            \"type\":\"javascript\"\r\n        }\r\n        ,\r\n        {\r\n            \"key\":\"onObjectHover\",\r\n            \"type\":\"javascript\"\r\n        }\r\n        ,\r\n        {\r\n            \"key\":\"onObjectClick\",\r\n            \"type\":\"javascript\"\r\n        }\r\n        ,\r\n        {\r\n            \"key\":\"onDataUpdated\",\r\n            \"type\":\"javascript\"\r\n        },\r\n        {\r\n            \"key\":\"ntColorObject\",\r\n            \"condition\":false,\r\n            \"type\":\"string\"\r\n        }\r\n\r\n    ]\r\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{\"modelType\":\"GLTF\",\"resources\":[],\"onresourceLoad\":\"// var robotMaterial=modelObject.material.find(e=>e.name==\\\"Robot\\\")\\n// var fireMaterial=modelObject.material.find(e=>e.name==\\\"Fire\\\")\\n// if(resource.url==\\\"https://tbdemo.nistantritech.com:7777/mechDrone/Drone_diff.jpeg\\\"){\\n//     robotMaterial.map = response;\\n//     robotMaterial.needsUpdate = true;\\n// }\\n// else if(resource.url==\\\"https://tbdemo.nistantritech.com:7777/mechDrone/Drone_ao.jpeg\\\"){\\n//     robotMaterial.aoMap = response;\\n//     robotMaterial.needsUpdate = true;\\n    \\n// }\\n\\n\\n\\n// else if(resource.url==\\\"https://tbdemo.nistantritech.com:7777/mechDrone/Drone_emissive.jpeg\\\"){\\n//     robotMaterial.emissiveMap = response;\\n//     robotMaterial.needsUpdate = true;\\n    \\n// }\\n// else if(resource.url==\\\"https://tbdemo.nistantritech.com:7777/mechDrone/Drone_gloss.jpeg\\\"){\\n//     robotMaterial.metalnessMap = response;\\n//     robotMaterial.metalness=1.0;\\n//     robotMaterial.needsUpdate = true;\\n    \\n// }\\n// else if(resource.url==\\\"https://tbdemo.nistantritech.com:7777/mechDrone/Drone_normal.jpeg\\\"){\\n//     robotMaterial.normalMap = response;\\n//     robotMaterial.needsUpdate = true;\\n    \\n// }\\n// else if(resource.url==\\\"https://tbdemo.nistantritech.com:7777/mechDrone/Drone_spec.jpeg\\\"){\\n//     robotMaterial.specularColorMap  = response;\\n//     robotMaterial.needsUpdate = true;\\n    \\n// }\\n\\n// else if(resource.url==\\\"https://tbdemo.nistantritech.com:7777/mechDrone/Fire_Dif.jpeg\\\"){\\n//     fireMaterial.map = response;\\n//     fireMaterial.needsUpdate = true;\\n\\n// }\\n// else if(resource.url==\\\"https://tbdemo.nistantritech.com:7777/mechDrone/Fire_Alpha.jpeg\\\"){\\n// \\tfireMaterial.side = THREE.DoubleSide;\\n//     fireMaterial.alphaMap = response;\\n//     fireMaterial.transparent = true\\n//     fireMaterial.needsUpdate = true;\\n    \\n// }\\n\",\"onObjectClick\":\"console.log(\\\"Object Clicked\\\",object)\",\"onObjectHover\":\"// console.log(\\\"On hover: \\\",object)\",\"onDataUpdated\":\"// console.log(\\\"onDataUpdate: \\\",modelObject)\"},\"title\":\"AddThreejs3DItem\",\"showTitleIcon\":false,\"dropShadow\":true,\"enableFullscreen\":true,\"widgetStyle\":{},\"widgetCss\":\"\",\"pageSize\":1024,\"noDataDisplayMessage\":\"\",\"showLegend\":false,\"titleTooltip\":\"\",\"enableDataExport\":true,\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400}}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214592065,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b39eb10-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "total_engine",
    "name" : "Total-Engine ",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 12,
      "sizeY" : 8.5,
      "resources" : [ ],
      "templateHtml" : "<div class=\"row\">\n    <div id=\"gauge1\">\n        <canvas id=\"canvas1\"></canvas>\n    </div>\n    <div class=\"gauge-values\">\n        <div class=\"label\">\n            <div class=\"status-value\">\n                60\n            </div>\n            <div class=\"status-info\">\n                <div class=\"dot\" style=\"background-color:#0EC23E;\"></div>\n                <div class=\"status-label\">good</div>\n            </div>\n        </div>\n          <div class=\"label\">\n            <div class=\"status-value\">\n                40\n            </div>\n            <div class=\"status-info\">\n                <div class=\"dot\" style=\"background-color:#FFC164;\"></div>\n                <div class=\"status-label\">moderate</div>\n            </div>\n        </div>\n          <div class=\"label\">\n            <div class=\"status-value\">\n                30\n            </div>\n            <div class=\"status-info\">\n                <div class=\"dot\" style=\"background-color:#EF7F30;\"></div>\n                <div class=\"status-label\">semi-moderate</div>\n            </div>\n        </div>\n          <div class=\"label\">\n            <div class=\"status-value\">\n                20\n            </div>\n            <div class=\"status-info\">\n                <div class=\"dot\" style=\"background-color:#E93800;\"></div>\n                <div class=\"status-label\">bad</div>\n            </div>\n        </div>\n    </div>\n</div>            ",
      "templateCss" : "*{\n    padding: 0;\n    margin:0;\n    box-sizing: border-box;\n}\n#canvas1{\n    max-width: 100%;\n}\n.row{\n    display:flex;\n    align-items: center;\n    flex-flow: row wrap;\n}\n#gauge1{\n    width:350px;\n    height:240px;\n    flex: 1 0 350px;\n}\n\n.gauge-values{\n    display: flex;\n    align-items: center;\n    flex-flow:row wrap;\n    flex: 1 0 350px;\n}\n\n.label {\n    width: 100%;\n    padding: 0px 0px 36px 0px;\n    flex: 50%;\n}\n\n\n.status-info {\n    display: flex;\n    align-items: center;\n}\n\n.dot {\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    margin-right: 4px;\n    background-color: green;\n}\n\n.status-value {\n    font-family: \"Inter\";\n    font-size: 28px;\n    font-weight: 700;\n}\n\n.status-label {\n    font-family: \"Inter\";\n    font-weight: 400;\n    font-style: normal;\n    font-size: 16px;\n    color: #696969;\n    text-transform: capitalize;\n    margin-bottom: 4px;\n}\n\n/*@media(max-width:1024px){*/\n/*    .row{*/\n/*        display: block;*/\n/*        height:auto;*/\n/*    }*/\n/*}*/",
      "controllerScript" : "self.onInit = function() {\n    \n    var canvas = document.getElementById(\"canvas1\");\n    var ctx = canvas.getContext(\"2d\");\n    var gauge1 = document.getElementById(\"gauge1\");\n    console.log(gauge1);\n    console.log(gauge1.clientWidth, gauge1.clientHeight)\n    canvas.width = gauge1.clientWidth;\n    canvas.height = gauge1.clientHeight;\n    console.log(canvas.width/2, canvas.height/2);\n    var data = [\n        { \"value\": 60, \"color\": \"#0EC23E\" },\n        { \"value\": 40, \"color\": \"#FFC164\" },\n        { \"value\": 30, \"color\": \"#EF7F30\" },\n        { \"value\": 20, \"color\": \"#E93800\" }\n    ]\n    class circular_gauge {\n\n        constructor(min, max, ctx) {\n            this.min = min;\n            this.max = max;\n            this.ctx = ctx;\n        }\n            circle(x, y, r, ...data) {\n            // var PI = Math.PI;\n            var startAngle = -Math.PI / 2;\n            for (var i = 0; i < data.length; i++) {\n                var endAngle = startAngle + (2 * Math.PI * data[i].value / this.max * 100 / 100)\n                ctx.beginPath();\n                ctx.arc(x, y, r, startAngle, endAngle);\n                console.log(\"start  :\" + [i] + startAngle, \" end  : \" + [i] + \"  \" + endAngle);\n                ctx.strokeStyle = data[i].color;\n                ctx.lineWidth = 20;\n                ctx.stroke();\n                ctx.font = 'bold 28px Inter';\n                ctx.textAlign = 'center';\n                ctx.textBaseline = 'middle';\n                ctx.fillStyle = 'black';\n                ctx.fillText('150', canvas.width / 2, (canvas.height / 2)-12);\n                ctx.font = ' normal 16px Inter';\n                ctx.textAlign = 'center';\n                ctx.textBaseline = 'middle';\n                ctx.fillStyle = '#696969';\n                ctx.fillText('Total Engine', canvas.width / 2, (canvas.height / 2)+12);\n                \n                startAngle = endAngle;\n            }\n        }\n    }\n    circular_obj = new circular_gauge(0, 150, canvas);\n    circular_obj.circle(canvas.width/2, canvas.height/2, 80, ...data);\n}\n\nself.onDataUpdated = function() {\n    \n    \n}\n\nself.onResize = function() {\n        \n}\n\nself.onDestroy = function() {\n}\n",
      "settingsSchema" : "{}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"Total-Engine \"}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214591973,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b2be150-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "total_entity",
    "name" : "Total Entity",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 7.5,
      "sizeY" : 3,
      "resources" : [ ],
      "templateHtml" : "<div fxLayout=\"row\" fxLayoutAlign=\"start stretch\" fxFill style=\"padding:16px 0 16px 32px;cursor:pointer\" (click)=\"cardClicked()\">\n    <div class=\"donut\" >\n        <div class=\"hole\">\n            <img *ngIf=\"ctx.widgetConfig.settings.icon\" [src]=ctx.sanitizer.bypassSecurityTrustResourceUrl(ctx.widgetConfig.settings.icon) />\n        </div>\n    </div>    \n    <div class=\"content\" fxLayout=\"column\" fxLayoutAlign=\"center\">\n        <div class=\"count\">{{totalCount}}</div>\n        <div class=\"title\">{{ctx.widgetConfig.title}}</div>\n    </div>\n</div>\n",
      "templateCss" : "#container{\r\n    /*padding: 16px 0 16px 32px;*/\r\n}\r\n.content{\r\n    padding: 0 0 0 32px;\r\n}\r\n.count{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    font-size: 28px;\r\n    line-height: 34px;\r\n    color: #000000;\r\n}\r\n.title{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 16px;\r\n    line-height: 19px;\r\n    color: #696969;\r\n}\r\n.donut {\r\n  padding: 0;\r\n  margin: 0;\r\n  aspect-ratio: 1 / 1;\r\n  height: 100%;\r\n  border-radius: 50%;\r\n  background-color: red;\r\n}\r\n\r\n.hole {\r\n  aspect-ratio: 1 / 1;\r\n   height: 90%;\r\n  border-radius: 50%;\r\n  background: #fff;\r\n  align-items: center;\r\n  justify-content: center;\r\n  display: flex;\r\n}\r\n \r\n.donut {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}",
      "controllerScript" : "self.onInit = function() {\n    self.ctx.$scope.cardClicked=function(evt,menu){\n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'onCardClicked');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[0], undefined,\n                    undefined,\n                    undefined);\n            }\n    }\n\n    var donut=$(self.ctx.$container).find(\".donut\").css( \"background-color\", self.ctx.settings.color );\n}\nself.onDataUpdated = function() {\n    self.ctx.$scope.totalCount=self.ctx.datasources.length \n\n}\nself.typeParameters=function(){\n    return {\n        maxDatasources: -1, // Maximum allowed datasources for this widget, -1 - unlimited\n        maxDataKeys: -1, //Maximum allowed data keys for this widget, -1 - unlimited\n        dataKeysOptional: true //Whether this widget can be configured with datasources without data keys\n    }\n}\nself.actionSources = function() {\n    return {\n        'onCardClicked': {\n            name: 'On Card Clicked',\n            multiple: false\n        } // to exzecute action when active label is clicked\n    };\n}\n\n\nself.onResize = function() {\n\n}\n\nself.onDestroy = function() {\n}\n",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"Setting\",\r\n        \"properties\": {\r\n            \"icon\": {\r\n                \"title\": \"Icon\",\r\n                \"type\": \"string\"\r\n\r\n            },\r\n            \"color\": {\r\n                \"title\": \"Default Menu Name\",\r\n                \"type\": \"string\"\r\n\r\n            }\r\n        }\r\n    },\r\n    \"form\": [\r\n        {\r\n            \"key\": \"icon\",\r\n            \"type\": \"image\"\r\n        },\r\n        {\r\n            \"key\": \"color\",\r\n            \"type\": \"color\",\r\n            \"default\":\"#000000\"\r\n        }\r\n        ]\r\n}",
      "dataKeySettingsSchema" : "{}",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{\"color\":\"#7d75e3\",\"icon\":\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDEiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MSA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yNy40MzA0IDEzLjcyMTRDMjcuNDMwNCAxNy42Mzc1IDI0LjMwODQgMjAuNzc3NyAyMC40MTQ5IDIwLjc3NzdDMTYuNTIxNCAyMC43Nzc3IDEzLjM5OTQgMTcuNjM3NSAxMy4zOTk0IDEzLjcyMTRDMTMuMzk5NCA5LjgwMzc3IDE2LjUyMTQgNi42NjY2NiAyMC40MTQ5IDYuNjY2NjZDMjQuMzA4NCA2LjY2NjY2IDI3LjQzMDQgOS44MDM3NyAyNy40MzA0IDEzLjcyMTRaTTIwLjQxNDkgMzMuMzMzM0MxNC42OTYyIDMzLjMzMzMgOS44MTMzMiAzMi40MjY3IDkuODEzMzIgMjguODAwM0M5LjgxMzMyIDI1LjE3MjMgMTQuNjY0OSAyNC4yMzI3IDIwLjQxNDkgMjQuMjMyN0MyNi4xMzM1IDI0LjIzMjcgMzEuMDE2NSAyNS4xMzkzIDMxLjAxNjUgMjguNzY3MkMzMS4wMTY1IDMyLjM5MzcgMjYuMTY0OSAzMy4zMzMzIDIwLjQxNDkgMzMuMzMzM1pNMzAuNDI4MyAxMy44NDg3QzMwLjQyODMgMTUuODQ1IDI5LjgzMjkgMTcuNzA0OCAyOC43ODgyIDE5LjI1MDhDMjguNjgwOCAxOS40MDk5IDI4Ljc3NjMgMTkuNjI0NiAyOC45NjU4IDE5LjY1NzZDMjkuMjI3IDE5LjcwMjYgMjkuNDk3MSAxOS43MjgyIDI5Ljc3MTcgMTkuNzM1N0MzMi41MTAxIDE5LjgwNzcgMzQuOTY4IDE4LjAzNSAzNS42NDcgMTUuMzY2MkMzNi42NTI5IDExLjQwMiAzMy42OTk1IDcuODQzMTUgMjkuOTM4OCA3Ljg0MzE1QzI5LjUyOTkgNy44NDMxNSAyOS4xMzg5IDcuODg2NjggMjguNzU4NCA3Ljk2NDczQzI4LjcwNjIgNy45NzY3NCAyOC42NTEgOC4wMDA3NiAyOC42MjExIDguMDQ3MjlDMjguNTg1MyA4LjEwNDMzIDI4LjYxMjIgOC4xODA4OCAyOC42NDggOC4yMzA0MUMyOS43Nzc3IDkuODIyOTggMzAuNDI4MyAxMS43NjUzIDMwLjQyODMgMTMuODQ4N1pNMzQuOTYzNSAyMi41MjA5QzM2LjgwMzYgMjIuODgyNyAzOC4wMTM5IDIzLjYyMTIgMzguNTE1MyAyNC42OTQ0QzM4LjkzOTEgMjUuNTc1NSAzOC45MzkxIDI2LjU5NzcgMzguNTE1MyAyNy40NzczQzM3Ljc0ODIgMjkuMTQxOSAzNS4yNzU0IDI5LjY3NjMgMzQuMzE0NCAyOS44MTQ0QzM0LjExNTkgMjkuODQ0NCAzMy45NTYyIDI5LjY3MTggMzMuOTc3MSAyOS40NzIxQzM0LjQ2ODEgMjQuODU5NSAzMC41NjI2IDIyLjY3MjUgMjkuNTUyMyAyMi4xNjk3QzI5LjUwOSAyMi4xNDcyIDI5LjUwMDEgMjIuMTEyNyAyOS41MDQ2IDIyLjA5MTZDMjkuNTA3NiAyMi4wNzY2IDI5LjUyNTUgMjIuMDUyNiAyOS41NTgzIDIyLjA0ODFDMzEuNzQ0NiAyMi4wMDc2IDM0LjA5NSAyMi4zMDc4IDM0Ljk2MzUgMjIuNTIwOVpNMTEuMjI4NCAxOS43MzU1QzExLjUwMjkgMTkuNzI4IDExLjc3MTYgMTkuNzA0IDEyLjAzNDIgMTkuNjU3NUMxMi4yMjM3IDE5LjYyNDQgMTIuMzE5MyAxOS40MDk4IDEyLjIxMTggMTkuMjUwN0MxMS4xNjcyIDE3LjcwNDYgMTAuNTcxNyAxNS44NDQ5IDEwLjU3MTcgMTMuODQ4NUMxMC41NzE3IDExLjc2NTEgMTEuMjIyNCA5LjgyMjgzIDEyLjM1MjEgOC4yMzAyNkMxMi4zODc5IDguMTgwNzMgMTIuNDEzMyA4LjEwNDE3IDEyLjM3ODkgOC4wNDcxNEMxMi4zNDkxIDguMDAyMTEgMTIuMjkyNCA3Ljk3NjU5IDEyLjI0MTcgNy45NjQ1OEMxMS44NTk2IDcuODg2NTMgMTEuNDY4NiA3Ljg0MyAxMS4wNTk3IDcuODQzQzcuMjk5MDMgNy44NDMgNC4zNDU2OSAxMS40MDE5IDUuMzUzMDIgMTUuMzY2MUM2LjAzMjAzIDE4LjAzNDkgOC40ODk5MSAxOS44MDc2IDExLjIyODQgMTkuNzM1NVpNMTEuNDk0NyAyMi4wOTA3QzExLjQ5OTIgMjIuMTEzMyAxMS40OTAzIDIyLjE0NjMgMTEuNDQ4NSAyMi4xNzAzQzEwLjQzNjcgMjIuNjczMSA2LjUzMTIyIDI0Ljg2MDEgNy4wMjIyIDI5LjQ3MTJDNy4wNDMwOSAyOS42NzI0IDYuODg0OSAyOS44NDM1IDYuNjg2NDIgMjkuODE1QzUuNzI1MzYgMjkuNjc2OSAzLjI1MjU1IDI5LjE0MjUgMi40ODU0OSAyNy40Nzc5QzIuMDYwMTcgMjYuNTk2OCAyLjA2MDE3IDI1LjU3NjEgMi40ODU0OSAyNC42OTVDMi45ODY5MiAyMy42MjE4IDQuMTk1NzEgMjIuODgzMyA2LjAzNTc2IDIyLjUyQzYuOTA1OCAyMi4zMDg0IDkuMjU0NzQgMjIuMDA4MiAxMS40NDI1IDIyLjA0ODdDMTEuNDc1MyAyMi4wNTMyIDExLjQ5MTcgMjIuMDc3MiAxMS40OTQ3IDIyLjA5MDdaIiBmaWxsPSIjN0Q3NUUzIi8+Cjwvc3ZnPgo=\"},\"title\":\"Total Entity\",\"showTitleIcon\":false,\"dropShadow\":false,\"enableFullscreen\":false,\"enableDataExport\":false,\"widgetStyle\":{},\"widgetCss\":\"\",\"noDataDisplayMessage\":\"\",\"showLegend\":false}"
    },
    "bundleAlias" : "nt_widgets",
    "createdTime" : 1677214591785,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9b0f3190-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  } ],
  "relations" : [ ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}