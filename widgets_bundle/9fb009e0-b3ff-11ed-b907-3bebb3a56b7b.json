{
  "entityType" : "WIDGETS_BUNDLE",
  "entity" : {
    "alias" : "nt_widgets_2",
    "description" : null,
    "externalId" : null,
    "id" : {
      "entityType" : "WIDGETS_BUNDLE",
      "id" : "9fb009e0-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "image" : null,
    "name" : "NT-Widgets-2",
    "title" : "NT-Widgets-2"
  },
  "widgets" : [ {
    "alias" : "alarm_widget",
    "name" : "Alarm Widget",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "alarm",
      "sizeX" : 10.5,
      "sizeY" : 6.5,
      "resources" : [ ],
      "templateHtml" : "<div fxLayout=\"row\" fxLayoutAlign=\"start stretch\" fxFill>\n    <div class=\"donut\" >\n        <div class=\"hole\">\n            <img *ngIf=\"ctx.widgetConfig.settings.icon\" [src]=ctx.sanitizer.bypassSecurityTrustResourceUrl(ctx.widgetConfig.settings.icon) />\n        </div>\n    </div>    \n    <div class=\"content\" fxLayout=\"column\" fxLayoutAlign=\"center\">\n        <div class=\"title\">{{ctx.widgetConfig.title}}</div>\n        <div class=\"count\" >\n            {{totalCount}}\n        </div>\n        <div class=\"status\" *ngIf=\"counts\">\n            <span class=\"active\">Active</span>\n            <span class=\"warning\">Warning({{counts[\"warning\"]}})</span>\n            <span class=\"critical\">Critical({{counts[\"critical\"]}})</span></div>\n    </div>\n</div>\n ",
      "templateCss" : "#container{\r\n    padding: 16px 0 16px 32px;\r\n}\r\n.content{\r\n    padding: 0 0 0 32px;\r\n}\r\n.status{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 16px;\r\n    line-height: 19px;\r\n    color: #1B4383;\r\n}\r\n.status span{\r\n    border-right: 1px solid #EDEFF4;\r\n    padding:0 10px;\r\n    \r\n}\r\n\r\n.status span:first-child{\r\n    padding-left: 0;\r\n}\r\n.status span:last-child{\r\n    padding-right: 0;\r\n    border: none\r\n}\r\n\r\n.status .warning{\r\n    color: #FFC164;\r\n}\r\n.status .critical{\r\n    color: #E93800\r\n;\r\n}\r\n.inPerc{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    font-size: 26px;\r\n    line-height: 31px;\r\n    text-align: center;\r\n    color: #3D3D3D; \r\n}\r\n.count{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    font-size: 32px;\r\n    line-height: 39px;\r\n    color: #000000;\r\n}\r\n.count span{\r\n    font-weight: 600;\r\n    font-size: 20px;\r\n    /*line-height: 39px;*/\r\n    \r\n}\r\n.title{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 16px;\r\n    line-height: 19px;\r\n    \r\n    /* Grey 1 */\r\n    \r\n    color: #696969;\r\n\r\n}\r\n.donut {\r\n  padding: 0;\r\n  margin: 0;\r\n  aspect-ratio: 1 / 1;\r\n  height: 100%;\r\n  border-radius: 50%;\r\n  background-color: #0EC23E;\r\n}\r\n\r\n.hole {\r\n  aspect-ratio: 1 / 1;\r\n   height: 90%;\r\n  border-radius: 50%;\r\n  background: #fff;\r\n  align-items: center;\r\n  justify-content: center;\r\n  display: flex;\r\n}\r\n \r\n.donut {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}",
      "controllerScript" : "self.onInit = function() {\n    console.log(self.ctx); \n    self.ctx.$scope.getCounts =\n        new Function([\"widgetContext\"], self.ctx.settings.getCounts)\n\n    var donut=$(self.ctx.$container).find(\".donut\").css( \"background-color\", self.ctx.settings.color );\n\n    var pageLink = self.ctx.pageLink();\n    pageLink.typeList = self.ctx.widgetConfig.alarmTypeList;\n    pageLink.statusList = self.ctx.widgetConfig.alarmStatusList;\n    pageLink.severityList = self.ctx.widgetConfig.alarmSeverityList;\n    pageLink.searchPropagatedAlarms = self.ctx.widgetConfig.searchPropagatedAlarms; \n        pageLink.pageSize = 100;\n\n    // console.log(pageLink)\n    self.ctx.defaultSubscription.subscribeForAlarms(pageLink, null)\n// self.ctx.defaultSubscription.update()\n//     self.ctx.$scope.alarmSource = self.ctx.defaultSubscription.alarmSource;\n    console.log(\"self.ctx.$scope.alarmSource: \",self.ctx)\n    \n//     console.log(self.ctx.$scope.alarmSource)\nself.onDataUpdated();\n} \n\nself.onDataUpdated = function() {\n    console.log(\"on updated\",self.ctx)\n    self.ctx.$scope.totalCount=self.ctx.defaultSubscription.alarms.data.length\n    self.ctx.$scope.counts=self.ctx.$scope.getCounts(self.ctx);\n\n    var critical=(self.ctx.$scope.counts[\"critical\"]*360)/self.ctx.$scope.totalCount\n    var warning=(self.ctx.$scope.counts[\"warning\"]*360)/self.ctx.$scope.totalCount\n\n    // update circle based on status\n    $(self.ctx.$container).find(\".donut\").css( 'background-image', 'conic-gradient(#FFC164 0deg '+warning+'deg, #E93800 '+warning+'deg 360deg)' );\n\n\n    self.ctx.detectChanges();\n\n}\nself.typeParameters=function(){\n    return {\n        maxDatasources: -1, // Maximum allowed datasources for this widget, -1 - unlimited\n        maxDataKeys: -1, //Maximum allowed data keys for this widget, -1 - unlimited\n        dataKeysOptional: true //Whether this widget can be configured with datasources without data keys\n    }\n}\n\nself.onResize = function() {\n\n}\n\nself.onDestroy = function() {\n}\n",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"Setting\",\r\n        \"properties\": {\r\n            \"icon\": {\r\n                \"title\": \"Icon\",\r\n                \"type\": \"string\"\r\n\r\n            },\r\n            \"getCounts\": {\r\n                \"title\": \"Get Counts(widgetContext)\",\r\n                \"type\": \"string\"\r\n\r\n            }\r\n        }\r\n    },\r\n    \"form\": [\r\n                {\r\n            \"key\": \"icon\",\r\n            \"type\": \"image\"\r\n        },\r\n        {\r\n            \"key\": \"getCounts\",\r\n            \"type\": \"javascript\"\r\n        }\r\n        ]\r\n}",
      "dataKeySettingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"DataKeySettings\",\r\n        \"properties\": {\r\n            \"columnWidth\": {\r\n                \"title\": \"Column width (px or %)\",\r\n                \"type\": \"string\",\r\n                \"default\": \"0px\"\r\n            },\r\n            \"useCellStyleFunction\": {\r\n                \"title\": \"Use cell style function\",\r\n                \"type\": \"boolean\",\r\n                \"default\": false\r\n            },\r\n            \"cellStyleFunction\": {\r\n                \"title\": \"Cell style function: f(value, alarm, ctx)\",\r\n                \"type\": \"string\",\r\n                \"default\": \"\"\r\n            },\r\n            \"useCellContentFunction\": {\r\n                \"title\": \"Use cell content function\",\r\n                \"type\": \"boolean\",\r\n                \"default\": false\r\n            },\r\n            \"cellContentFunction\": {\r\n                \"title\": \"Cell content function: f(value, alarm, ctx)\",\r\n                \"type\": \"string\",\r\n                \"default\": \"\"\r\n            },\r\n            \"defaultColumnVisibility\": {\r\n                \"title\": \"Default column visibility\",\r\n                \"type\": \"string\",\r\n                \"default\": \"visible\"\r\n            },\r\n            \"columnSelectionToDisplay\": {\r\n                \"title\": \"Column selection in 'Columns to Display'\",\r\n                \"type\": \"string\",\r\n                \"default\": \"enabled\"\r\n            },\r\n            \"columnExportOption\": {\r\n                \"title\": \"Include column in export\",\r\n                \"type\": \"string\",\r\n                \"default\": \"onlyVisible\"\r\n            }\r\n        },\r\n        \"required\": []\r\n    },\r\n    \"form\": [\r\n        \"columnWidth\",\r\n        \"useCellStyleFunction\",\r\n        {\r\n            \"key\": \"cellStyleFunction\",\r\n            \"type\": \"javascript\",\r\n            \"helpId\": \"widget/lib/alarm/cell_style_fn\",\r\n            \"condition\": \"model.useCellStyleFunction === true\"\r\n        },\r\n        \"useCellContentFunction\",\r\n        {\r\n            \"key\": \"cellContentFunction\",\r\n            \"type\": \"javascript\",\r\n            \"helpId\": \"widget/lib/alarm/cell_content_fn\",\r\n            \"condition\": \"model.useCellContentFunction === true\"\r\n        },\r\n        {\r\n            \"key\": \"defaultColumnVisibility\",\r\n            \"type\": \"rc-select\",\r\n            \"multiple\": false,\r\n            \"items\": [\r\n                {\r\n                    \"value\": \"visible\",\r\n                    \"label\": \"Visible\"\r\n                },\r\n                {\r\n                    \"value\": \"hidden\",\r\n                    \"label\": \"Hidden\"\r\n                }    \r\n            ]\r\n        },\r\n        {\r\n            \"key\": \"columnSelectionToDisplay\",\r\n            \"type\": \"rc-select\",\r\n            \"multiple\": false,\r\n            \"items\": [\r\n                {\r\n                    \"value\": \"enabled\",\r\n                    \"label\": \"Enabled\"\r\n                },\r\n                {\r\n                    \"value\": \"disabled\",\r\n                    \"label\": \"Disabled\"\r\n                }    \r\n            ]\r\n        },\r\n        {\r\n            \"key\": \"columnExportOption\",\r\n            \"type\": \"rc-select\",\r\n            \"multiple\": false,\r\n            \"items\": [\r\n                {\r\n                    \"value\": \"always\",\r\n                    \"label\": \"Always\"\r\n                },\r\n                {\r\n                    \"value\": \"onlyVisible\",\r\n                    \"label\": \"Only if column visible\"\r\n                },\r\n                {\r\n                    \"value\": \"never\",\r\n                    \"label\": \"Never\"\r\n                }     \r\n            ]\r\n        }\r\n    ]\r\n}",
      "defaultConfig" : "{\"timewindow\":{\"realtime\":{\"interval\":1000,\"timewindowMs\":86400000},\"aggregation\":{\"type\":\"NONE\",\"limit\":200}},\"showTitle\":true,\"backgroundColor\":\"rgb(255, 255, 255)\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"4px\",\"settings\":{\"icon\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAcCAYAAAB75n/uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHESURBVHgBtZZPUsIwFMa/BGdkXNWNf1baE1B3yApvwA3AG+AJHE8gNwBPoJ4A3eEKbiDO6DjjhrhRxrGNX2oZC6V/hPa3aecleV/ykrw8gRReqzgUGg0hUBHAobFpDaWBey1wsz/AOGm8SHJcArp0VEeyg54LXMQJLRV4q6IJjQ5naCELAoqrbO8McBVtWuDlGI0NjWusAJ21FkXmBPywaAwzzzyqoDyNo3C4ZLidMT9f2blBw+JhaIdNcqFDA2vCkDSXCjzX4Kw1+xlcxaSGg4hAycvBecDUgx0RKIpCBGQoGmGBOvJCwpn9+vfAnH8q9RHkmrXhffjYhG3fQfkr4M29zM25gSdp6xNdX4uzb1GliwLwgBPJm+egIDjxpuRyKigI835I5vsnFAQT37tkHh+hIMyLJyYOrK8yhsjzFP0y3h3Altsj5nDutjEgLwRGgc/Ig9My6ZYb8+/MylAr37HG7d4DOn9aCfgvnAvLLUXFaFe0K/OfVFkkCsx4rMMqT+dFpmUokwrSxqYKsMLox5UupmThI3+aND49Xev4m64zZOBUAVfgbJndbOp3TNtcP2TAbDZPVVsGacWUjfz00spGww90sod4q0X80gAAAABJRU5ErkJggg==\",\"getCounts\":\"return {warning:3,critical:6}\"},\"title\":\"Alarm Widget\",\"dropShadow\":true,\"enableFullscreen\":true,\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400,\"padding\":\"5px 10px 5px 10px\"},\"useDashboardTimewindow\":false,\"showLegend\":false,\"alarmSource\":{\"type\":\"function\",\"dataKeys\":[{\"name\":\"createdTime\",\"type\":\"alarm\",\"label\":\"Created time\",\"color\":\"#2196f3\",\"settings\":{\"useCellStyleFunction\":false,\"cellStyleFunction\":\"\",\"useCellContentFunction\":false,\"cellContentFunction\":\"\"},\"_hash\":0.021092237451093787},{\"name\":\"originator\",\"type\":\"alarm\",\"label\":\"Originator\",\"color\":\"#4caf50\",\"settings\":{\"useCellStyleFunction\":false,\"cellStyleFunction\":\"\",\"useCellContentFunction\":false,\"cellContentFunction\":\"\"},\"_hash\":0.2780007688856758},{\"name\":\"type\",\"type\":\"alarm\",\"label\":\"Type\",\"color\":\"#f44336\",\"settings\":{\"useCellStyleFunction\":false,\"cellStyleFunction\":\"\",\"useCellContentFunction\":false,\"cellContentFunction\":\"\"},\"_hash\":0.7323586880398418},{\"name\":\"severity\",\"type\":\"alarm\",\"label\":\"Severity\",\"color\":\"#ffc107\",\"settings\":{\"useCellStyleFunction\":false,\"useCellContentFunction\":false},\"_hash\":0.09927019860088193},{\"name\":\"status\",\"type\":\"alarm\",\"label\":\"Status\",\"color\":\"#607d8b\",\"settings\":{\"useCellStyleFunction\":false,\"cellStyleFunction\":\"\",\"useCellContentFunction\":false,\"cellContentFunction\":\"\"},\"_hash\":0.6588418951443418}],\"entityAliasId\":null,\"name\":\"alarms\"},\"alarmSearchStatus\":\"ANY\",\"alarmsPollingInterval\":5,\"showTitleIcon\":false,\"titleIcon\":\"more_horiz\",\"iconColor\":\"rgba(0, 0, 0, 0.87)\",\"iconSize\":\"24px\",\"titleTooltip\":\"\",\"widgetStyle\":{},\"displayTimewindow\":true,\"actions\":{},\"alarmStatusList\":[],\"alarmSeverityList\":[],\"alarmTypeList\":[],\"searchPropagatedAlarms\":false}"
    },
    "bundleAlias" : "nt_widgets_2",
    "createdTime" : 1677214599599,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9fb783f0-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "customer_devices_status",
    "name" : "Customer Devices Status",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 8,
      "sizeY" : 4,
      "resources" : [ ],
      "templateHtml" : "<div fxLayout=\"row\" fxLayoutAlign=\"start stretch\" fxFill>\n    <!--device status circle-->\n\n    <div class=\"donut\" >\n        <div class=\"hole\">\n                            <!--total device counts-->\n\n            <span class=\"count\" *ngIf=\"getActive\">{{getActive(ctx)}}<span>/{{totalCount}}</span></span>\n            <!--<div class=\"inPerc\" *ngIf=\"getActive\">-->\n            <!--    {{(getActive(ctx)*100)/totalCount | number : '1.0-1'}}%-->\n            <!--</div>-->\n        </div>\n    </div>    \n    <div class=\"content\" fxLayout=\"column\" fxLayoutAlign=\"center\">\n        <!--Card title-->\n\n        <div class=\"title\">{{ctx.widgetConfig.title}}</div>\n        <div class=\"status\" fxLayout=\"row wrap\" fxLayoutAlign=\"start center\">\n            <!--<span class=\"count\" *ngIf=\"getActive\">{{getActive(ctx)}}<span>/{{totalCount}}</span></span>-->\n\n            <!--Active device label-->\n            <span class=\"activeStatus\" (click)=\"activeClicked()\">Active</span>\n            <!--Inactive device label-->\n            <span class=\"deactiveStatus\" (click)=\"inActiveClicked()\">Inactive</span></div>\n    </div>\n</div>\n ",
      "templateCss" : "#container{\r\n    padding: 16px 0 16px 32px;\r\n}\r\n.content{\r\n    padding: 0 0 0 32px;\r\n}\r\n.status{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 16px;\r\n    line-height: 19px;\r\n    color: #0EC23E;\r\n}\r\n.status span{\r\n    border-right: 1px solid #EDEFF4;\r\n    padding:0 10px;\r\n    \r\n}\r\n\r\n.status span:first-child{\r\n    padding-left: 0;\r\n}\r\n.status span:last-child{\r\n    padding-right: 0;\r\n    border: none\r\n}\r\n\r\n.status .deactiveStatus{\r\n    color: #E93800;\r\n}\r\n.inPerc{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    font-size: 26px;\r\n    line-height: 31px;\r\n    text-align: center;\r\n    color: #3D3D3D; \r\n}\r\n.count{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    font-size: 32px;\r\n    line-height: 39px;\r\n    color: #000000;\r\n}\r\n.count span{\r\n    font-weight: 600;\r\n    font-size: 20px;\r\n    /*line-height: 39px;*/\r\n    \r\n}\r\n.title{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 16px;\r\n    line-height: 19px;\r\n    \r\n    /* Grey 1 */\r\n    \r\n    color: #696969;\r\n\r\n}\r\n.donut {\r\n  padding: 0;\r\n  margin: 0;\r\n  aspect-ratio: 1 / 1; \r\n  height: 100%;\r\n  border-radius: 50%;\r\n  background-color: #0EC23E;\r\n} \r\n.hole {\r\n  aspect-ratio: 1 / 1;\r\n   height: 90%;\r\n  border-radius: 50%;\r\n  background: #fff;\r\n  align-items: center;\r\n  justify-content: center;\r\n  display: flex;\r\n}\r\n \r\n.donut {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}",
      "controllerScript" : "self.onInit = function() {\n    self.ctx.$scope.getActive =\n        new Function([\"widgetContext\"], self.ctx.settings.getActive)\n        \n    //call active action if have added\n    self.ctx.$scope.activeClicked=function(evt,menu){\n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'activeClicked');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[0], undefined,\n                    undefined,\n                    undefined);\n            }\n    }\n\n    //call inactive action if have added\n    self.ctx.$scope.inActiveClicked=function(evt,menu){\n            var menuAction = ctx.actionsApi\n                .getActionDescriptors(\n                    'inActiveClicked');\n            if (menuAction != undefined) {\n                self.ctx.actionsApi.handleWidgetAction(\n                    null, menuAction[0], undefined,\n                    undefined,\n                    undefined);\n            }\n    }\n\n}\n \nself.onDataUpdated = function() {\n    self.ctx.$scope.totalCount=self.ctx.datasources.length\n    var active=self.ctx.$scope.getActive(self.ctx)\n    var statusDegree=(active*360)/self.ctx.$scope.totalCount\n    $(self.ctx.$container).find(\".donut\").css( 'background-image', 'conic-gradient(#0EC23E 0deg '+statusDegree+'deg, #E93800 '+statusDegree+'deg 360deg)' ); \n    self.ctx.detectChanges();\n}\nself.typeParameters=function(){\n    return {\n        maxDatasources: -1, // Maximum allowed datasources for this widget, -1 - unlimited\n        maxDataKeys: -1, //Maximum allowed data keys for this widget, -1 - unlimited\n        dataKeysOptional: true //Whether this widget can be configured with datasources without data keys\n    }\n}\nself.actionSources = function() {\n    return {\n        'activeClicked': {\n            name: 'Active Clicked',\n            multiple: false\n        },// to exzecute action when active label is clicked\n        'inActiveClicked': {\n            name: 'Inactive Clicked',\n            multiple: false\n        }// to exzecute action when inActive label is clicked\n    };\n}\n\nself.onResize = function() {\n\n}\n\nself.onDestroy = function() {\n}\n",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"Setting\",\r\n        \"properties\": {\r\n            \"getActive\": {\r\n                \"title\": \"Get Active Counts(widgetContext)\",\r\n                \"type\": \"string\"\r\n\r\n            }\r\n        }\r\n    },\r\n    \"form\": [\r\n        {\r\n            \"key\": \"getActive\",\r\n            \"type\": \"javascript\"\r\n        }\r\n        ]\r\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"getActive\":\"return widgetContext.datasources.length\"},\"title\":\"Customer Devices Status\"}"
    },
    "bundleAlias" : "nt_widgets_2",
    "createdTime" : 1677214599595,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9fb6e7b0-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "cylinder_view",
    "name" : "Cylinder View",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "static",
      "sizeX" : 11,
      "sizeY" : 7,
      "resources" : [ ],
      "templateHtml" : "<ng-template #valueTemplate let-value=\"value\"\n    let-safe=\"safe\" let-warning=\"warning\">\n    <span class=\"valueCircleValue\" [title]=\"value\"\n        style=\"margin:auto\"\n        [ngStyle]=\"{'background-image': 'conic-gradient('+\n        (value > safe ? '#0EC23E' : (value>warning ? '#EF7F30' : '#E93800'))\n        +' 0deg '+(value*3.6)+'deg, #ffffff '+(value*3.6)+'deg 360deg'+')'}\">\n        <span class=\"valueCircleLegend\"\n            [ngStyle]=\"{'background-color': value > safe ? '#0EC23E' : (value > warning ? '#EF7F30' : '#E93800')}\"></span>\n\n    </span>\n</ng-template>\n<ng-template #headerTemplate let-key=\"key\" let-value=\"value\"\n    let-safe=\"safe\" let-warning=\"warning\">\n    <span fxLayout=\"column\" fxLayoutAlign=\"center center\"\n        style=\"margin:0px;width:100%;\" fxLayoutGap=\"10px\">\n\n        <div class=\"semi-circle-donut\"\n            [ngStyle]=\"{'background-image': 'conic-gradient(from -90deg at 50% 100%, '+\n        (value > safe ? '#0EC23E' : (value>warning ? '#EF7F30' : '#E93800'))\n        +' 0deg '+(value*1.8)+'deg, transparent '+(value*1.8)+'deg 180deg'+')'}\">\n\n            <div class=\"semi-circle-donut2\">\n                <div class=\"semi-circle-donut-value\">\n                    {{value}}%</div>\n            </div>\n        </div>\n        <span class=\"header\">\n            {{headerTitle[key]}}\n        </span>\n\n    </span>\n</ng-template>\n<div fxLayout=\"column\" fxFill  fxLayoutGap=\"10px\">\n<div fxLayout=\"row\" fxLayoutAlign=\"space-between\" >\n    <span class=\"sectionTitle\">Cylinder Indicator</span>\n    <span class=\"sectionTitle\">\n                    <span><span class=\"legendSymbol\" style=\"background-color:#E93800\"></span> <span class=\"legendText\">Alert</span></span>\n                    <span><span class=\"legendSymbol\" style=\"background-color:#EF7F30\"></span> <span class=\"legendText\">Warning</span></span>\n                    <span><span class=\"legendSymbol\" style=\"background-color:#0EC23E\"></span> <span class=\"legendText\">Good</span></span>\n                </span>\n</div>\n    <table mat-table [dataSource]=\"ctx.cylinderValues\" style=\"border: '2px solid #E1E1E1'\"\n    class=\"mat-elevation-z8\"\n    *ngIf=\"ctx.cylinderValues!=undefined\">\n    <ng-container matColumnDef=\"name\" sticky>\n        <th mat-header-cell *matHeaderCellDef></th>\n        <td mat-cell *matCellDef=\"let element\">\n            {{element.name}}\n        </td>\n    </ng-container>\n\n    <!-- Name Column -->\n    <ng-container matColumnDef=\"inj\">\n        <th mat-header-cell *matHeaderCellDef\n            style=\"height:114px\">\n            <ng-container\n                *ngTemplateOutlet=\"headerTemplate;context:{'key':'inj','value':ctx.headerValues['inj'],'safe':safe,'warning':warning}\">\n            </ng-container>\n\n        </th>\n        <td mat-cell *matCellDef=\"let element\">\n            <ng-container\n                *ngTemplateOutlet=\"valueTemplate;context:{'value':element.inj,'safe':safe,'warning':warning}\">\n            </ng-container>\n\n        </td>\n    </ng-container>\n\n    <!-- Weight Column -->\n    <ng-container matColumnDef=\"bear\">\n        <th mat-header-cell *matHeaderCellDef>\n            <ng-container\n                *ngTemplateOutlet=\"headerTemplate;context:{'key':'bear','value':ctx.headerValues['bear'],'safe':safe,'warning':warning}\">\n            </ng-container>\n\n        </th>\n\n        <td mat-cell *matCellDef=\"let element\">\n            <ng-container\n                *ngTemplateOutlet=\"valueTemplate;context:{'value':element.bear,'safe':safe,'warning':warning}\">\n            </ng-container>\n        </td>\n    </ng-container>\n\n    <!-- Symbol Column -->\n    <ng-container matColumnDef=\"under\">\n        <th mat-header-cell *matHeaderCellDef>\n            <ng-container\n                *ngTemplateOutlet=\"headerTemplate;context:{'key':'under','value':ctx.headerValues['under'],'safe':safe,'warning':warning}\">\n            </ng-container>\n\n        </th>\n\n        <td mat-cell *matCellDef=\"let element\">\n            <ng-container\n                *ngTemplateOutlet=\"valueTemplate;context:{'value':element.under,'safe':safe,'warning':warning}\">\n            </ng-container>\n        </td>\n\n    </ng-container>\n    <!-- Symbol Column -->\n    <ng-container matColumnDef=\"over\">\n        <th mat-header-cell *matHeaderCellDef>\n            <ng-container\n                *ngTemplateOutlet=\"headerTemplate;context:{'key':'over','value':ctx.headerValues['over'],'safe':safe,'warning':warning}\">\n            </ng-container>\n\n        </th>\n\n        <td mat-cell *matCellDef=\"let element\">\n            <ng-container\n                *ngTemplateOutlet=\"valueTemplate;context:{'value':element.over,'safe':safe,'warning':warning}\">\n            </ng-container>\n        </td>\n\n    </ng-container>\n\n    <tr mat-header-row *matHeaderRowDef=\"displayedColumns;sticky: true\">\n    </tr>\n    <tr mat-row\n        *matRowDef=\"let row; columns: displayedColumns;\"\n        [ngStyle]=\"{'border-bottom-color': 'red'}\"></tr>\n</table>    \n</div>\n",
      "templateCss" : "#container {\n    overflow: auto;\n}\n\n::-webkit-scrollbar { \n    caret-color: blue !important;\n    -ms-overflow-style: none !important;  \n    scrollbar-width: 5px !important;  \n    scrollbar-height: 5px !important;  \n    display: inline-block !important;  \n}\n::-webkit-scrollbar-thumb {\n  background-color: rgba(0, 0, 0, 0.2);\n  height: auto;\n  width:auto;\n}\n\n.mat-table {\n    box-shadow: none;\n    overflow: auto !important;\n    \n }\n\ntr td,\ntr th {\n    border-bottom: 2px solid #E1E1E1 !important;\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 19px;\n    color: #696969;\n\n}\ntr:last-child td{\n    border-bottom:  none !important;\n}\n\n.header {\n    text-align: center;\n    text-overflow: ellipsis !important;\n    overflow: hidden;\n    width: 108px;\n    font-family: 'Inter' !important;\n    font-style: normal !important;\n    font-weight: 500 !important;\n    font-size: 16px !important;\n    line-height: 19px !important;\n    color: #000000 !important;\n}\n\n.valueCircleLegend {\n    display: relative;\n    display: inline-block;\n    border-radius: 100%;\n    /*color: red;*/\n    border: 4px solid white;\n    height: 18px;\n    width: 18px;\n    ;\n}\n\n.valueCircleValue {\n    width: 26px;\n    height: 26px;\n    /*display: inline-block;*/\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    /*height: 9px;*/\n    /*width: 9px;;*/\n}\n\n.valueRow {\n    padding: 12px 0;\n    text-align: center !important;\n}\n\n\n\n.headerCircle {\n    display: inline-block;\n    transform: rotateZ(-90deg);\n    height: 98px !important;\n    width: 48px !important;\n    border-radius: 0 150px 150px 0;\n    background-color: green;\n    display: flex;\n    align-items: center;\n    \n\n\n}\n\n.headerCircleHole {\n    display: inline-block;\n    /*transform: rotateZ(-90deg);*/\n    height: 66px !important;\n    width: 32px !important;\n    border-radius: 0 150px 150px 0;\n    background-color: white;\n}\n\n\n.semi-circle-donut {\n    width: 98px;\n    height: 48px;\n    border-radius: 100px 100px 0 0;\n    background-color: #EDEFF4;\n    position: relative;\n    /*background-image: conic-gradient(at 50% 100%, #ff0000,  #00ff00 );*/\n    /*background-position: bottom -50% right 50%;*/\n\n    /*from 45deg, #ff0000, #00ff00 to 135deg*/\n}\n\n.semi-circle-donut2 {\n    width: 66px;\n    height: 32px;\n    border-radius: 50px 50px 0 0;\n    background-color: white;\n    position: absolute;\n    top: 16px;\n    left: 16px;\n    align-items: end;\n    display: flex;\n    justify-content: center;\n\n}\n\n.semi-circle-donut-value {\n    background-color: transparent;\n    display: flex;\n    align-items: end;\n    justify-content: center;\n\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 19px;\n    text-transform: capitalize;\n    color: #000000;\n\n}\n\n\n.legendSymbol{\n    height: 8px;\n    width:8px;\n    display: inline-block;\n    border-radius: 100%;\n}\n.legendText{\n    margin-left: 4px;\n}\n.sectionTitle{\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    color: #696969;\n}",
      "controllerScript" : "self.onInit = function() { \n    self.ctx.$scope.safe=70;\n    self.ctx.$scope.warning=50; \n    self.ctx.$scope.headerTitle = {\n        'inj':\"Injection & Combustion\",\n        'bear':\"Bearing\",\n        'under':\"Underpower\", \n        'over':\"Overpower\"\n    }\n    self.ctx.$scope.displayedColumns = ['name', 'inj',\n        'bear', 'under', 'over'\n    ];\n    self.ctx.headerValues = {\n        \"inj\": 90,\n        \"bear\": 80,\n        \"under\": 70,\n        \"over\": 50,\n    }\n    \n    self.ctx.cylinderValues=[]\n    // self.ctx.cylinderValues = [{\n    //     \"name\": \"L1\",\n    //     \"inj\": 90,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }, {\n    //     \"name\": \"L2\",\n    //     \"inj\": 75,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }, {\n    //     \"name\": \"R1\",\n    //     \"inj\": 45,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }, {\n    //     \"name\": \"R2\",\n    //     \"inj\": 99,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }\n    // , {\n    //     \"name\": \"R2\",\n    //     \"inj\": 99,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }, {\n    //     \"name\": \"R2\",\n    //     \"inj\": 99,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }, {\n    //     \"name\": \"R2\",\n    //     \"inj\": 99,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }, {\n    //     \"name\": \"R2\",\n    //     \"inj\": 99,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }, {\n    //     \"name\": \"R2\",\n    //     \"inj\": 99,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }, {\n    //     \"name\": \"R2\",\n    //     \"inj\": 99,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }, {\n    //     \"name\": \"R2\",\n    //     \"inj\": 99,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }, {\n    //     \"name\": \"R2\",\n    //     \"inj\": 99,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }, {\n    //     \"name\": \"R2\",\n    //     \"inj\": 99,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }, {\n    //     \"name\": \"R2\",\n    //     \"inj\": 99,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }, {\n    //     \"name\": \"R2\",\n    //     \"inj\": 99,\n    //     \"bear\": 90,\n    //     \"under\": 80,\n    //     \"over\": 75,\n    // }\n    \n    // ]\n    \n    // const valueSubscriptionInfo= [{\n    //   type: \"asset\",\n    //   entityType: \"DEVICE\",\n    //   entityId: \"6db8cf40-77a9-11ed-950a-7be42e141070\"\n    // }];\n    // valueSubscriptionInfo[0].attributes = [\n    //     {name: 'consecutiveOilAlert'}\n    //   ];\n    // const subscriptionOptions = {\n    //   callbacks: {\n    //     onDataUpdated: function(subscription, detectChanges){\n    //         console.log(\"onDataUpdated: \",subscription, detectChanges)\n    //     } ,\n    //     onDataUpdateError:function(subscription, e){\n    //         console.log(\"onDataUpdated: \",subscription, e)\n    //     }\n    //   }\n    // };\n\n    // self.ctx.customSubscription=self.ctx.subscriptionApi.createSubscriptionFromInfo(\n    //   \"latest\", valueSubscriptionInfo, subscriptionOptions, false, true).subscribe(\n    //   (subscription) => {\n    //       console.log(\"subscrition call back\")\n    //   }\n    // );\n}\nself.onDataUpdated=function(){\n    \n}\n\nself.actionSources = function() {\n    return {\n        'elementClick': {\n            name: 'widget-action.element-click',\n            multiple: true\n        }\n    };\n}\n\nself.onDestroy = function() {}",
      "settingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"required\": [\"cardHtml\"],\n        \"properties\": {\n            \"cardCss\": {\n                \"title\": \"CSS\",\n                \"type\": \"string\",\n                \"default\": \".card {\\n font-weight: bold; \\n}\"\n            },\n            \"cardHtml\": {\n                \"title\": \"HTML\",\n                \"type\": \"string\",\n                \"default\": \"<div class='card'>HTML code here</div>\"\n            }\n        }\n    },\n    \"form\": [\n        {\n            \"key\": \"cardCss\",\n            \"type\": \"css\"\n        },           \n        {\n            \"key\": \"cardHtml\",\n            \"type\": \"html\"\n        }    \n    ]\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"static\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"rgb(255, 255, 255)\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{\"cardHtml\":\"<div class='card'>HTML code here</div>\",\"cardCss\":\".card {\\n    font-weight: bold;\\n    font-size: 32px;\\n    color: #999;\\n    width: 100%;\\n    height: 100%;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n}\"},\"title\":\"Cylinder View\",\"dropShadow\":false,\"enableFullscreen\":false,\"enableDataExport\":true,\"widgetStyle\":{},\"widgetCss\":\"\",\"pageSize\":1024,\"noDataDisplayMessage\":\"\",\"showLegend\":false}"
    },
    "bundleAlias" : "nt_widgets_2",
    "createdTime" : 1677214599592,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9fb67280-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "cylinderviewhorizontal",
    "name" : "CylinderViewHorizontal",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 9,
      "sizeY" : 6,
      "resources" : [ ],
      "templateHtml" : "<div class=\"ntContainer\">\n    <!--template to view single value in circle-->\n    <ng-template #valueTemplate let-value=\"value\"\n        let-safe=\"safe\" let-warning=\"warning\">\n        <span class=\"valueCircleValue\" [title]=\"value\" *ngIf=\"value!=undefined\"\n            style=\"margin:auto\"\n            [ngStyle]=\"{'background-image': 'conic-gradient('+\n            (value > safe ? '#0EC23E' : (value>warning ? '#EF7F30' : '#E93800'))\n            +' 0deg '+(value*3.6)+'deg, #ffffff '+(value*3.6)+'deg 360deg'+')'}\">\n            <span class=\"valueCircleLegend\"\n                [ngStyle]=\"{'background-color': value > safe ? '#0EC23E' : (value > warning ? '#EF7F30' : '#E93800')}\"></span>\n        </span>\n        \n    </ng-template>\n    \n<!--template to view main lines with linear guage-->\n<ng-template #headerTemplate let-key=\"key\" let-value=\"value\"\n    let-safe=\"safe\" let-warning=\"warning\">\n    <span fxLayout=\"column\" fxLayoutAlign=\"center center\"\n        style=\"margin:0px;width:100%;\" fxLayoutGap=\"10px\">\n\n        <!--<div class=\"semi-circle-donut\"-->\n        <!--    [ngStyle]=\"{'background-image': 'conic-gradient(from -90deg at 50% 100%, '+-->\n        <!--(value > safe ? '#0EC23E' : (value>warning ? '#EF7F30' : '#E93800'))-->\n        <!--+' 0deg '+(value*1.8)+'deg, transparent '+(value*1.8)+'deg 180deg'+')'}\">-->\n\n        <!--    <div class=\"semi-circle-donut2\">-->\n        <!--        <div class=\"semi-circle-donut-value\">-->\n        <!--            {{value}}%</div>-->\n        <!--    </div>-->\n        <!--</div>-->\n\n            <div style=\"width:100%;max-width:100px;background-color:#EDEFF4\" [title]='value'>\n                <div class=\"bar\" [ngStyle]=\"{'width': value+'%', 'background-color': \n        (value > safe ? '#0EC23E' : (value>warning ? '#EF7F30' : '#E93800'))}\" >\n                </div>\n                \n            </div>\n\n\n        <span class=\"header\" [title]=\"headerTitle[key]\">\n            {{headerTitle[key]}}\n        </span>\n\n    </span>\n</ng-template>\n<div fxLayout=\"column\" fxFill  fxLayoutGap=\"10px\">\n    \n<div fxLayout=\"row\" fxLayoutAlign=\"space-between\" >\n    <!--title-->\n    <span class=\"sectionTitle\">Cylinder Indicator</span>\n    <!--legend-->\n    <span class=\"sectionTitle\" fxLayout=\"row\" fxLayoutGap=\"10px\">\n                    <span><span class=\"legendSymbol\" style=\"background-color:#E93800\"></span> <span class=\"legendText\">Alert</span></span>\n                    <span><span class=\"legendSymbol\" style=\"background-color:#EF7F30\"></span> <span class=\"legendText\">Warning</span></span>\n                    <span><span class=\"legendSymbol\" style=\"background-color:#0EC23E\"></span> <span class=\"legendText\">Good</span></span>\n                </span>\n</div>\n\n<table mat-table [dataSource]=\"ctx.cylinderValues\" style=\"border: '2px solid #E1E1E1'\"\n    class=\"mat-elevation-z8\"\n    *ngIf=\"ctx.cylinderValues!=undefined\">\n    <!--display header-->\n    <ng-container matColumnDef=\"name\" sticky>\n        <th mat-header-cell *matHeaderCellDef></th>\n        <td mat-cell *matCellDef=\"let element\">\n            <!--{{element.name}}-->\n            <ng-container\n                *ngTemplateOutlet=\"headerTemplate;context:{'key':element.name,'value':ctx.headerValues[element.name],'safe':safe,'warning':warning}\">\n            </ng-container>\n\n        </td>\n    </ng-container>\n\n    <!-- Name Column -->\n    <!-- loop thorught cylinder index to display cylinder values -->\n    <ng-container *ngFor=\"let column of ctx.$scope.displayedColumns\">\n\n    <!-- loop thorught value type to display cylinder values -->\n    <ng-container [matColumnDef]=\"column\" *ngIf=\"column!='name'\">\n        <th mat-header-cell *matHeaderCellDef>\n            {{column}}\n\n        </th> \n        <td mat-cell *matCellDef=\"let element\">\n            <ng-container\n                *ngTemplateOutlet=\"valueTemplate;context:{'value':element[column],'safe':safe,'warning':warning}\">\n            </ng-container>\n\n        </td>\n    </ng-container>\n\n        \n    </ng-container>\n\n\n    <tr mat-header-row *matHeaderRowDef=\"displayedColumns;sticky: true\">\n    </tr>\n    <tr mat-row\n        *matRowDef=\"let row; columns: displayedColumns;\"\n        [ngStyle]=\"{'border-bottom-color': 'red'}\"></tr>\n</table>    \n</div>\n    \n</div>\n",
      "templateCss" : "#container {\n    overflow: auto;\n    height: 100%;\n}\n.bar{\n    height: 10px;\n    border-radius: 5px;\n}\n::-webkit-scrollbar { \n    caret-color: blue !important;\n    -ms-overflow-style: none !important;  \n    scrollbar-width: 5px !important;  \n    scrollbar-height: 5px !important;  \n    display: inline-block !important;  \n}\n::-webkit-scrollbar-thumb {\n  background-color: rgba(0, 0, 0, 0.2);\n  height: auto;\n  width:auto;\n}\n\n.mat-table {\n    box-shadow: none;\n    overflow: auto !important;\n    \n }\n\ntr td,\ntr th {\n    border-bottom: 2px solid #E1E1E1 !important;\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 19px;\n    color: #696969;\n    text-align: center;\n    padding: 10px;\n\n}\ntr:last-child td{\n    border-bottom:  none !important;\n}\n\n.header {\n    text-align: center;\n    text-overflow: ellipsis !important;\n    overflow: hidden;\n    width: 108px;\n    font-family: 'Inter' !important;\n    font-style: normal !important;\n    font-weight: 500 !important;\n    font-size: 16px !important;\n    line-height: 19px !important;\n    color: #000000 !important;\n}\n\n.valueCircleLegend {\n    display: relative;\n    display: inline-block;\n    border-radius: 100%;\n    /*color: red;*/\n    border: 4px solid white;\n    height: 18px;\n    width: 18px;\n    ;\n}\n\n.valueCircleValue {\n    width: 26px;\n    height: 26px;\n    /*display: inline-block;*/\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    /*height: 9px;*/\n    /*width: 9px;;*/\n}\n\n.valueRow {\n    padding: 12px 0;\n    text-align: center !important;\n}\n\n\n\n.headerCircle {\n    display: inline-block;\n    transform: rotateZ(-90deg);\n    height: 98px !important;\n    width: 48px !important;\n    border-radius: 0 150px 150px 0;\n    background-color: green;\n    display: flex;\n    align-items: center;\n    \n\n\n}\n\n.headerCircleHole {\n    display: inline-block;\n    /*transform: rotateZ(-90deg);*/\n    height: 66px !important;\n    width: 32px !important;\n    border-radius: 0 150px 150px 0;\n    background-color: white;\n}\n\n\n.semi-circle-donut {\n    width: 98px;\n    height: 48px;\n    border-radius: 100px 100px 0 0;\n    background-color: #EDEFF4;\n    position: relative;\n    /*background-image: conic-gradient(at 50% 100%, #ff0000,  #00ff00 );*/\n    /*background-position: bottom -50% right 50%;*/\n\n    /*from 45deg, #ff0000, #00ff00 to 135deg*/\n}\n\n.semi-circle-donut2 {\n    width: 66px;\n    height: 32px;\n    border-radius: 50px 50px 0 0;\n    background-color: white;\n    position: absolute;\n    top: 16px;\n    left: 16px;\n    align-items: end;\n    display: flex;\n    justify-content: center;\n\n}\n\n.semi-circle-donut-value {\n    background-color: transparent;\n    display: flex;\n    align-items: end;\n    justify-content: center;\n\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 19px;\n    text-transform: capitalize;\n    color: #000000;\n\n}\n\n\n.legendSymbol{\n    height: 8px;\n    width:8px;\n    display: inline-block;\n    border-radius: 100%;\n}\n.legendText{\n    margin-left: 4px;\n}\n.sectionTitle{\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    color: #696969;\n}",
      "controllerScript" : "self.onInit = function() { \n    \n    self.ctx.$scope.safe=33;\n    self.ctx.$scope.warning=33; \n    // header title to view on html\n    self.ctx.$scope.headerTitle = {\n        'BearingBis':\"Condition of Cylinder Moving Parts\",\n        'Bearing':\"Bearing Condition\",\n        'InjectionCondition':\"Fuel Injection Performance\", \n        'Compression':\"Compression in Cylinders\",\n        'Misfiring':\"Misfiring\"\n    } \n    self.ctx.$scope.displayedColumns = ['name', 'C0','C1'\n    ];\n\n    // header values \n    self.ctx.headerValues = {\n        \"BearingBis\": 0,\n        \"Bearing\": 0,\n        \"InjectionCondition\": 0,\n        \"Compression\": 0,\n        \"Misfiring\": 0,\n    }\n    \n    self.ctx.cylinderValues=[]\n    \n    \n    //\"/api/plugins/telemetry/\"+(self.ctx.datasources[0].type==\"function\"?\"ASSET\":self.ctx.datasources[0].entityType)+\"/\"+(self.ctx.datasources[0].type==\"function\"?\"0a5ebb10-b405-11ed-b907-3bebb3a56b7b\":self.ctx.datasources[0].entityId)+\"/keys/timeseries\"\n\n    // fetch telemetery key to understand number of cylinders\n    self.ctx.http.get(\"/api/plugins/telemetry/\"+(self.ctx.datasources[0].type==\"function\"?\"ASSET\":self.ctx.datasources[0].entityType)+\"/\"+(self.ctx.datasources[0].type==\"function\"?\"0a5ebb10-b405-11ed-b907-3bebb3a56b7b\":self.ctx.datasources[0].entityId)+\"/keys/timeseries\").subscribe(function (result){ \n        \n        \n        var globalValueKeys=[\"BearingBis_valueInPercent\",\"Bearing_valueInPercent\",\"Compression_valueInPercent\",\"InjectionCondition_valueInPercent\",\"Misfiring_valueInPercent\"]\n        // filter local cylinder specific values\n        var cylKeys= result.filter(e=>e.startsWith('BearingBis_cylinderValues_') || e.startsWith('Bearing_cylinderValues_') || e.startsWith('InjectionCondition_cylinderValues_') || e.startsWith('Compression_cylinderValues_')  || e.startsWith(\"Misfiring_cylinderValues_\") )\n        // combine with global cylinder values\n        var finalKeys=globalValueKeys.concat(cylKeys);\n\n        // prepare to ubscribe for values\n        const valueSubscriptionInfo= [{ \n          type: \"entity\",\n          entityType: (self.ctx.datasources[0].type==\"function\"?\"ASSET\":self.ctx.datasources[0].entityType),\n          entityId: (self.ctx.datasources[0].type==\"function\"?\"0a5ebb10-b405-11ed-b907-3bebb3a56b7b\":self.ctx.datasources[0].entityId)\n        }];\n        valueSubscriptionInfo[0].timeseries = finalKeys.map(function(e){ return {name: e}});\n        const subscriptionOptions = {\n          callbacks: { \n          }\n        };\n     \n        self.ctx.customSubscription=self.ctx.subscriptionApi.createSubscriptionFromInfo(\n          \"latest\", valueSubscriptionInfo, subscriptionOptions, false, true).subscribe(\n          (subscription) => {\n              \n              // convert alues in row column for table\n                var key_values={};\n                var _displayedColumns=[\"name\"]\n                var _headers=[]\n                subscription.data.forEach(function(key_value){ \n                    var key_split=key_value.dataKey.name.split(\"_\")\n                    if(key_split.length>2){\n                        if(key_values[key_split[0]]==undefined){\n                          key_values[key_split[0]]={}\n                        }\n                        key_values[key_split[0]][\"C\"+key_split[2]]=key_value.data[0][1]\n\n                        if(_displayedColumns.includes(\"C\"+key_split[2])==false){\n                            _displayedColumns.push(\"C\"+key_split[2]) \n                        }\n                    }  \n                    \n                    else if(key_value.data[0][1]!=\"\"){\n                        _headers[key_split[0]]=key_value.data[0][1]\n                    }\n                })\n                self.ctx.$scope.displayedColumns=_displayedColumns \n                self.ctx.headerValues=_headers \n                var newDataArray=[]\n                for (const [k, v] of Object.entries(key_values)){\n                    newDataItem={}\n                    Object.assign(newDataItem, v);\n                    newDataItem[\"name\"]=k\n                    newDataArray.push(newDataItem)\n                } \n                self.ctx.cylinderValues=newDataArray;\n                self.ctx.detectChanges();\n                self.onResize();\n          }\n        );\n\n    });\n}\nself.onResize=function(){\n    // resize vertically to take not scroll state\n    var container=$(self.ctx.$container).find(\".ntContainer\")\n    var stateContainer=$(self.ctx.$container).closest('.tb-dashboard-state-container')\n    stateContainer.height(container.height())\n\n}\n\nself.actionSources = function() {\n    return {\n        'elementClick': {\n            name: 'widget-action.element-click',\n            multiple: true\n        }\n    };\n}\n\nself.onDestroy = function() {\n    self.ctx.customSubscription.unsubscribe();\n}",
      "settingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"required\": [\"cardHtml\"],\n        \"properties\": {\n            \"cardCss\": {\n                \"title\": \"CSS\",\n                \"type\": \"string\",\n                \"default\": \".card {\\n font-weight: bold; \\n}\"\n            },\n            \"cardHtml\": {\n                \"title\": \"HTML\",\n                \"type\": \"string\",\n                \"default\": \"<div class='card'>HTML code here</div>\"\n            }\n        }\n    },\n    \"form\": [\n        {\n            \"key\": \"cardCss\",\n            \"type\": \"css\"\n        },           \n        {\n            \"key\": \"cardHtml\",\n            \"type\": \"html\"\n        }    \n    ]\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"entityAliasId\":null,\"filterId\":null,\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Sin\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.6805953690190907,\"funcBody\":\"return Math.round(1000*Math.sin(time/5000));\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"cardCss\":\".card {\\n font-weight: bold; \\n}\",\"cardHtml\":\"<div class='card'>HTML code here</div>\"},\"title\":\"CylinderViewHorizontal\",\"useDashboardTimewindow\":true}"
    },
    "bundleAlias" : "nt_widgets_2",
    "createdTime" : 1678782604383,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "6b65fef0-c242-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "cylinderviewlatestvalue",
    "name" : "CylinderViewLatestValue",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 9,
      "sizeY" : 6,
      "resources" : [ ],
      "templateHtml" : "<ng-template #valueTemplate let-value=\"value\"\n    let-safe=\"safe\" let-warning=\"warning\">\n    <span class=\"valueCircleValue\" [title]=\"value\" *ngIf=\"value!=undefined\"\n        style=\"margin:auto\"\n        [ngStyle]=\"{'background-image': 'conic-gradient('+\n        (value > safe ? '#0EC23E' : (value>warning ? '#EF7F30' : '#E93800'))\n        +' 0deg '+(value*3.6)+'deg, #ffffff '+(value*3.6)+'deg 360deg'+')'}\">\n        <span class=\"valueCircleLegend\"\n            [ngStyle]=\"{'background-color': value > safe ? '#0EC23E' : (value > warning ? '#EF7F30' : '#E93800')}\"></span>\n\n    </span>\n</ng-template>\n<ng-template #headerTemplate let-key=\"key\" let-value=\"value\"\n    let-safe=\"safe\" let-warning=\"warning\">\n    <span fxLayout=\"column\" fxLayoutAlign=\"center center\"\n        style=\"margin:0px;width:100%;\" fxLayoutGap=\"10px\">\n\n        <div class=\"semi-circle-donut\"\n            [ngStyle]=\"{'background-image': 'conic-gradient(from -90deg at 50% 100%, '+\n        (value > safe ? '#0EC23E' : (value>warning ? '#EF7F30' : '#E93800'))\n        +' 0deg '+(value*1.8)+'deg, transparent '+(value*1.8)+'deg 180deg'+')'}\">\n\n            <div class=\"semi-circle-donut2\">\n                <div class=\"semi-circle-donut-value\">\n                    {{value}}%</div>\n            </div>\n        </div>\n        <span class=\"header\" [title]=\"headerTitle[key]\">\n            {{headerTitle[key]}}\n        </span>\n\n    </span>\n</ng-template>\n<div fxLayout=\"column\" fxFill  fxLayoutGap=\"10px\">\n<div fxLayout=\"row\" fxLayoutAlign=\"space-between\" >\n    <span class=\"sectionTitle\">Cylinder Indicator</span>\n    <span class=\"sectionTitle\" fxLayout=\"row\" fxLayoutGap=\"10px\">\n                    <span><span class=\"legendSymbol\" style=\"background-color:#E93800\"></span> <span class=\"legendText\">Alert</span></span>\n                    <span><span class=\"legendSymbol\" style=\"background-color:#EF7F30\"></span> <span class=\"legendText\">Warning</span></span>\n                    <span><span class=\"legendSymbol\" style=\"background-color:#0EC23E\"></span> <span class=\"legendText\">Good</span></span>\n                </span>\n</div>\n    <table mat-table [dataSource]=\"ctx.cylinderValues\" style=\"border: '2px solid #E1E1E1'\"\n    class=\"mat-elevation-z8\"\n    *ngIf=\"ctx.cylinderValues!=undefined\">\n    <ng-container matColumnDef=\"name\" sticky>\n        <th mat-header-cell *matHeaderCellDef></th>\n        <td mat-cell *matCellDef=\"let element\">\n            {{element.name}}\n        </td>\n    </ng-container>\n\n    <!-- Name Column -->\n    <ng-container matColumnDef=\"bearingBits\">\n        <th mat-header-cell *matHeaderCellDef\n            style=\"height:114px\">\n            <ng-container\n                *ngTemplateOutlet=\"headerTemplate;context:{'key':'bearingBits','value':ctx.headerValues['bearingBits'],'safe':safe,'warning':warning}\">\n            </ng-container>\n\n        </th>\n        <td mat-cell *matCellDef=\"let element\">\n            <ng-container\n                *ngTemplateOutlet=\"valueTemplate;context:{'value':element.bearingBits,'safe':safe,'warning':warning}\">\n            </ng-container>\n\n        </td>\n    </ng-container>\n\n    <!-- Weight Column -->\n    <ng-container matColumnDef=\"bear\">\n        <th mat-header-cell *matHeaderCellDef>\n            <ng-container\n                *ngTemplateOutlet=\"headerTemplate;context:{'key':'bear','value':ctx.headerValues['bear'],'safe':safe,'warning':warning}\">\n            </ng-container>\n\n        </th>\n\n        <td mat-cell *matCellDef=\"let element\">\n            <ng-container\n                *ngTemplateOutlet=\"valueTemplate;context:{'value':element.bear,'safe':safe,'warning':warning}\">\n            </ng-container>\n        </td>\n    </ng-container>\n\n    <!-- Symbol Column -->\n    <ng-container matColumnDef=\"injCond\">\n        <th mat-header-cell *matHeaderCellDef>\n            <ng-container\n                *ngTemplateOutlet=\"headerTemplate;context:{'key':'injCond','value':ctx.headerValues['injCond'],'safe':safe,'warning':warning}\">\n            </ng-container>\n\n        </th>\n\n        <td mat-cell *matCellDef=\"let element\">\n            <ng-container\n                *ngTemplateOutlet=\"valueTemplate;context:{'value':element.injCond,'safe':safe,'warning':warning}\">\n            </ng-container>\n        </td>\n\n    </ng-container>\n    <!-- Symbol Column -->\n    <ng-container matColumnDef=\"compression\">\n        <th mat-header-cell *matHeaderCellDef>\n            <ng-container\n                *ngTemplateOutlet=\"headerTemplate;context:{'key':'compression','value':ctx.headerValues['compression'],'safe':safe,'warning':warning}\">\n            </ng-container>\n\n        </th>\n\n        <td mat-cell *matCellDef=\"let element\">\n            <ng-container\n                *ngTemplateOutlet=\"valueTemplate;context:{'value':element.compression,'safe':safe,'warning':warning}\">\n            </ng-container>\n        </td>\n\n    </ng-container>\n\n    <ng-container matColumnDef=\"misfiring\">\n        <th mat-header-cell *matHeaderCellDef>\n            <ng-container\n                *ngTemplateOutlet=\"headerTemplate;context:{'key':'misfiring','value':ctx.headerValues['misfiring'],'safe':safe,'warning':warning}\">\n            </ng-container>\n\n        </th>\n\n        <td mat-cell *matCellDef=\"let element\">\n            <ng-container\n                *ngTemplateOutlet=\"valueTemplate;context:{'value':element.misfiring,'safe':safe,'warning':warning}\">\n            </ng-container>\n        </td>\n\n    </ng-container>\n\n\n    <tr mat-header-row *matHeaderRowDef=\"displayedColumns;sticky: true\">\n    </tr>\n    <tr mat-row\n        *matRowDef=\"let row; columns: displayedColumns;\"\n        [ngStyle]=\"{'border-bottom-color': 'red'}\"></tr>\n</table>    \n</div>\n",
      "templateCss" : "#container {\n    overflow: auto;\n}\n\n::-webkit-scrollbar { \n    caret-color: blue !important;\n    -ms-overflow-style: none !important;  \n    scrollbar-width: 5px !important;  \n    scrollbar-height: 5px !important;  \n    display: inline-block !important;  \n}\n::-webkit-scrollbar-thumb {\n  background-color: rgba(0, 0, 0, 0.2);\n  height: auto;\n  width:auto;\n}\n\n.mat-table {\n    box-shadow: none;\n    overflow: auto !important;\n    \n }\n\ntr td,\ntr th {\n    border-bottom: 2px solid #E1E1E1 !important;\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 19px;\n    color: #696969;\n\n}\ntr:last-child td{\n    border-bottom:  none !important;\n}\n\n.header {\n    text-align: center;\n    text-overflow: ellipsis !important;\n    overflow: hidden;\n    width: 108px;\n    font-family: 'Inter' !important;\n    font-style: normal !important;\n    font-weight: 500 !important;\n    font-size: 16px !important;\n    line-height: 19px !important;\n    color: #000000 !important;\n}\n\n.valueCircleLegend {\n    display: relative;\n    display: inline-block;\n    border-radius: 100%;\n    /*color: red;*/\n    border: 4px solid white;\n    height: 18px;\n    width: 18px;\n    ;\n}\n\n.valueCircleValue {\n    width: 26px;\n    height: 26px;\n    /*display: inline-block;*/\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    /*height: 9px;*/\n    /*width: 9px;;*/\n}\n\n.valueRow {\n    padding: 12px 0;\n    text-align: center !important;\n}\n\n\n\n.headerCircle {\n    display: inline-block;\n    transform: rotateZ(-90deg);\n    height: 98px !important;\n    width: 48px !important;\n    border-radius: 0 150px 150px 0;\n    background-color: green;\n    display: flex;\n    align-items: center;\n    \n\n\n}\n\n.headerCircleHole {\n    display: inline-block;\n    /*transform: rotateZ(-90deg);*/\n    height: 66px !important;\n    width: 32px !important;\n    border-radius: 0 150px 150px 0;\n    background-color: white;\n}\n\n\n.semi-circle-donut {\n    width: 98px;\n    height: 48px;\n    border-radius: 100px 100px 0 0;\n    background-color: #EDEFF4;\n    position: relative;\n    /*background-image: conic-gradient(at 50% 100%, #ff0000,  #00ff00 );*/\n    /*background-position: bottom -50% right 50%;*/\n\n    /*from 45deg, #ff0000, #00ff00 to 135deg*/\n}\n\n.semi-circle-donut2 {\n    width: 66px;\n    height: 32px;\n    border-radius: 50px 50px 0 0;\n    background-color: white;\n    position: absolute;\n    top: 16px;\n    left: 16px;\n    align-items: end;\n    display: flex;\n    justify-content: center;\n\n}\n\n.semi-circle-donut-value {\n    background-color: transparent;\n    display: flex;\n    align-items: end;\n    justify-content: center;\n\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 19px;\n    text-transform: capitalize;\n    color: #000000;\n\n}\n\n\n.legendSymbol{\n    height: 8px;\n    width:8px;\n    display: inline-block;\n    border-radius: 100%;\n}\n.legendText{\n    margin-left: 4px;\n}\n.sectionTitle{\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    color: #696969;\n}",
      "controllerScript" : "self.onInit = function() { \n    self.ctx.$scope.safe=33;\n    self.ctx.$scope.warning=33; \n    self.ctx.$scope.headerTitle = {\n        'bearingBits':\"Condition of Cylinder Moving Parts\",\n        'bear':\"Bearing Condition\",\n        'injCond':\"Fuel Injection Performance\", \n        'compression':\"Compression in Cylinders\",\n        'misfiring':\"Misfiring\"\n    }\n    self.ctx.$scope.displayedColumns = ['name', 'bearingBits',\n        'bear', 'injCond', 'compression','misfiring' \n    ];\n    self.ctx.headerValues = {\n        \"injCond\": 0,\n        \"bear\": 0,\n        \"bearingBits\": 0,\n        \"compression\": 0,\n        \"misfiring\": 0,\n    }\n    \n    self.ctx.cylinderValues=[] \n\n    self.ctx.http.get(\"/api/plugins/telemetry/ASSET/0a5ebb10-b405-11ed-b907-3bebb3a56b7b/keys/timeseries\").subscribe(function (result){\n        \n        var globalValueKeys=[\"BearingBis_valueInPercent\",\"Bearing_valueInPercent\",\"Compression_valueInPercent\",\"InjectionCondition_valueInPercent\",\"Misfiring_valueInPercent\"]\n        var cylKeys= result.filter(e=>e.startsWith('BearingBis_cylinderValues_') || e.startsWith('Bearing_cylinderValues_') || e.startsWith('InjectionCondition_cylinderValues_') || e.startsWith('Compression_cylinderValues_')  || e.startsWith(\"Misfiring_cylinderValues_\") )\n        var finalKeys=globalValueKeys.concat(cylKeys);\n\n        const valueSubscriptionInfo= [{ \n          type: \"entity\",\n          entityType: \"ASSET\",\n          entityId: \"0a5ebb10-b405-11ed-b907-3bebb3a56b7b\"\n        }];\n        valueSubscriptionInfo[0].timeseries = finalKeys.map(function(e){ return {name: e}});\n        const subscriptionOptions = {\n          callbacks: { \n          }\n        };\n     \n        self.ctx.customSubscription=self.ctx.subscriptionApi.createSubscriptionFromInfo(\n          \"latest\", valueSubscriptionInfo, subscriptionOptions, false, true).subscribe(\n          (subscription) => {\n                var key_values={};\n                var _displayedColumns=[\"name\"]\n                var _headers=[]\n                subscription.data.forEach(function(key_value){\n                    var key_split=key_value.dataKey.name.split(\"_\")\n                    if(key_split.length>2){\n                        if(key_values[key_split[0]+'_'+key_split[1]]==undefined){\n                            key_values[key_split[0]+'_'+key_split[1]]={}\n                        }\n                        key_values[key_split[0]+'_'+key_split[1]][key_split[2]]=key_value.data[0][1]\n                        \n                    }\n                    \n                    else if(key_value.dataKey.name==\"BearingBis_valueInPercent\" && key_value.data[0][1]!=\"\"){\n                        _displayedColumns.push(\"bearingBits\")\n                        _headers[\"bearingBits\"]=key_value.data[0][1]\n                        \n                    }\n                    else if(key_value.dataKey.name==\"Bearing_valueInPercent\" && key_value.data[0][1]!=\"\"){\n                        _displayedColumns.push(\"bear\")\n                        _headers[\"bear\"]=key_value.data[0][1]\n                        \n                    }\n                    else if(key_value.dataKey.name==\"Compression_valueInPercent\" && key_value.data[0][1]!=\"\"){\n                        _displayedColumns.push(\"compression\")\n                        _headers[\"compression\"]=key_value.data[0][1]\n                        \n                    }\n                    else if(key_value.dataKey.name==\"InjectionCondition_valueInPercent\" && key_value.data[0][1]!=\"\"){\n                        _displayedColumns.push(\"injCond\")\n                        _headers[\"injCond\"]=key_value.data[0][1]\n                    }\n                    else if(key_value.dataKey.name==\"Misfiring_valueInPercent\" && key_value.data[0][1]!=\"\"){\n                        _displayedColumns.push(\"misfiring\")\n                        _headers[\"misfiring\"]=key_value.data[0][1]\n                        \n                    }\n                })\n                self.ctx.$scope.displayedColumns=_displayedColumns \n                self.ctx.headerValues=_headers \n                var maxCyl=0;\n                Object.keys(key_values).forEach(function(e){\n                    if(Object.keys(key_values[e]).length>maxCyl){\n                        maxCyl=Object.keys(key_values[e]).length;\n                    }\n                }) \n                var newArray=[]\n                for (let i = 0; i < maxCyl; i++) {\n                    var item={name:\"C\"+(i+1)}\n                    if(key_values[\"BearingBis_cylinderValues\"][i.toString()]!=undefined){\n                      item[\"bearingBits\"]= key_values[\"BearingBis_cylinderValues\"][i.toString()]\n                    }\n                    if(key_values[\"Bearing_cylinderValues\"][i.toString()]!=undefined){\n                      item[\"bear\"]= key_values[\"Bearing_cylinderValues\"][i.toString()]\n                    }\n                    if(key_values[\"Compression_cylinderValues\"][i.toString()]!=undefined){\n                      item[\"compression\"]= key_values[\"Compression_cylinderValues\"][i.toString()]\n                    }\n                    if(key_values[\"InjectionCondition_cylinderValues\"][i.toString()]!=undefined){\n                      item[\"injCond\"]= key_values[\"InjectionCondition_cylinderValues\"][i.toString()]\n                    }\n                    if(key_values[\"Bearing_cylinderValues\"][i.toString()]!=undefined){\n                      item[\"misfiring\"]= key_values[\"Bearing_cylinderValues\"][i.toString()]\n                    }\n                    newArray.push(item)\n                } \n                self.ctx.cylinderValues=newArray;\n                self.ctx.detectChanges();\n          }\n        );\n\n    });\n}\n\nself.actionSources = function() {\n    return {\n        'elementClick': {\n            name: 'widget-action.element-click',\n            multiple: true\n        }\n    };\n}\n\nself.onDestroy = function() {\n    self.ctx.customSubscription.unsubscribe();\n}",
      "settingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"required\": [\"cardHtml\"],\n        \"properties\": {\n            \"cardCss\": {\n                \"title\": \"CSS\",\n                \"type\": \"string\",\n                \"default\": \".card {\\n font-weight: bold; \\n}\"\n            },\n            \"cardHtml\": {\n                \"title\": \"HTML\",\n                \"type\": \"string\",\n                \"default\": \"<div class='card'>HTML code here</div>\"\n            }\n        }\n    },\n    \"form\": [\n        {\n            \"key\": \"cardCss\",\n            \"type\": \"css\"\n        },           \n        {\n            \"key\": \"cardHtml\",\n            \"type\": \"html\"\n        }    \n    ]\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"CylinderViewLatestValue\"}"
    },
    "bundleAlias" : "nt_widgets_2",
    "createdTime" : 1678354342516,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "4b6f1340-be5d-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "engine_health",
    "name" : "horizontal menu bar",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 6,
      "sizeY" : 2,
      "resources" : [ ],
      "templateHtml" : "<div class=\"btn-wrapper\"  fxLayout=\"row\" *ngIf=\"btnActive != undefined\">\n    <!--left slider button-->\n     <button class=\"icon icon_left\" >\n         <mat-icon class=\"scroll-left\" (click)=\"scrollLeft($event)\">keyboard_arrow_left</mat-icon>\n    </button>\n    <!--menu buttons -->\n    <!--<button class=\"buttons\" *ngFor=\"let item of ctx.widget.config.settings.BtnLabel\" (click)=\"buttontypeSelected(item.BtnName)\"    [ngClass]=\"btnActive['type'] == item.BtnName ? 'active' :'buttons'\">-->\n    <!--    {{item.BtnName}}</button>-->\n\n    {{menuItems | json}}\n    <button class=\"buttons\" *ngFor=\"let item of ctx.menuItems\" (click)=\"buttontypeSelected(item)\"    [ngClass]=\"btnActive['type'] == item ? 'active' :'buttons'\"\n    >{{item}}</button>\n\n    \n    <!--right side slider button-->\n    <button class=\"icon icon_right\" >\n        <mat-icon class=\"scroll-right\" (click)=\"scrollRight()\">keyboard_arrow_right</mat-icon>\n    </button>\n</div>",
      "templateCss" : "\n.btn-wrapper{\n overflow-x: hidden;\n width:100%;\n height:100%;\n /*border:1px solid #1B4383; */\n /*border-radius: 8px;*/\n /*z-index: -1;*/\n\n}\n.buttons{\n    border:none;\n    white-space: nowrap;\n    background: #fff;\n    color:#696969;\n    padding: 0 30px ;\n    cursor: pointer;\n}\n\n.active{\n    background-color:#1B4383;\n    color:#fff;\n}\n.icon{ \n    position:absolute;\n    border:1px solid yellow;\n    height:100%;\n    overflow: hidden;\n    width:30px; \n    border:none; \n    cursor: pointer; \n    background-color: #fff;\n    /*border-bottom:2px solid #1B4383;*/\n}  \n.icon_left{\n    left:0px;\n    /*border-radius:8px 0 0 8px; */ \n    box-shadow:2px 2px 5px #888888;\n}\n.icon_right{\n    right:0px;\n    /*border-radius:0px 8px 8px 0px; */\n    box-shadow:-2px -2px 5px #888888;\n}",
      "controllerScript" : "self.onInit = function() {\n    self.ctx.$scope.getMenuList =new Function([\"widgetContext\"], self.ctx.settings.menuList)\n    self.ctx.menuItems=self.ctx.$scope.getMenuList(self.ctx);\n\n\n    // scroll left on left slider button click\n    self.ctx.$scope.scrollLeft=function(event){ \n        self.ctx.$container.children('.btn-wrapper:eq(0)').animate({ scrollLeft: \"-=200px\"});\n    } \n    // scroll right on right slider button click\n    self.ctx.$scope.scrollRight=function(){\n        self.ctx.$container.children('.btn-wrapper:eq(0)').animate({ scrollLeft: \"+=200px\" }); \n    }\n  //make first button as active\n//   self.ctx.$scope.btnActive ={ \n//     \"type\" :self.ctx.menuItems[0]\n//   }\n \n  //call button selected action\n  self.ctx.$scope.buttontypeSelected= function(name){\n    var menuAction = ctx.actionsApi.getActionDescriptors('menuClicked');\n    if (menuAction.length>0) {\n        self.ctx.actionsApi.handleWidgetAction(\n            null, menuAction[0], undefined,\n            undefined,\n            name);\n    }\n    self.ctx.$scope.btnActive={\"type\" :name};\n  }\n\n    self.ctx.$scope.buttontypeSelected(self.ctx.menuItems[0])\n\n  self.ctx.detectChanges();\n  self.onResize(); \n}\nself.typeParameters=function(){\n       return {\n\n        dataKeysOptional: true, //Whether this widget can be configured with datasources without data keys\n        useCustomDatasources:true,\n        datasourcesOptional: true,\n    } \n}\n\n\nself.onDataUpdated = function() {\n    \n}\n \nself.onResize = function() { \n    // self.ctx.value =\"hello\"\n    var container = self.ctx.$container.find('.btn-wrapper:eq(0)')[0].clientWidth; \n    var scrollContainer = self.ctx.$container.find('.btn-wrapper:eq(0)')[0].scrollWidth;\n    var icon = self.ctx.$container.find('button.icon')\n     if(container<scrollContainer){\n        for(var i=0; i<icon.length;i++){\n            icon[i].style.display =\"block\";\n        }\n        self.ctx.$container.find('.btn-wrapper button:eq(1)').css('padding-left', '60px');\n        self.ctx.$container.find('.btn-wrapper button:nth-last-child(2)').css('padding-right', '60px');\n    }else{\n        for(var i=0; i<icon.length;i++){\n            icon[i].style.display =\"none\";\n   \n        }\n        self.ctx.$container.find('.btn-wrapper button:eq(1)').css('padding-left', '30px');\n        self.ctx.$container.find('.btn-wrapper button:nth-last-child(2)').css('padding-right', '30px');\n    }\n    self.ctx.detectChanges();\n}\nself.actionSources = function() {\n    return {\n        'menuClicked': {\n            name: 'Menu Clicked',\n            multiple: false\n        }\n    };\n}\nself.onDestroy = function() {\n}\n",
      "settingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Comment\",\n        \"properties\": {\n            \"menuList\": {\n                \"title\": \"Menu List(widgetContext)\",\n                \"type\": \"string\"\n            },\n\n            \"BtnLabel\": {\n                \"type\": \"array\",\n                \"title\": \"button label \",\n                \"items\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"BtnName\": {\n                            \"title\": \"button Name\",\n                            \"type\": \"string\"\n                        }\n                    }\n                }\n            }\n        }\n    },\n    \"form\": [\n        {\n            \"key\": \"menuList\",\n            \"type\": \"javascript\"\n        },\n        {\n        \"key\": \"BtnLabel\",\n        \"add\": \"New\",\n        \"style\": {\n            \"add\": \"btn-success\"\n        },\n        \"items\": [\n            \"BtnLabel[].BtnName\"\n        ]\n    }]\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0px\",\"settings\":{\"BtnLabel\":[{\"BtnName\":\"Engine Health\"},{\"BtnName\":\"Compression\"},{\"BtnName\":\"Bearing\"},{\"BtnName\":\"Oil\"}],\"menuList\":\"return [\\\"testMenu\\\"]\"},\"title\":\"horizontal menu bar\",\"showTitleIcon\":false,\"dropShadow\":false,\"enableFullscreen\":false,\"widgetStyle\":{\"border\":\"1px solid #1B4383\",\"border-radius\":\"8px\"},\"widgetCss\":\"\",\"pageSize\":1024,\"noDataDisplayMessage\":\"\",\"showLegend\":false,\"enableDataExport\":false}"
    },
    "bundleAlias" : "nt_widgets_2",
    "createdTime" : 1677230396718,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "678894e0-b424-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "engine_status",
    "name" : "Engine Status",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 9.5,
      "sizeY" : 5.5,
      "resources" : [ ],
      "templateHtml" : "<div fxLayout=\"row\" fxLayoutAlign=\"start stretch\" fxFill>\n    <div class=\"donut\" >\n        <div class=\"hole\">\n            <div fxLayout=\"column\" fxLayoutAlign=\"center\">\n                <span class=\"inPerc\">\n                {{totalCount}}\n                </span>\n                <span>{{ctx.widgetConfig.title}}</span>\n            </div>\n        </div>\n    </div>    \n    <div class=\"content\" fxLayout=\"column\" fxLayoutAlign=\"center\">\n        <table class=\"statusCard\" *ngIf=\"ctx.engines!=undefined\">\n            <tr><td>{{ctx.engines[\"good\"]}}</td><td>{{ctx.engines[\"moderate\"]}}</td></tr>\n            <tr>\n                <td><span class=\"stat_mark\" ></span>Good</td>\n                <td><span class=\"stat_mark\"></span>Moderate</td>\n            </tr>\n            <tr><td>{{ctx.engines[\"bad\"]}}</td>\n                <!--<td>20</td>-->\n                </tr>\n            <tr>\n                <!--<td><span class=\"stat_mark\"></span>Semi-Moderate</td>-->\n                <td><span class=\"stat_mark\"></span>Bad</td></tr>\n        </table>\n    </div>\n</div>\n ",
      "templateCss" : ".stat_mark{\r\n    height: 8px;\r\n    width: 8px;\r\n    background: red;\r\n    display: inline-block;\r\n    border-radius:  100%;\r\n    margin-right: 4px;\r\n}\r\n.statusCard tr:nth-child(2) td{\r\n    padding-bottom: 24px;\r\n}\r\n.statusCard tr:nth-child(2) td:nth-child(1) .stat_mark{\r\n    background-color: #0EC23E;\r\n}\r\n.statusCard tr:nth-child(2) td:nth-child(2) .stat_mark{\r\n    background-color: #FFC164;\r\n}\r\n.statusCard tr:nth-child(4) td:nth-child(1) .stat_mark{\r\n    background-color: #EF7F30;\r\n}\r\n.statusCard tr:nth-child(4) td:nth-child(2) .stat_mark{\r\n    background-color: #E93800;\r\n}\r\n\r\n.statusCard td{\r\n    padding-right:  40px;\r\n    vertical-align: middle;\r\n}\r\n.statusCard tr:nth-child(odd) > td{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    font-size: 28px;\r\n    line-height: 34px;\r\n    color: #000000;\r\n}\r\n.statusCard tr:nth-child(even) > td{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 16px;\r\n    line-height: 19px;\r\n    color: #696969;\r\n}\r\n\r\n#container{\r\n    padding: 60px 0 60px 40px;\r\n}\r\n.content{\r\n    padding: 0 0 0 32px;\r\n}\r\n.status{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 16px;\r\n    line-height: 19px;\r\n    color: #0EC23E;\r\n}\r\n.status span{\r\n    border-right: 1px solid #EDEFF4;\r\n    padding:0 10px;\r\n    \r\n}\r\n\r\n.status span:first-child{\r\n    padding-left: 0;\r\n}\r\n.status span:last-child{\r\n    padding-right: 0;\r\n    border: none\r\n}\r\n\r\n.status .deactiveStatus{\r\n    color: #E93800;\r\n}\r\n.inPerc{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    font-size: 26px;\r\n    line-height: 31px;\r\n    text-align: center;\r\n    color: #3D3D3D; \r\n}\r\n.count{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 700;\r\n    font-size: 32px;\r\n    line-height: 39px;\r\n    color: #000000;\r\n}\r\n.count span{\r\n    font-weight: 600;\r\n    font-size: 20px;\r\n    /*line-height: 39px;*/\r\n    \r\n}\r\n.title{\r\n    font-family: 'Inter';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 16px;\r\n    line-height: 19px;\r\n    \r\n    /* Grey 1 */\r\n    \r\n    color: #696969;\r\n\r\n}\r\n.donut {\r\n  padding: 0;\r\n  margin: 0;\r\n  aspect-ratio: 1 / 1; \r\n  height: 100%;\r\n  border-radius: 50%;\r\n  background-color: #0EC23E;\r\n} \r\n.hole {\r\n  aspect-ratio: 1 / 1;\r\n   height: 90%;\r\n  border-radius: 50%;\r\n  background: #fff;\r\n  align-items: center;\r\n  justify-content: center;\r\n  display: flex;\r\n}\r\n \r\n.donut {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}",
      "controllerScript" : "self.onInit = function() {\n    self.ctx.$scope.getEngineStatus =\n        new Function([\"widgetContext\"], self.ctx.settings.getEngineStatus)\n\n\n}\n \nself.onDataUpdated = function() {\n    // set total counts \n    self.ctx.$scope.totalCount=self.ctx.datasources.length\n    self.ctx.engines=self.ctx.$scope.getEngineStatus(self.ctx)\n    \n    //convert status in degree to view circle with status color\n    var goodInDeg=(self.ctx.engines[\"good\"]*360)/self.ctx.$scope.totalCount\n    var moderateInDeg=(self.ctx.engines[\"moderate\"]*360)/self.ctx.$scope.totalCount\n    var badInDeg=(self.ctx.engines[\"bad\"]*360)/self.ctx.$scope.totalCount\n    \n    // update circle based on status\n    $(self.ctx.$container).find(\".donut\").css( 'background-image', 'conic-gradient(#0EC23E 0deg '+goodInDeg+'deg, #FFC164 '+goodInDeg+'deg '+(goodInDeg+moderateInDeg)+'deg, #E93800 '+(goodInDeg+moderateInDeg)+'deg 360deg)' );\n\n}\nself.typeParameters=function(){\n    return {\n        maxDatasources: -1, // Maximum allowed datasources for this widget, -1 - unlimited\n        maxDataKeys: -1, //Maximum allowed data keys for this widget, -1 - unlimited\n        dataKeysOptional: true //Whether this widget can be configured with datasources without data keys\n    }\n}\n\n\nself.onResize = function() {\n\n}\n\nself.onDestroy = function() {\n}\n",
      "settingsSchema" : "{\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"title\": \"Setting\",\r\n        \"properties\": {\r\n            \"getEngineStatus\": {\r\n                \"title\": \"getEngineStatus(widgetContext)\",\r\n                \"type\": \"string\"\r\n\r\n            }\r\n        }\r\n    },\r\n    \"form\": [\r\n        {\r\n            \"key\": \"getEngineStatus\",\r\n            \"type\": \"javascript\"\r\n        }\r\n        ]\r\n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"getEngineStatus\":\"return {good:0,moderate:1,bad:0}\"},\"title\":\"Engine Status\"}"
    },
    "bundleAlias" : "nt_widgets_2",
    "createdTime" : 1677214599588,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9fb5d640-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "npchart",
    "name" : "NPChart",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "timeseries",
      "sizeX" : 9.5,
      "sizeY" : 6.5,
      "resources" : [ ],
      "templateHtml" : "<!--tb-flot-line-widget-settings-->\r\n<!--<div id=\"header\" fxLayout=\"row\" -->\r\n<!--    fxLayoutAlign=\"space-between start\"  >-->\r\n<!--    <div class=\"widgetTitle\" >{{ctx.widgetConfig.title}}-->\r\n<!--    </div>-->\r\n<!--    <span *ngIf=\"ctx.widget.config.actions!==undefined\"-->\r\n<!--        fxLayout=\"row\" fxLayoutGap=\"20px\" class=\"actions\">-->\r\n<!--        <ng-container-->\r\n<!--            *ngFor=\"let action of ctx.widget.config.actions.action_button ; let i = index\">-->\r\n            <!--<mat-icon (click)=\"actionClicked($event,i,item)\">{{action.icon}}</mat-icon>-->\r\n<!--            <img *ngIf=\"ctx.customActionIcons!==undefined && ctx.customActionIcons[action.name]!=undefined\"-->\r\n<!--                [src]=\"ctx.customActionIcons[action.name]\"-->\r\n<!--                alt=\"\"-->\r\n<!--                (click)=\"actionClicked($event,i,item)\">-->\r\n<!--            <mat-icon (click)=\"actionClicked($event,i,item)\"-->\r\n<!--                *ngIf=\"ctx.customActionIcons==undefined ||  ctx.customActionIcons[action.name]==undefined\">-->\r\n<!--                {{action.icon}}-->\r\n<!--            </mat-icon>-->\r\n\r\n\r\n\r\n<!--        </ng-container>-->\r\n\r\n<!--        <mat-icon (click)=\"turnToFullScreen($event)\">-->\r\n<!--            {{ctx.dashboardWidget.isFullscreen?'fullscreen_exit':'fullscreen'}}-->\r\n<!--        </mat-icon>-->\r\n\r\n<!--    </span>-->\r\n\r\n<!--</div>-->\r\n<!--<div id=\"flotcontainer\" style=\"height:100%\">-->\r\n<!--</div>-->",
      "templateCss" : "mat-icon{\n    cursor: pointer;\n}\n.actions{\n    padding: 0 15px 0 0 ;\n}\n.nt-actions{\n    display: inline-block;   \n}\n.widgetTitle{\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    color: #696969;\n}\n.legend {\n    font-size: 13px;\n    line-height: 10px;\n}\n\n.legend table { \n    border-spacing: 0px;\n    border-collapse: separate;\n}\n\n\n.mouse-events .flot-overlay {\n    cursor: crosshair; \n}\n\n.tooltip {\n    border-radius: 100px ;\n    color: red;\n}\n\n.tb-legend-keys td .tb-legend-line{\n    height: 8px !important;\n    width: 21px !important;\n}\n.tb-legend-label{\n    font-family: 'Inter' !important; \n    font-style: normal !important;\n    font-weight: 400 !important;\n    font-size: 14px !important;\n    line-height: 17px !important;\n    color: #4F4F4F !important;\n}\n.tb-legend-value{\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 500;\n    font-size: 14px;\n    line-height: 17px;\n    text-align: center;\n    text-transform: capitalize;\n    color: #696969;\n}\n\n.tb-legend-header th{\n    padding-top: 10px !important;\n    /*padding-bottom: 24px !important;*/\n    font-family: 'Inter' !important;\n    font-style: normal !important;\n    font-weight: 500 !important;\n    font-size: 14px !important;\n    line-height: 17px !important;\n    /*text-align: center !important;*/\n    text-transform: capitalize !important;\n    color: #000000 !important;\n}\n.tb-legend-keys td{\n    padding:  12px !important;\n    \n}\ntb-legend{\n    max-height: 181px !important;\n}",
      "controllerScript" : "self.onInit = function() {\n    // self.ctx.$containerBackup=self.ctx.$container\n    // self.ctx.$container = self.ctx.$container.find(\"#flotcontainer\")  \n    self.ctx.flot = new TbFlot(self.ctx);\n\n    // add element for tooltip\n\t$(\"<div id='tooltip\"+self.ctx.widget.id+\"' class='tooltip'></div>\").css({\n\t\t\tposition: \"absolute\",\n\t\t\tdisplay: \"none\",  \n\t\t\tborder: \"1px solid #BEBEBE\", \n\t\t\t\"border-radius\":\"8px\",\n\t\t\tpadding: \"24px\", \n\t\t\t\"padding-bottom\":\"8px\",\n\t\t\t\"background-color\": \"#FFFFFF\",\n\t\t\tzIndex:10000\n\t\t}).appendTo(\"body\");\n\n    // add hover event to show custom popup\n\tself.ctx.flot.$element.bind(\"plothover\", function (event, pos, item) {\n\t\tif (!pos.x || !pos.y) {\n\t\t\treturn;\n\t\t} \n        var axes = self.ctx.flot.plot.getAxes();\n        var offset=self.ctx.flot.plot.getPlotOffset()\n\n        var canvasBound=self.ctx.flot.plot.getCanvas().getBoundingClientRect()\n        \n\t\t$(\"#tooltip\"+self.ctx.widget.id).css({\n\t\t    top: (canvasBound.y+axes.yaxis.p2c(pos.y) + $(\"#tooltip\"+self.ctx.widget.id).outerHeight()) <= $(\"body\").height() ? canvasBound.y+axes.yaxis.p2c(pos.y) : (canvasBound.y+axes.yaxis.p2c(pos.y) - $(\"#tooltip\"+self.ctx.widget.id).outerHeight()), \n\t\t    left:(canvasBound.x+axes.xaxis.p2c(pos.x)+offset.left+20+$(\"#tooltip\"+self.ctx.widget.id).outerWidth() <=$(\"body\").width() )?(canvasBound.x+axes.xaxis.p2c(pos.x)+offset.left+20):(\n\t\t        (canvasBound.x+axes.xaxis.p2c(pos.x))-($(\"#tooltip\"+self.ctx.widget.id).outerWidth())\n\t\t        )\n\t\t}).show();\n\n\n        var _time=\"\";\n\t    var data=self.ctx.flot.plot.getData().map(function(e){\n\t        var _value=undefined;\n\t        if(e.data.length>=1){\n    \t        for(var i=0;i<e.data.length;i++){ \n    \t            if(e.data[i][0]>pos.x ){\n    \t                if(i==0){\n                            _time=e.data[i][0]\n        \t                _value=e.data[i][1]\n    \t                }\n    \t                else{\n                            _time=e.data[i-1][0]\n        \t                _value=e.data[i-1][1]\n    \t                }\n    \t                break;\n    \t            } \n    \t        }\n    \t        if(_value==undefined){\n                    _value=e.data[e.data.length-1][1]\n    \t        }\n\t        }\n\t        return {\"label\":e.dataKey.label,\"value\":_value,\"color\":e.dataKey.color}\n\t    })\n\t    self.ctx.flot.hoveredPoint=_time\n\t\tvar newTooltip=$('<span></span>');\n\t\tvar timeObject = $(\"<div class='tooltip'></div>\");\n        timeObject.text(moment.unix(_time/1000).format(\"DD-MM-YYYY, hh:mm:ss\"));\n        timeObject.css({\"font-family\": 'Inter',\n            \"font-style\": \"normal\",\n            \"font-weight\": \"500\",\n            \"font-size\": \"16px\",\n            \"line-height\": \"20px\",\n            \"margin-bottom\":\"16px\",\n            \"color\": \"#505D6F\"});\n        timeObject.appendTo(newTooltip);\n\n        data.forEach(function(e){\n            if(e.value==undefined){\n                return;\n            }\n    \t\tvar toolTipItem=$('<span></span>');\n    \t\ttoolTipItem.css({\"display\":\"block\",\"margin-bottom\":\"16px\"});\n\n    \t\tvar _toolTipItemColor=$('<span></span>');\n    \t\t_toolTipItemColor.css({\"height\":\"8px\",\"width\":\"21px\",\"display\":\"inline-block\",\"background-color\":e.color,\"margin-right\":\"16px\"});\n            _toolTipItemColor.appendTo(toolTipItem);\n            toolTipItem.appendTo(newTooltip)\n\n    \t\tvar _toolTipItemLabel=$('<span>'+e.label+'</span>');\n    \t\t_toolTipItemLabel.css({\n    \t\t    \"height\":\"8px\",\n    \t\t  //  \"width\":\"21px\",\n    \t\t    \"display\":\"inline-block\",\n    \t\t    \"font-family\": 'Inter',\n                \"font-style\": \"normal\",\n                \"font-weight\": 400,\n                \"font-size\": \"14px\",\n                \"line-height\": \"17px\",\n                \"color\": \"#4F4F4F\"\n    \t\t    \n    \t\t});\n            _toolTipItemLabel.appendTo(toolTipItem);\n            \n    \t\tvar _toolTipItemValue=$('<span>'+e.value+'</span>');\n    \t\t_toolTipItemValue.css({\n    \t\t    \"float\":\"right\",\n    \t\t    \"height\":\"8px\",\n    \t\t  //  \"width\":\"21px\",\n    \t\t    \"display\":\"inline-block\",\n    \t\t    \"font-family\": 'Inter',\n                \"font-style\": \"normal\",\n                \"font-weight\": 500,\n                \"font-size\": \"14px\",\n                \"line-height\": \"17px\",\n                \"color\": \"#696969\"\n    \t\t    \n    \t\t});\n            _toolTipItemValue.appendTo(toolTipItem);\n            \n            toolTipItem.appendTo(newTooltip)\n        })\n\n        $(\"#tooltip\"+self.ctx.widget.id).html(newTooltip)\n        self.onResize();\n\n\t});\n    // hide popup when leave \n\tself.ctx.flot.$element.bind(\"mouseleave\", function(){\n\t\t\t\t$(\"#tooltip\"+self.ctx.widget.id).hide();\n\t\t\t\tself.ctx.flot.hoveredPoint=undefined\n                self.ctx.flot.update();\n\t});\n\t   // self.ctx.$scope.turnToFullScreen= function($event){\n    //     $event.stopPropagation(); \n    //     self.ctx.dashboardWidget.isFullscreen =!self.ctx.dashboardWidget.isFullscreen;\n    //     self.ctx.detectChanges();\n    //     self.ctx.$containerBackup.width('100%');\n\n    //     self.onResize();\n    // }\n\t   // self.ctx.$scope.actionClicked=function($event,i,item){\n    //         $event.stopPropagation();\n    //         var menuAction = ctx.actionsApi\n    //             .getActionDescriptors(\n    //                 'action_button');\n    //         if (menuAction != undefined) {\n    //             self.ctx.actionsApi.handleWidgetAction(\n    //                 null, menuAction[i], item.entity.id,\n    //                 item.entity.name,\n    //                 item);\n    //         }\n\n        \n    // }\n\n}\n\nself.onDataUpdated = function() {\n    self.ctx.flot.update();\n    console.log(self.ctx.flot)\n}\n\nself.onLatestDataUpdated = function() {\n    self.ctx.flot.latestDataUpdate();\n}\n\nself.onResize = function() {\n    self.ctx.detectChanges();\n    \n    // remove TB chart cross icon \n    self.ctx.flot.plot.getOptions().crosshair = {\n        mode: null, \n    }\n    // add custom draw hook if not added\n    if($.inArray(self.onFlotDraw,self.ctx.flot.plot.hooks.draw) == -1){\n        self.ctx.flot.plot.hooks.draw.push(self.onFlotDraw)\n    }\n    self.ctx.flot.updateData();\n    self.ctx.flot.resize(); \n}\n\nself.onEditModeChanged = function() {\n    self.ctx.flot.checkMouseEvents();\n    self.ctx.flot.resize();\n    self.ctx.flot.updateData();\n}\nself.actionSources = function() {\n    return {\n        'action_button': {\n            name: 'Action Button',\n            multiple: true\n        }\n    };\n}\n\nself.onDestroy = function() {\n    self.ctx.flot.destroy();\n}\n\nself.typeParameters = function() {\n    return {\n        hasAdditionalLatestDataKeys: true\n    };\n}\n\nself.onFlotDraw=function(plot, ctx){\n        axes = plot.getAxes();\n        xrange = {} \n        yrange = {}\n         \n        yrange.from = axes.yaxis.min;\n        yrange.to = axes.yaxis.max;\n\n        if (xrange.from == null) {\n            xrange.from = axes.xaxis.min;\n        } \n        if (xrange.to == null) {\n            xrange.to = axes.xaxis.max;\n        }\n        var offset=plot.getPlotOffset()\n        // //Draw Pointer\n        if(self.ctx.flot.hoveredPoint!=undefined){\n\n\t    self.ctx.flot.plot.getData().forEach(function(e){\n\t        var _value;\n\t        if(e.data.length>=1){\n    \t        if(self.ctx.flot.hoveredPoint==\"\"){\n    \t            _value=e.data[e.data.length-1]\n    \t        }\n    \t        else{\n        \t        _value=e.data.find(value=>value[0]==parseFloat(self.ctx.flot.hoveredPoint))\n    \t        }\n                ctx.beginPath();\n                // ctx.moveTo(axes.xaxis.p2c(_value[0])+offset.left, axes.yaxis.p2c(_value[1])+offset.top);\n                ctx.strokeStyle = e.dataKey.color;\n                ctx.lineWidth = 13;\n                ctx.arc(axes.xaxis.p2c(_value[0])+offset.left, axes.yaxis.p2c(_value[1])+offset.top, 3, 0, 2 * Math.PI);\n                ctx.stroke();            \n                \n                ctx.fillStyle = \"rgba(255, 255, 255, 1)\";\n                ctx.fill();\n                ctx.closePath();\t            \n\t        }\n\t    })\n        }\n}\n",
      "settingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \"actionIcons\": {\n                \"type\": \"array\",\n                \"title\": \"Action Icons\",\n                \"items\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"name\": {\n                            \"title\": \"Name\",\n                            \"type\": \"string\"\n\n                        },\n                        \"icon\": {\n                            \"title\": \"Icon\",\n                            \"type\": \"string\"\n\n                        }\n                }\n                }\n\n            },\n            \"stack\": { \n                \"title\": \"Stacking\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"smoothLines\": {\n                \"title\": \"Display smooth (curved) lines\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"thresholdsLineWidth\": {\n                \"title\": \"Default line width for all thresholds\",\n                \"type\": \"number\"\n            },\n            \"shadowSize\": {\n                \"title\": \"Shadow size\",\n                \"type\": \"number\",\n                \"default\": 4\n            },\n            \"fontColor\": {\n                \"title\": \"Font color\",\n                \"type\": \"string\",\n                \"default\": \"#545454\"\n            },\n            \"fontSize\": {\n                \"title\": \"Font size\",\n                \"type\": \"number\",\n                \"default\": 10\n            },\n            \"tooltipIndividual\": {\n                \"title\": \"Hover individual points\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"tooltipCumulative\": {\n                \"title\": \"Show cumulative values in stacking mode\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"tooltipValueFormatter\": {\n                \"title\": \"Tooltip value format function, f(value)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"hideZeros\": {\n                \"title\": \"Hide zero/false values from tooltip\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"showTooltip\": {\n                \"title\": \"Show tooltip\",\n                \"type\": \"boolean\",\n                \"default\": true\n            },\n            \"grid\": {\n                \"title\": \"Grid settings\",\n                \"type\": \"object\",\n                \"properties\": {\n                    \"color\": {\n                        \"title\": \"Primary color\",\n                        \"type\": \"string\",\n                        \"default\": \"#545454\"\n                    },\n                    \"backgroundColor\": {\n                        \"title\": \"Background color\",\n                        \"type\": \"string\",\n                        \"default\": null\n                    },\n                    \"tickColor\": {\n                        \"title\": \"Ticks color\",\n                        \"type\": \"string\",\n                        \"default\": \"#DDDDDD\"\n                    },\n                    \"outlineWidth\": {\n                        \"title\": \"Grid outline/border width (px)\",\n                        \"type\": \"number\",\n                        \"default\": 1\n                    },\n                    \"verticalLines\": {\n                        \"title\": \"Show vertical lines\",\n                        \"type\": \"boolean\",\n                        \"default\": true\n                    },\n                    \"horizontalLines\": {\n                        \"title\": \"Show horizontal lines\",\n                        \"type\": \"boolean\",\n                        \"default\": true\n                    }\n                }\n            },\n            \"xaxis\": {\n                \"title\": \"X axis settings\",\n                \"type\": \"object\",\n                \"properties\": {\n                    \"showLabels\": {\n                        \"title\": \"Show labels\",\n                        \"type\": \"boolean\",\n                        \"default\": true\n                    },\n                    \"title\": {\n                        \"title\": \"Axis title\",\n                        \"type\": \"string\",\n                        \"default\": null\n                    },\n                    \"color\": {\n                        \"title\": \"Ticks color\",\n                        \"type\": \"string\",\n                        \"default\": null\n                    }\n                }\n            },\n            \"yaxis\": {\n                \"title\": \"Y axis settings\",\n                \"type\": \"object\",\n                \"properties\": {\n                    \"min\": {\n                        \"title\": \"Minimum value on the scale\",\n                        \"type\": \"number\",\n                        \"default\": null\n                    },\n                    \"max\": {\n                        \"title\": \"Maximum value on the scale\",\n                        \"type\": \"number\",\n                        \"default\": null\n                    },\n                    \"showLabels\": {\n                        \"title\": \"Show labels\",\n                        \"type\": \"boolean\",\n                        \"default\": true\n                    },\n                    \"title\": {\n                        \"title\": \"Axis title\",\n                        \"type\": \"string\",\n                        \"default\": null\n                    },\n                    \"color\": {\n                        \"title\": \"Ticks color\",\n                        \"type\": \"string\",\n                        \"default\": null\n                    },\n                    \"ticksFormatter\": {\n                        \"title\": \"Ticks formatter function, f(value)\",\n                        \"type\": \"string\",\n                        \"default\": \"\"\n                    },\n                    \"tickDecimals\": {\n                        \"title\": \"The number of decimals to display\",\n                        \"type\": \"number\",\n                        \"default\": 0\n                    },\n                    \"tickSize\": {\n                        \"title\": \"Step size between ticks\",\n                        \"type\": \"number\",\n                        \"default\": null\n                    }\n                }\n            },\n            \"comparisonEnabled\": {\n                \"title\": \"Enable comparison\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"timeForComparison\": {\n                \"title\": \"Time to show historical data\",\n                \"type\": \"string\",\n                \"default\": \"previousInterval\"\n            },\n            \"comparisonCustomIntervalValue\": {\n                \"title\": \"Custom interval value (ms)\",\n                \"type\": \"number\",\n                \"default\": 7200000\n            },\n            \"xaxisSecond\": {\n                \"title\": \"Second X axis\",\n                \"type\": \"object\",\n                \"properties\": {\n                    \"axisPosition\": {\n                        \"title\": \"Axis position\",\n                        \"type\": \"string\",\n                        \"default\": \"top\"\n                    },\n                    \"showLabels\": {\n                        \"title\": \"Show labels\",\n                        \"type\": \"boolean\",\n                        \"default\": true\n                    },\n                    \"title\": {\n                        \"title\": \"Axis title\",\n                        \"type\": \"string\",\n                        \"default\": null\n                    }\n                }\n            },\n            \"customLegendEnabled\": {\n                \"title\": \"Enable custom legend (this will allow you to use attribute/timeseries values in key labels)\",\n                \"type\": \"boolean\",\n                \"default\": false\n            },\n            \"dataKeysListForLabels\": {\n                \"title\": \"Datakeys list to use in labels\",\n                \"type\": \"array\",\n                \"items\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"name\": {\n                            \"title\": \"Key name\",\n                            \"type\": \"string\"\n                        },\n                        \"type\": {\n                            \"title\": \"Key type\",\n                            \"type\": \"string\",\n                            \"default\": \"attribute\"\n                        }\n                    },\n                    \"required\": [\"name\"]\n                }\n            }\n        },\n        \"required\": []\n    },\n    \"form\": [\n        [{\n            \"key\": \"actionIcons\",\n            \"add\": \"New\",\n            \"style\": {\n                \"add\": \"btn-success\"\n            },\n            \"items\": [\n                {\n                    \"key\": \"actionIcons[].name\",\n                    \"type\": \"text\"\n                },\n                {\n                    \"key\": \"actionIcons[].icon\",\n                    \"type\": \"image\"\n                }\n\n            ]\n        }],\n        [\"stack\", \"smoothLines\", \"thresholdsLineWidth\", \"shadowSize\", {\n            \"key\": \"fontColor\",\n            \"type\": \"color\"\n        }, \"fontSize\", \"tooltipIndividual\", \"tooltipCumulative\", {\n            \"key\": \"tooltipValueFormatter\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/flot/tooltip_value_format_fn\"\n        }, \"hideZeros\", \"showTooltip\", {\n            \"key\": \"grid\",\n            \"items\": [{\n                \"key\": \"grid.color\",\n                \"type\": \"color\"\n            }, {\n                \"key\": \"grid.backgroundColor\",\n                \"type\": \"color\"\n            }, {\n                \"key\": \"grid.tickColor\",\n                \"type\": \"color\"\n            }, \"grid.outlineWidth\", \"grid.verticalLines\", \"grid.horizontalLines\"]\n        }, {\n            \"key\": \"xaxis\",\n            \"items\": [\"xaxis.showLabels\", \"xaxis.title\", {\n                \"key\": \"xaxis.color\",\n                \"type\": \"color\"\n            }]\n        }, {\n            \"key\": \"yaxis\",\n            \"items\": [\"yaxis.min\", \"yaxis.max\", \"yaxis.tickDecimals\", \"yaxis.tickSize\", \"yaxis.showLabels\", \"yaxis.title\", {\n                \"key\": \"yaxis.color\",\n                \"type\": \"color\"\n            }, {\n                \"key\": \"yaxis.ticksFormatter\",\n                \"type\": \"javascript\",\n                \"helpId\": \"widget/lib/flot/ticks_formatter_fn\"\n            }]\n        }],\n        [\"comparisonEnabled\", {\n            \"key\": \"timeForComparison\",\n            \"type\": \"rc-select\",\n            \"multiple\": false,\n            \"items\": [{\n                \"value\": \"previousInterval\",\n                \"label\": \"Previous interval (default)\"\n            }, {\n                \"value\": \"days\",\n                \"label\": \"Day ago\"\n            }, {\n                \"value\": \"weeks\",\n                \"label\": \"Week ago\"\n            }, {\n                \"value\": \"months\",\n                \"label\": \"Month ago\"\n            }, {\n                \"value\": \"years\",\n                \"label\": \"Year ago\"\n            }, {\n                \"value\": \"customInterval\",\n                \"label\": \"Custom interval\"\n            }]\n        }, {\n            \"key\": \"comparisonCustomIntervalValue\",\n            \"condition\": \"model.timeForComparison === \\\"customInterval\\\"\"\n        }, {\n            \"key\": \"xaxisSecond\",\n            \"items\": [{\n                \"key\": \"xaxisSecond.axisPosition\",\n                \"type\": \"rc-select\",\n                \"multiple\": false,\n                \"items\": [{\n                    \"value\": \"top\",\n                    \"label\": \"Top (default)\"\n                }, {\n                    \"value\": \"bottom\",\n                    \"label\": \"Bottom\"\n                }]\n            }, \"xaxisSecond.showLabels\", \"xaxisSecond.title\"]\n        }],\n        [\n            \"customLegendEnabled\", {\n            \"key\": \"dataKeysListForLabels\",\n            \"condition\": \"model.customLegendEnabled === true\",\n            \"items\": [{\n                \"key\": \"dataKeysListForLabels[].type\",\n                \"type\": \"rc-select\",\n                \"multiple\": false,\n                \"items\": [{\n                    \"value\": \"attribute\",\n                    \"label\": \"Attribute\"\n                }, {\n                    \"value\": \"timeseries\",\n                    \"label\": \"Timeseries\"\n                }]\n            }, \"dataKeysListForLabels[].name\"]\n        }\n        ]\n    ],\n    \"groupInfoes\": [{\n        \"formIndex\": 0,\n        \"GroupTitle\": \"NP Settings\"\n    }, {\n        \"formIndex\": 1,\n        \"GroupTitle\": \"Common Settings\"\n    }, {\n        \"formIndex\": 2,\n        \"GroupTitle\": \"Comparison Settings\"\n    }, {\n        \"formIndex\": 3,\n        \"GroupTitle\": \"Custom Legend Settings\"\n    }]\n}",
      "dataKeySettingsSchema" : "{}",
      "latestDataKeySettingsSchema" : "{}",
      "settingsDirective" : "",
      "dataKeySettingsDirective" : "tb-flot-line-key-settings",
      "latestDataKeySettingsDirective" : "tb-flot-latest-key-settings",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"entityAliasId\":null,\"filterId\":null,\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"First\",\"color\":\"#659ff7\",\"settings\":{\"hideDataByDefault\":false,\"disableDataHiding\":false,\"removeFromLegend\":false,\"excludeFromStacking\":false,\"showLines\":true,\"lineWidth\":1,\"fillLines\":false,\"showPoints\":false,\"showSeparateAxis\":false,\"axisPosition\":\"left\",\"comparisonSettings\":{\"showValuesForComparison\":true,\"comparisonValuesLabel\":\"\",\"color\":\"\"},\"thresholds\":[]},\"_hash\":0.8587686344902596,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\",\"units\":null,\"decimals\":null,\"usePostProcessing\":null,\"postFuncBody\":null},{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Sin\",\"color\":\"#f765a3\",\"settings\":{},\"_hash\":0.23146058411865855,\"funcBody\":\"return Math.round(1000*Math.sin(time/5000));\",\"units\":null,\"decimals\":null,\"usePostProcessing\":null,\"postFuncBody\":null},{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Cos\",\"color\":\"#f44336\",\"settings\":{},\"_hash\":0.8661822844801712,\"funcBody\":\"return Math.round(1000*Math.cos(time/5000));\"}],\"latestDataKeys\":null}],\"timewindow\":{\"hideInterval\":false,\"hideAggregation\":false,\"hideAggInterval\":false,\"hideTimezone\":false,\"selectedTab\":1,\"history\":{\"historyType\":1,\"fixedTimewindow\":{\"startTimeMs\":1676531638194.0896,\"endTimeMs\":1676531658970.209},\"interval\":2000},\"aggregation\":{\"type\":\"AVG\",\"limit\":25000}},\"showTitle\":false,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{\"stack\":false,\"smoothLines\":true,\"shadowSize\":4,\"fontColor\":\"#545454\",\"fontSize\":10,\"tooltipIndividual\":false,\"tooltipCumulative\":false,\"hideZeros\":false,\"showTooltip\":false,\"grid\":{\"color\":\"#e9ebf1\",\"tickColor\":\"#e9ebf1\",\"outlineWidth\":1,\"verticalLines\":true,\"horizontalLines\":true},\"xaxis\":{\"showLabels\":true},\"yaxis\":{\"tickDecimals\":0,\"showLabels\":true},\"comparisonEnabled\":false,\"timeForComparison\":\"previousInterval\",\"xaxisSecond\":{\"axisPosition\":\"top\",\"showLabels\":true},\"customLegendEnabled\":false,\"actionIcons\":[]},\"title\":\"NPChart\",\"dropShadow\":false,\"enableFullscreen\":false,\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"mobileHeight\":null,\"showTitleIcon\":false,\"titleTooltip\":\"\",\"widgetStyle\":{\"width\":\"100%\"},\"widgetCss\":\"#container{\\n    width: 100%;\\n}\",\"pageSize\":1024,\"noDataDisplayMessage\":\"\",\"showLegend\":true,\"legendConfig\":{\"direction\":\"column\",\"position\":\"bottom\",\"sortDataKeys\":false,\"showMin\":false,\"showMax\":false,\"showAvg\":true,\"showTotal\":false,\"showLatest\":false},\"useDashboardTimewindow\":false,\"displayTimewindow\":false,\"enableDataExport\":false,\"actions\":{\"action_button\":[]}}"
    },
    "bundleAlias" : "nt_widgets_2",
    "createdTime" : 1677222176027,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "439eaeb0-b411-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "nt_herarchie",
    "name" : "NT Hierarchy",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 7.5,
      "sizeY" : 6,
      "resources" : [ {
        "url" : "static/thingsboard-extension-widgets.js",
        "isModule" : true
      } ],
      "templateHtml" : "<nt-entities-hierarchy-widget \n    [ctx]=\"ctx\">  \n</nt-entities-hierarchy-widget>  ",
      "templateCss" : ".tb-nav-tree-container{\n    padding: 0;\n}\n.tb-entities-hierarchy .mat-toolbar{\n    padding: 0;\n}\n\n.ntHerarchieSearch .mat-form-field-underline {\n  display: none;\n}\n.ntHerarchieSearch{\n    border: 1px solid #E1E1E1;\n    border-radius: 10px;\n    margin: 0;\n    padding: 0;\n}\n.ntHerarchieSearch .mat-form-field-label,.ntHerarchieSearch .mat-form-field-label-wrapper { \n  display: none;\n}\n.ntHerarchieSearch .mat-form-field-infix,.ntHerarchieSearch .mat-form-field-wrapper {\n    border: none;\n    padding: 0;\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 19px;\n    color: #696969;\n}\n.ntHerarchieSearch .mat-form-field-infix{\n    padding: 16px;\n    padding-right: 0;\n}\n.ntHerarchieSearch .mat-form-field-suffix {\n  font-size: 20px;\n}\n.jstree-node {\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 19px;\n    text-transform: capitalize;\n    color: #000000;\n}\n.jstree-node :hover{\n    cursor: default;\n    background-color: transparent;\n    color: #000000;\n}\n.jstree-node  .jstree-node :hover {\n    cursor: pointer;\n    font-weight: 600;\n    color: #1B4383;\n    background-color: transparent;\n}\n\n.jstree-node  .jstree-node {\n    color: #696969;\n}\n\n",
      "controllerScript" : "self.onInit = function() { \n}  \n     \nself.onDataUpdated = function() {\n    self.ctx.$scope.ntEntitiesHierarchyWidget.onDataUpdated(); \n}\n\nself.typeParameters = function() {\n    return {\n        dataKeysOptional: true\n    };\n}\n\nself.actionSources = function() {\n    return {\n        'nodeSelected': {\n            name: 'widget-action.node-selected',\n            multiple: false\n        }\n    };\n}\n\nself.onDestroy = function() {\n}\n",
      "settingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"EntitiesHierarchySettings\",\n        \"properties\": {\n            \"nodeIcons\": {\n                \"type\": \"array\",\n                \"title\": \"Node Icons\",\n                \"items\": {\n                    \"type\": \"object\",\n                    \"properties\": {\n                        \"name\": {\n                            \"title\": \"Name\",\n                            \"type\": \"string\"\n\n                        },\n                        \"icon\": {\n                            \"title\": \"Icon\",\n                            \"type\": \"string\"\n\n                        }\n                }\n                }\n\n            },\n            \"nodeRelationQueryFunction\": {\n                \"title\": \"Node relations query function: f(nodeCtx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"nodeHasChildrenFunction\": {\n                \"title\": \"Node has children function: f(nodeCtx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"nodeOpenedFunction\": {\n                \"title\": \"Default node opened function: f(nodeCtx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"nodeDisabledFunction\": {\n                \"title\": \"Node disabled function: f(nodeCtx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"nodeIconFunction\": {\n                \"title\": \"Node icon function: f(nodeCtx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"nodeTextFunction\": {\n                \"title\": \"Node text function: f(nodeCtx)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            },\n            \"nodesSortFunction\": {\n                \"title\": \"Nodes sort function: f(nodeCtx1, nodeCtx2)\",\n                \"type\": \"string\",\n                \"default\": \"\"\n            }\n        },\n        \"required\": []\n    },\n    \"form\": [\n        {\n            \"key\": \"nodeIcons\",\n            \"add\": \"New\",\n            \"style\": {\n                \"add\": \"btn-success\"\n            },\n            \"items\": [\n                {\n                    \"key\": \"nodeIcons[].name\",\n                    \"type\": \"text\"\n                },\n                {\n                    \"key\": \"nodeIcons[].icon\",\n                    \"type\": \"image\"\n                }\n\n            ]\n        },\n        {\n            \"key\": \"nodeRelationQueryFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entities_hierarchy/node_relation_query_fn\"\n        },\n        {\n            \"key\": \"nodeHasChildrenFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entities_hierarchy/node_has_children_fn\"\n        },\n        {\n            \"key\": \"nodeOpenedFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entities_hierarchy/node_opened_fn\"\n        },\n        {\n            \"key\": \"nodeDisabledFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entities_hierarchy/node_disabled_fn\"\n        },\n        {\n            \"key\": \"nodeIconFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entities_hierarchy/node_icon_fn\"\n        },\n        {\n            \"key\": \"nodeTextFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entities_hierarchy/node_text_fn\"\n        },\n        {\n            \"key\": \"nodesSortFunction\",\n            \"type\": \"javascript\",\n            \"helpId\": \"widget/lib/entities_hierarchy/nodes_sort_fn\"\n        }\n    ]\n}",
      "dataKeySettingsSchema" : "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"DataKeySettings\",\n        \"properties\": {},\n        \"required\": []\n    },\n    \"form\": []\n}",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{\"nodeIcons\":[{\"name\":\"ship\",\"icon\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIwSURBVHgBzVVNctpQDJae3XZIN+4k3cMN3BPg7mC6CFyg4BOkN2hzhJ6AkgsQFm2yq3OCuieo94GpN5mQCX6K9GwcMCaYZDITzQDC+nv6PukZ4JkFqzoOnJEDr17XgZQD81nox924SpwNFUVZtT9AUDd/rFrE341KcVBVMEte1LdI5Q4IIICXKKUknxyc/6YdYDCJCKLPk9bH4vNSiExy2q0AbZjH6iQ/UiqRzASHSPpCC9GIsSLqEKomH9rdFlvaATGeQPq7RvL1/Ppdf9L6oJObb5nREd08m1NDk+7ys6FwUJbrwU0eHJx5NqgmAXnchVcIDPgnTIDG/qQdbMqxUmDw/qcLieVZCg6J0OXRcPKuOCHD9NfoRXgIY0QKEw1jsJLAv/wUrhU42T8f8SR0lkpHoPVYKwzhdnYqd4+5j1hy3XrjKUCOwebydjPEP/rTli96zkECepgn13Tcu2w1DO6MrW3vHcluKLv2Xz6iW3btqxDem7b7vSn7Ah3fd0sXax3IiZS198/AwkmROyjCVCoZPAyh+LkSKwUX5rwDaZtPMczK1g2p25IbX3KyAXDT06/eWargfApPFEruoVorIOOGT7g1JdaP29HGAqkTBvBISYDHdC0fpPNvk32oCb5Uwv0hYZLNRCkdyj7gYP9XR6EayTTwGYY6gwhRHeHS9gp5xNeH6Gb2EXsrNuQB4eSKoL+wacJu2oFzVgeYxcUXebpYb9l2Fe1iW+Qs8vEscgfK5weaZaz34QAAAABJRU5ErkJggg==\"}],\"nodeRelationQueryFunction\":\"var entity = nodeCtx.entity;\\nvar query = {\\n    parameters: {\\n        rootId: entity.id.id,\\n        rootType: entity.id.entityType,\\n        direction: \\\"FROM\\\",\\n        maxLevel: 1\\n    },\\n    filters: [{\\n        relationType: \\\"Contains\\\",\\n        entityTypes: [\\\"ASSET\\\"]\\n    }]\\n};\\nreturn query;\\n\"},\"title\":\"NT Hierarchy\",\"showTitleIcon\":false,\"titleTooltip\":\"\",\"dropShadow\":true,\"enableFullscreen\":true,\"enableDataExport\":true,\"widgetStyle\":{},\"widgetCss\":\"\",\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"noDataDisplayMessage\":\"\",\"showLegend\":false}"
    },
    "bundleAlias" : "nt_widgets_2",
    "createdTime" : 1677214599581,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "9fb4c4d0-b3ff-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "tbtimewindow",
    "name" : "TBTimewindow",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "timeseries",
      "sizeX" : 8,
      "sizeY" : 5,
      "resources" : [ ],
      "templateHtml" : " <tb-timewindow class=\"nptTimeWindow\" [overlapTrigger]=false aggregation=\"true\"\n     timezone=\"true\"\n     [(ngModel)]=\"ctx.parentDashboard.dashboardTimewindow\"\n     (ngModelChange)=\"ctx.parentDashboard.dashboardTimewindowChangedSubject.next($event)\">\n ",
      "templateCss" : "#container{\r\n    background: #F2F6FC;\r\n    height: 100%;\r\n  display: flex !important;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n}\r\n\r\ntb-timewindow{\r\n    background: #F2F6FC;\r\n    color: #1B4383;\r\n    border:\"1px solid green\";\r\n}",
      "controllerScript" : "self.onInit = function() {\n    // console.log(self.ctx.dashboard.dashboardTimewindow)\n    console.log(self.ctx)\n}\n\nself.onDataUpdated = function() {\n}\n\nself.onLatestDataUpdated = function() {\n}\n\nself.onResize = function() {\n}\n\nself.onEditModeChanged = function() {\n}\n\nself.onDestroy = function() {\n}\n\nself.typeParameters = function() {\n    return {\n        maxDatasources: -1, // Maximum allowed datasources for this widget, -1 - unlimited\n        maxDataKeys: -1, //Maximum allowed data keys for this widget, -1 - unlimited\n        dataKeysOptional: true, //Whether this widget can be configured with datasources without data keys\n        datasourcesOptional: true //Whether this widget can be configured with datasources without data keys\n    };\n}\n",
      "settingsSchema" : "{}",
      "dataKeySettingsSchema" : "{}",
      "latestDataKeySettingsSchema" : "{}",
      "settingsDirective" : "tb-flot-line-widget-settings",
      "dataKeySettingsDirective" : "tb-flot-line-key-settings",
      "latestDataKeySettingsDirective" : "tb-flot-latest-key-settings",
      "defaultConfig" : "{\"datasources\":[],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"0\",\"settings\":{\"shadowSize\":4,\"fontColor\":\"#545454\",\"fontSize\":10,\"xaxis\":{\"showLabels\":true,\"color\":\"#545454\"},\"yaxis\":{\"showLabels\":true,\"color\":\"#545454\"},\"grid\":{\"color\":\"#545454\",\"tickColor\":\"#DDDDDD\",\"verticalLines\":true,\"horizontalLines\":true,\"outlineWidth\":1},\"legend\":{\"show\":true,\"position\":\"nw\",\"backgroundColor\":\"#f0f0f0\",\"backgroundOpacity\":0.85,\"labelBoxBorderColor\":\"rgba(1, 1, 1, 0.45)\"},\"decimals\":1,\"stack\":false,\"tooltipIndividual\":false},\"title\":\"TBTimewindow\",\"dropShadow\":true,\"enableFullscreen\":true,\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"mobileHeight\":null,\"useDashboardTimewindow\":true,\"showTitleIcon\":false,\"titleTooltip\":\"\",\"enableDataExport\":true,\"widgetStyle\":{},\"widgetCss\":\"\",\"pageSize\":1024,\"noDataDisplayMessage\":\"\",\"showLegend\":true,\"legendConfig\":{\"direction\":\"column\",\"position\":\"bottom\",\"sortDataKeys\":false,\"showMin\":false,\"showMax\":false,\"showAvg\":true,\"showTotal\":false,\"showLatest\":false},\"displayTimewindow\":true}"
    },
    "bundleAlias" : "nt_widgets_2",
    "createdTime" : 1678366540272,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "b1dcef00-be79-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "test",
    "name" : "responsive-card-slider",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 10.5,
      "sizeY" : 6,
      "resources" : [ {
        "url" : "https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"
      }, {
        "url" : "https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css"
      } ],
      "templateHtml" : "<!--<ul class=\"cards-wrapper\">-->\n<!--    <li class=\"card \" *ngFor=\"let item of ctx.data; let i = index\">-->\n<!--            <div class=\"barOverflow\" >-->\n<!--                <div class=\"bar\" *ngFor=\"let p of item.data[0];let j=index\" [ngStyle]=\"{'background-image': 'conic-gradient(from -90deg at 50% 50%, '+ (item.data[0][1] > critical ? '#E93800' : (item.data[0][1] > warning ? '#EF7F30' : '#0EC23E')) +' 0deg '+(item.data[0][1]*1.8)+'deg, #EDEFF4 '+(item.data[0][1]*1.8)+'deg 180deg'+')'}\"> -->\n<!--                    <div class=\"in-circle\">-->\n<!--                            <span  class=\"per\" *ngIf=\"p.length>0\">{{p | number: '1.0-'+item.dataKey.decimals?item.dataKey.decimals:0}}{{item.dataKey.units}}</span>-->\n<!--                    </div>  -->\n<!--                </div>-->\n<!--            </div>-->\n<!--            <div class=\"range\">-->\n<!--                <div class=\"min\">{{ctx.data[0].dataKey.settings.min}}</div>-->\n<!--                <div class=\"max\">{{ctx.data[0].dataKey.settings.max}}</div>-->\n<!--            </div>-->\n<!--       <span class=\"label\">{{item.dataKey.label}}</span>-->\n<!--    </li>-->\n<!--</ul>-->\n\n<ul class=\"cards-wrapper\">\n    <li class=\"card\"  *ngFor=\"let item of ctx.data; let i = index\" [ngClass]=\"item.data.length>0 && item.data[0][1]!='' ? 'activeGuage':''\">\n            <div class=\"barOverflow\"  *ngIf=\"item.data.length>0\">\n                <div class=\"bar\"  [ngStyle]=\"{'background-image': 'conic-gradient(from -90deg at 50% 50%, '+ (item.data[0][1] < item.dataKey.settings.critical ? '#E93800' : (item.data[0][1] < item.dataKey.settings.warning ? '#EF7F30' : '#0EC23E')) +' 0deg '+(item.data[0][1]*1.8)+'deg, #EDEFF4 '+(item.data[0][1]*1.8)+'deg 180deg'+')'}\"> \n                    <div class=\"in-circle\">\n                            <span  class=\"per\" >{{item.data[0][1] | number: '1.0-'+item.dataKey.decimals?item.dataKey.decimals:0}}{{item.dataKey.units}}</span>\n                    </div>\n                </div>\n            </div>\n            <div class=\"range\">\n                <div class=\"min\">{{item.dataKey.settings.min}}</div>\n                <div class=\"max\">{{item.dataKey.settings.max}}</div>\n            </div>\n       <span class=\"label\" [title]=\"item.dataKey.label\">{{item.dataKey.label}}</span>\n    </li>\n</ul>\n\n",
      "templateCss" : "\n   .cards-wrapper, .cards-wrapper2 {\n       margin: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center; \n        padding: 0;\n        text-align: center;\n    }\n    .card {\n        height: auto;\n        background-color: #fff;\n        width: 120px;\n        white-space: nowrap; \n        overflow: hidden;\n        text-overflow: ellipsis;\n        color:#000;\n        margin-bottom:20px;\n        margin-right:20px;\n    }\n    .slick-dots{\n        display: flex;\n        position: absolute;\n        bottom: 0px;\n        align-items: center;\n        justify-content: center;\n        list-style: none;\n        /*margin: 10px;*/\n        \n    }\n    .slick-dots li button{\n        display: none;\n    }\n    .slick-dots li.slick-active {\n        border-radius:50%;\n        width:14px;\n        height:14px;\n        border:4px solid #0B2461;\n        text-align: center; \n        margin-right:10px;\n        background: #fff;\n    }\n    .slick-dots li {\n        border-radius:50%;\n        padding: 0;\n        width:14px;\n        height:14px;\n        border:4px solid #E1E1E1;\n        text-align: center; \n        margin-right:10px;\n        background: #fff;\n    }\n    \n    \n.progress{\n    position: relative;\n    \n}\n.barOverflow{\n    position: relative;\n    width:120px;\n    height:60px;\n    overflow: hidden;\n} \n.bar{\n    width:120px;\n    height:120px;\n    border-radius:50%;\n    background-image: conic-gradient(orange ,lightgreen);\n}\n.in-circle{ \n    position: absolute;\n    top:33%;\n    left:17%;\n    width:80px;\n    height:80px;\n    background: #fff;\n    border-radius:50%;\n    overflow: hidden;\n}\n.per{\n    position:  absolute;\n    text-align: center;\n    top:24%;\n    left: 50%;\n    transform: translateX(-50%);\n}\n.label{\n    text-align: center;\n}\n.range{\n    margin-bottom: 20px;\n}\n.min{\n    float:left;\n}\n.max{\n    float:right;\n}\n    \n\n\n    \n",
      "controllerScript" : "self.onInit = function() {\n    console.log(self.ctx)\n    var slickContainer = $(self.ctx.$container)\n        .children('.cards-wrapper:eq(0)')\n    if (slickContainer) {\n        slickContainer.slick({\n            slidesToShow: 3,\n            slidesToScroll: 3, \n            arrows: false,\n            dots: true,\n            speed: 100,\n            infinite: false,\n            variableWidth: true\n        }) \n    }\n    self.onResize();\n}\nself.onDataUpdated = function() {\n\t$(self.ctx.$container).children(\n        '.cards-wrapper:eq(0)').slick('slickUnfilter');\n\t$(self.ctx.$container).children(\n        '.cards-wrapper:eq(0)').slick('slickFilter', '.activeGuage'); \n    self.ctx.detectChanges();\n\n}\nself.onResize = function() {\n    var space = 20;\n    var wrapper = $(self.ctx.$container).children(\n        '.cards-wrapper:eq(0)').width();\n    var cardWidth = $(self.ctx.$container).find(\n        '.card:eq(0)').width() + space;\n    self.ctx.numofCards = parseInt(wrapper / cardWidth);\n\n    $(self.ctx.$container).children(\n        '.cards-wrapper:eq(0)').slick(\n        'slickSetOption', 'slidesToShow', self.ctx\n        .numofCards, true);\n    $(self.ctx.$container).children(\n        '.cards-wrapper:eq(0)').slick(\n        'slickSetOption', 'slidesToScroll', self.ctx\n        .numofCards, true);\n    self.ctx.detectChanges();\n}\n\nself.onDestroy = function() {\n    console.log(\"on Destroy\")\n    $(self.ctx.$container).children(\n        '.cards-wrapper:eq(0)').slick('unslick');\n}",
      "settingsSchema" : "{}",
      "dataKeySettingsSchema" : "{\n    \"schema\":{\n  \"type\": \"object\",\n  \"title\": \"RangeValue\",\n  \"properties\": {\n    \"min\": {\n      \"title\": \"Min\",\n      \"type\": \"number\"\n    },\n   \"max\": {\n      \"title\": \"Max\",\n      \"type\": \"number\"\n    },\n    \"warning\": {\n      \"title\": \"Warning\",\n      \"type\": \"number\"\n    },\n    \"critical\": {\n      \"title\": \"Critical\",\n      \"type\": \"number\"\n    }\n  }\n},\n\"form\":[\n  {\n    \"key\": \"min\",\n    \"type\":\"number\"\n  },\n  {\n    \"key\": \"max\",\n    \"type\":\"number\"\n  },\n  {\n    \"key\": \"warning\",\n    \"type\":\"number\"\n  },\n  {\n    \"key\": \"critical\",\n    \"type\":\"number\"\n  }\n  \n]\n    \n}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"entityAliasId\":null,\"filterId\":null,\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"2 Operating Condition\",\"color\":\"#4caf50\",\"settings\":{\"min\":0,\"max\":100,\"warning\":70,\"critical\":50},\"_hash\":0.5083404408287244,\"funcBody\":\"var value = (Math.random()*(100-0)+0).toFixed(2);\\n\\nreturn value;\\n\",\"units\":\"%\",\"decimals\":0,\"usePostProcessing\":null,\"postFuncBody\":null,\"aggregationType\":null},{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\" 3 Mechanical Stresses\",\"color\":\"#f44336\",\"settings\":{\"min\":0,\"max\":100,\"warning\":70,\"critical\":50},\"_hash\":0.34681310207974847,\"funcBody\":\"var value = (Math.random()*(100-0)+0).toFixed(2);\\nreturn value;\\n\",\"units\":\"%\",\"decimals\":0,\"usePostProcessing\":null,\"postFuncBody\":null,\"aggregationType\":null}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"responsive-card-slider\",\"useDashboardTimewindow\":true}"
    },
    "bundleAlias" : "nt_widgets_2",
    "createdTime" : 1677217182895,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "a37b33f0-b405-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  }, {
    "alias" : "timewindow",
    "name" : "TimeWindow",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "latest",
      "sizeX" : 7.5,
      "sizeY" : 3,
      "resources" : [ ],
      "templateHtml" : "\n <!--<tb-timewindow  aggregation=\"true\" timezone=\"true\"-->\n <!--                    [(ngModel)]=\"ctx.dashboard.dashboardTimewindow\"-->\n <!--                    (ngModelChange)=\"ctx.dashboard.dashboardTimewindowChangedSubject.next($event)\">-->\n\n\n                     \n<div *ngIf =\"TimeWindow!=undefined\">\n    {{TimeWindow |json}}\n<button class=\"btn-wrapper\" (click)=\"isOpen = !isOpen\" type=\"button\" cdkOverlayOrigin #open=\"cdkOverlayOrigin\">\n    {{TimeWindow['Type']}} - {{TimeWindow['time']}} \n</button>\n<ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]=\"open\" [cdkConnectedOverlayOpen]=\"isOpen\">\n   <ul class=\"list\">       \n            <input type=\"radio\" name=\"type\"  value=\"Realtime\" checked (click)=\"typeselected(this)\"> Realtime\n            <input type=\"radio\" name=\"type\"  value=\"History\">History\n        <li *ngFor=\"let item of ctx.widget.config.settings.Timmings; let i = index\"  (click)=\"TimeClick($event,item)\">{{item.Time}}</li>\n        <button mat-flat-button color=\"primary\" (click)=\"onSubmit()\" >Submit</button>\n    </ul> \n</ng-template>    \n</div>",
      "templateCss" : "\n.btn-wrapper{\n    width:100%;\n    height:auto;\n    display: flex;\n    align-items: center;\n    background: #F2F6FC;\n    padding: 12px;\n    border-radius: 8px;\n    color:#1B4383; \n    border:none;\n    text-transform:capitalize;\n}\n.mat-icon{\n    margin-right:9px;\n}\n\n",
      "controllerScript" : "self.onInit = function() { \n    console.log(self.ctx)\n    self.ctx.$scope.isOpen = false;\n    self.ctx.$scope.TimeWindow = {\n        Type:\"Realtime\", time:\"1 minute\"\n    }\n    self.ctx.$scope.onSubmit = function(event){\n    self.ctx.$scope.isOpen = false;\n    \n    var selected =  document.querySelector(\"input[name=type]:checked\").value;\n     console.log(selected)\n     self.ctx.$scope.TimeWindow.Type = selected;\n     self.ctx.updateTime();\n   }\n   \n   self.ctx.$scope.TimeClick= function(event, value)\n   {\n       console.log(event.target.parentElement.children)\n      \n        for(var sibling of event.target.parentElement.children){\n            if(sibling != event.target){\n                sibling.classList.remove(\"selected\")\n                console.log(sibling)\n            }\n            else{\n                event.target.classList.add(\"selected\") \n       \n            }\n        }\n    self.ctx.updateTime = function(){\n        if(event.target.classList.contains(\"selected\")){\n            self.ctx.$scope.TimeWindow.time = value.Time;\n         }\n        }\n      \n     }\n}\nself.onDataUpdated = function() {\n   \n}\n\nself.onResize = function() {\n    \n}\n\nself.onDestroy = function() {\n}\n\n",
      "settingsSchema" : "{\n    \"schema\":{\n  \"type\": \"object\",\n  \"title\": \"List of Items\",\n  \"properties\": {\n    \"Timmings\": {\n      \"type\": \"array\",\n      \"title\": \"Timmings\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"Time\": {\n            \"title\": \"Time\",\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n},\n\"form\":[\n  {\n    \"key\": \"Timmings\",\n    \"add\": \"New\",\n    \"items\": [\n      \"Timmings[].Time\"\n    ]\n  }\n]\n    \n}",
      "dataKeySettingsSchema" : "{}\n",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"Timmings\":[{\"Time\":\"1 minute\"},{\"Time\":\"1 day\"},{\"Time\":\"7 days\"},{\"Time\":\"30 days \"}]},\"title\":\"TimeWindow\",\"actions\":{\"TimeBtnClick\":[{\"name\":\"1 minute\",\"icon\":\"more_horiz\",\"useShowWidgetActionFunction\":null,\"showWidgetActionFunction\":\"return true;\",\"type\":\"custom\",\"customFunction\":\"console.log(additionalParams)\",\"openInSeparateDialog\":false,\"openInPopover\":false,\"id\":\"1649c59d-430d-0a79-744f-58ce3931f806\"},{\"name\":\"1 day\",\"icon\":\"more_horiz\",\"useShowWidgetActionFunction\":null,\"showWidgetActionFunction\":\"return true;\",\"type\":\"custom\",\"customFunction\":\"console.log(additionalParams)\",\"openInSeparateDialog\":false,\"openInPopover\":false,\"id\":\"c2de7f22-8a6b-a528-30c3-608b14333dbb\"},{\"name\":\"7 days\",\"icon\":\"more_horiz\",\"useShowWidgetActionFunction\":null,\"showWidgetActionFunction\":\"return true;\",\"type\":\"custom\",\"customFunction\":\"console.log(additionalParams)\",\"openInSeparateDialog\":false,\"openInPopover\":false,\"id\":\"e442a546-512c-589a-148c-2648de63509d\"},{\"name\":\"30 days \",\"icon\":\"more_horiz\",\"useShowWidgetActionFunction\":null,\"showWidgetActionFunction\":\"return true;\",\"type\":\"custom\",\"customFunction\":\"console.log(additionalParams)\",\"openInSeparateDialog\":false,\"openInPopover\":false,\"id\":\"5d2d5ac3-fef4-ca75-1d6a-15bc561fc65a\"}]}}"
    },
    "bundleAlias" : "nt_widgets_2",
    "createdTime" : 1677478154119,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "4273c970-b665-11ed-b907-3bebb3a56b7b"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "9c28c0b0-b106-11ed-a5f7-cdf9aa24320a"
    }
  } ],
  "relations" : [ ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}